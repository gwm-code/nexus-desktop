var Gh=Object.defineProperty;var Xh=(e,t,r)=>t in e?Gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kl=(e,t,r)=>Xh(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function r(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=r(o);fetch(o.href,d)}})();function uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hc={exports:{}},Vi={},dc={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),ed=Symbol.for("react.provider"),td=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),id=Symbol.for("react.memo"),nd=Symbol.for("react.lazy"),Vl=Symbol.iterator;function od(e){return e===null||typeof e!="object"?null:(e=Vl&&e[Vl]||e["@@iterator"],typeof e=="function"?e:null)}var fc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pc=Object.assign,mc={};function Fr(e,t,r){this.props=e,this.context=t,this.refs=mc,this.updater=r||fc}Fr.prototype.isReactComponent={};Fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _c(){}_c.prototype=Fr.prototype;function Go(e,t,r){this.props=e,this.context=t,this.refs=mc,this.updater=r||fc}var Xo=Go.prototype=new _c;Xo.constructor=Go;pc(Xo,Fr.prototype);Xo.isPureReactComponent=!0;var ql=Array.isArray,vc=Object.prototype.hasOwnProperty,Qo={current:null},gc={key:!0,ref:!0,__self:!0,__source:!0};function yc(e,t,r){var s,o={},d=null,_=null;if(t!=null)for(s in t.ref!==void 0&&(_=t.ref),t.key!==void 0&&(d=""+t.key),t)vc.call(t,s)&&!gc.hasOwnProperty(s)&&(o[s]=t[s]);var n=arguments.length-2;if(n===1)o.children=r;else if(1<n){for(var h=Array(n),p=0;p<n;p++)h[p]=arguments[p+2];o.children=h}if(e&&e.defaultProps)for(s in n=e.defaultProps,n)o[s]===void 0&&(o[s]=n[s]);return{$$typeof:Bs,type:e,key:d,ref:_,props:o,_owner:Qo.current}}function ld(e,t){return{$$typeof:Bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bs}function ad(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Gl=/\/+/g;function yn(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ad(""+e.key):t.toString(36)}function ai(e,t,r,s,o){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(d){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case Bs:case Qh:_=!0}}if(_)return _=e,o=o(_),e=s===""?"."+yn(_,0):s,ql(o)?(r="",e!=null&&(r=e.replace(Gl,"$&/")+"/"),ai(o,t,r,"",function(p){return p})):o!=null&&(Yo(o)&&(o=ld(o,r+(!o.key||_&&_.key===o.key?"":(""+o.key).replace(Gl,"$&/")+"/")+e)),t.push(o)),1;if(_=0,s=s===""?".":s+":",ql(e))for(var n=0;n<e.length;n++){d=e[n];var h=s+yn(d,n);_+=ai(d,t,r,h,o)}else if(h=od(e),typeof h=="function")for(e=h.call(e),n=0;!(d=e.next()).done;)d=d.value,h=s+yn(d,n++),_+=ai(d,t,r,h,o);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return _}function Ks(e,t,r){if(e==null)return e;var s=[],o=0;return ai(e,s,"","",function(d){return t.call(r,d,o++)}),s}function cd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ae={current:null},ci={transition:null},ud={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ci,ReactCurrentOwner:Qo};function xc(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ks,forEach:function(e,t,r){Ks(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ks(e,function(){t++}),t},toArray:function(e){return Ks(e,function(t){return t})||[]},only:function(e){if(!Yo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=Fr;ee.Fragment=Yh;ee.Profiler=Zh;ee.PureComponent=Go;ee.StrictMode=Jh;ee.Suspense=sd;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ud;ee.act=xc;ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=pc({},e.props),o=e.key,d=e.ref,_=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,_=Qo.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var n=e.type.defaultProps;for(h in t)vc.call(t,h)&&!gc.hasOwnProperty(h)&&(s[h]=t[h]===void 0&&n!==void 0?n[h]:t[h])}var h=arguments.length-2;if(h===1)s.children=r;else if(1<h){n=Array(h);for(var p=0;p<h;p++)n[p]=arguments[p+2];s.children=n}return{$$typeof:Bs,type:e.type,key:o,ref:d,props:s,_owner:_}};ee.createContext=function(e){return e={$$typeof:td,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ed,_context:e},e.Consumer=e};ee.createElement=yc;ee.createFactory=function(e){var t=yc.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:rd,render:e}};ee.isValidElement=Yo;ee.lazy=function(e){return{$$typeof:nd,_payload:{_status:-1,_result:e},_init:cd}};ee.memo=function(e,t){return{$$typeof:id,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=ci.transition;ci.transition={};try{e()}finally{ci.transition=t}};ee.unstable_act=xc;ee.useCallback=function(e,t){return Ae.current.useCallback(e,t)};ee.useContext=function(e){return Ae.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Ae.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Ae.current.useEffect(e,t)};ee.useId=function(){return Ae.current.useId()};ee.useImperativeHandle=function(e,t,r){return Ae.current.useImperativeHandle(e,t,r)};ee.useInsertionEffect=function(e,t){return Ae.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Ae.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Ae.current.useMemo(e,t)};ee.useReducer=function(e,t,r){return Ae.current.useReducer(e,t,r)};ee.useRef=function(e){return Ae.current.useRef(e)};ee.useState=function(e){return Ae.current.useState(e)};ee.useSyncExternalStore=function(e,t,r){return Ae.current.useSyncExternalStore(e,t,r)};ee.useTransition=function(){return Ae.current.useTransition()};ee.version="18.3.1";dc.exports=ee;var U=dc.exports;const Sc=uc(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=U,dd=Symbol.for("react.element"),fd=Symbol.for("react.fragment"),pd=Object.prototype.hasOwnProperty,md=hd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_d={key:!0,ref:!0,__self:!0,__source:!0};function wc(e,t,r){var s,o={},d=null,_=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(_=t.ref);for(s in t)pd.call(t,s)&&!_d.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:dd,type:e,key:d,ref:_,props:o,_owner:md.current}}Vi.Fragment=fd;Vi.jsx=wc;Vi.jsxs=wc;hc.exports=Vi;var l=hc.exports,qn={},Cc={exports:{}},Ve={},bc={exports:{}},kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,N){var R=j.length;j.push(N);e:for(;0<R;){var P=R-1>>>1,I=j[P];if(0<o(I,N))j[P]=N,j[R]=I,R=P;else break e}}function r(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var N=j[0],R=j.pop();if(R!==N){j[0]=R;e:for(var P=0,I=j.length,K=I>>>1;P<K;){var q=2*(P+1)-1,Q=j[q],se=q+1,L=j[se];if(0>o(Q,R))se<I&&0>o(L,Q)?(j[P]=L,j[se]=R,P=se):(j[P]=Q,j[q]=R,P=q);else if(se<I&&0>o(L,R))j[P]=L,j[se]=R,P=se;else break e}}return N}function o(j,N){var R=j.sortIndex-N.sortIndex;return R!==0?R:j.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var _=Date,n=_.now();e.unstable_now=function(){return _.now()-n}}var h=[],p=[],x=1,f=null,v=3,w=!1,C=!1,S=!1,u=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,i=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(j){for(var N=r(p);N!==null;){if(N.callback===null)s(p);else if(N.startTime<=j)s(p),N.sortIndex=N.expirationTime,t(h,N);else break;N=r(p)}}function m(j){if(S=!1,a(j),!C)if(r(h)!==null)C=!0,$(g);else{var N=r(p);N!==null&&W(m,N.startTime-j)}}function g(j,N){C=!1,S&&(S=!1,c(y),y=-1),w=!0;var R=v;try{for(a(N),f=r(h);f!==null&&(!(f.expirationTime>N)||j&&!M());){var P=f.callback;if(typeof P=="function"){f.callback=null,v=f.priorityLevel;var I=P(f.expirationTime<=N);N=e.unstable_now(),typeof I=="function"?f.callback=I:f===r(h)&&s(h),a(N)}else s(h);f=r(h)}if(f!==null)var K=!0;else{var q=r(p);q!==null&&W(m,q.startTime-N),K=!1}return K}finally{f=null,v=R,w=!1}}var b=!1,k=null,y=-1,E=5,D=-1;function M(){return!(e.unstable_now()-D<E)}function T(){if(k!==null){var j=e.unstable_now();D=j;var N=!0;try{N=k(!0,j)}finally{N?A():(b=!1,k=null)}}else b=!1}var A;if(typeof i=="function")A=function(){i(T)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=T,A=function(){H.postMessage(null)}}else A=function(){u(T,0)};function $(j){k=j,b||(b=!0,A())}function W(j,N){y=u(function(){j(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){C||w||(C=!0,$(g))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(j){switch(v){case 1:case 2:case 3:var N=3;break;default:N=v}var R=v;v=N;try{return j()}finally{v=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,N){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=v;v=j;try{return N()}finally{v=R}},e.unstable_scheduleCallback=function(j,N,R){var P=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?P+R:P):R=P,j){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=R+I,j={id:x++,callback:N,priorityLevel:j,startTime:R,expirationTime:I,sortIndex:-1},R>P?(j.sortIndex=R,t(p,j),r(h)===null&&j===r(p)&&(S?(c(y),y=-1):S=!0,W(m,R-P))):(j.sortIndex=I,t(h,j),C||w||(C=!0,$(g))),j},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(j){var N=v;return function(){var R=v;v=N;try{return j.apply(this,arguments)}finally{v=R}}}})(kc);bc.exports=kc;var vd=bc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gd=U,Ke=vd;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ec=new Set,vs={};function cr(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(vs[e]=t,e=0;e<t.length;e++)Ec.add(t[e])}var St=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=Object.prototype.hasOwnProperty,yd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xl={},Ql={};function xd(e){return Gn.call(Ql,e)?!0:Gn.call(Xl,e)?!1:yd.test(e)?Ql[e]=!0:(Xl[e]=!0,!1)}function Sd(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wd(e,t,r,s){if(t===null||typeof t>"u"||Sd(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,r,s,o,d,_){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=_}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jo=/[\-:]([a-z])/g;function Zo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jo,Zo);Ee[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jo,Zo);Ee[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jo,Zo);Ee[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function el(e,t,r,s){var o=Ee.hasOwnProperty(t)?Ee[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wd(t,r,o,s)&&(r=null),s||o===null?xd(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,s=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var kt=gd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),fr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),tl=Symbol.for("react.strict_mode"),Xn=Symbol.for("react.profiler"),jc=Symbol.for("react.provider"),Nc=Symbol.for("react.context"),rl=Symbol.for("react.forward_ref"),Qn=Symbol.for("react.suspense"),Yn=Symbol.for("react.suspense_list"),sl=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Lc=Symbol.for("react.offscreen"),Yl=Symbol.iterator;function Gr(e){return e===null||typeof e!="object"?null:(e=Yl&&e[Yl]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,xn;function rs(e){if(xn===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xn=t&&t[1]||""}return`
`+xn+e}var Sn=!1;function wn(e,t){if(!e||Sn)return"";Sn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),d=s.stack.split(`
`),_=o.length-1,n=d.length-1;1<=_&&0<=n&&o[_]!==d[n];)n--;for(;1<=_&&0<=n;_--,n--)if(o[_]!==d[n]){if(_!==1||n!==1)do if(_--,n--,0>n||o[_]!==d[n]){var h=`
`+o[_].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=_&&0<=n);break}}}finally{Sn=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rs(e):""}function Cd(e){switch(e.tag){case 5:return rs(e.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 2:case 15:return e=wn(e.type,!1),e;case 11:return e=wn(e.type.render,!1),e;case 1:return e=wn(e.type,!0),e;default:return""}}function Jn(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pr:return"Fragment";case fr:return"Portal";case Xn:return"Profiler";case tl:return"StrictMode";case Qn:return"Suspense";case Yn:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nc:return(e.displayName||"Context")+".Consumer";case jc:return(e._context.displayName||"Context")+".Provider";case rl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sl:return t=e.displayName||null,t!==null?t:Jn(e.type)||"Memo";case Lt:t=e._payload,e=e._init;try{return Jn(e(t))}catch{}}return null}function bd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jn(t);case 8:return t===tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ut(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kd(e){var t=Dc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(_){s=""+_,d.call(this,_)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qs(e){e._valueTracker||(e._valueTracker=kd(e))}function Rc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Dc(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Si(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zn(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Jl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ut(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tc(e,t){t=t.checked,t!=null&&el(e,"checked",t,!1)}function eo(e,t){Tc(e,t);var r=Ut(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?to(e,t.type,r):t.hasOwnProperty("defaultValue")&&to(e,t.type,Ut(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function to(e,t,r){(t!=="number"||Si(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ss=Array.isArray;function kr(e,t,r,s){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ut(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ro(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ea(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(ss(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ut(r)}}function Ac(e,t){var r=Ut(t.value),s=Ut(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ta(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function so(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,Pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ed=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){Ed.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function zc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function Bc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,o=zc(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,o):e[r]=o}}var jd=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function io(e,t){if(t){if(jd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function no(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oo=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lo=null,Er=null,jr=null;function ra(e){if(e=Hs(e)){if(typeof lo!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Yi(t),lo(e.stateNode,e.type,t))}}function Ic(e){Er?jr?jr.push(e):jr=[e]:Er=e}function Oc(){if(Er){var e=Er,t=jr;if(jr=Er=null,ra(e),t)for(e=0;e<t.length;e++)ra(t[e])}}function Hc(e,t){return e(t)}function Fc(){}var Cn=!1;function Wc(e,t,r){if(Cn)return e(t,r);Cn=!0;try{return Hc(e,t,r)}finally{Cn=!1,(Er!==null||jr!==null)&&(Fc(),Oc())}}function ys(e,t){var r=e.stateNode;if(r===null)return null;var s=Yi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var ao=!1;if(St)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){ao=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{ao=!1}function Nd(e,t,r,s,o,d,_,n,h){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(x){this.onError(x)}}var ls=!1,wi=null,Ci=!1,co=null,Ld={onError:function(e){ls=!0,wi=e}};function Dd(e,t,r,s,o,d,_,n,h){ls=!1,wi=null,Nd.apply(Ld,arguments)}function Rd(e,t,r,s,o,d,_,n,h){if(Dd.apply(this,arguments),ls){if(ls){var p=wi;ls=!1,wi=null}else throw Error(V(198));Ci||(Ci=!0,co=p)}}function ur(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sa(e){if(ur(e)!==e)throw Error(V(188))}function Td(e){var t=e.alternate;if(!t){if(t=ur(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(o===null)break;var d=o.alternate;if(d===null){if(s=o.return,s!==null){r=s;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===r)return sa(o),e;if(d===s)return sa(o),t;d=d.sibling}throw Error(V(188))}if(r.return!==s.return)r=o,s=d;else{for(var _=!1,n=o.child;n;){if(n===r){_=!0,r=o,s=d;break}if(n===s){_=!0,s=o,r=d;break}n=n.sibling}if(!_){for(n=d.child;n;){if(n===r){_=!0,r=d,s=o;break}if(n===s){_=!0,s=d,r=o;break}n=n.sibling}if(!_)throw Error(V(189))}}if(r.alternate!==s)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function $c(e){return e=Td(e),e!==null?Kc(e):null}function Kc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kc(e);if(t!==null)return t;e=e.sibling}return null}var Vc=Ke.unstable_scheduleCallback,ia=Ke.unstable_cancelCallback,Ad=Ke.unstable_shouldYield,Md=Ke.unstable_requestPaint,_e=Ke.unstable_now,Pd=Ke.unstable_getCurrentPriorityLevel,nl=Ke.unstable_ImmediatePriority,qc=Ke.unstable_UserBlockingPriority,bi=Ke.unstable_NormalPriority,zd=Ke.unstable_LowPriority,Gc=Ke.unstable_IdlePriority,qi=null,pt=null;function Bd(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(qi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Hd,Id=Math.log,Od=Math.LN2;function Hd(e){return e>>>=0,e===0?32:31-(Id(e)/Od|0)|0}var Xs=64,Qs=4194304;function is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ki(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,d=e.pingedLanes,_=r&268435455;if(_!==0){var n=_&~o;n!==0?s=is(n):(d&=_,d!==0&&(s=is(d)))}else _=r&~o,_!==0?s=is(_):d!==0&&(s=is(d));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,d=t&-t,o>=d||o===16&&(d&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ot(t),o=1<<r,s|=e[r],t&=~o;return s}function Fd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wd(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,d=e.pendingLanes;0<d;){var _=31-ot(d),n=1<<_,h=o[_];h===-1?(!(n&r)||n&s)&&(o[_]=Fd(n,t)):h<=t&&(e.expiredLanes|=n),d&=~n}}function uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xc(){var e=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),e}function bn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Is(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function Ud(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-ot(r),d=1<<o;t[o]=0,s[o]=-1,e[o]=-1,r&=~d}}function ol(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ot(r),o=1<<s;o&t|e[s]&t&&(e[s]|=t),r&=~o}}var ne=0;function Qc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yc,ll,Jc,Zc,eu,ho=!1,Ys=[],Pt=null,zt=null,Bt=null,xs=new Map,Ss=new Map,Rt=[],$d="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function na(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Qr(e,t,r,s,o,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:d,targetContainers:[o]},t!==null&&(t=Hs(t),t!==null&&ll(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Kd(e,t,r,s,o){switch(t){case"focusin":return Pt=Qr(Pt,e,t,r,s,o),!0;case"dragenter":return zt=Qr(zt,e,t,r,s,o),!0;case"mouseover":return Bt=Qr(Bt,e,t,r,s,o),!0;case"pointerover":var d=o.pointerId;return xs.set(d,Qr(xs.get(d)||null,e,t,r,s,o)),!0;case"gotpointercapture":return d=o.pointerId,Ss.set(d,Qr(Ss.get(d)||null,e,t,r,s,o)),!0}return!1}function tu(e){var t=Jt(e.target);if(t!==null){var r=ur(t);if(r!==null){if(t=r.tag,t===13){if(t=Uc(r),t!==null){e.blockedOn=t,eu(e.priority,function(){Jc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);oo=s,r.target.dispatchEvent(s),oo=null}else return t=Hs(r),t!==null&&ll(t),e.blockedOn=r,!1;t.shift()}return!0}function oa(e,t,r){ui(e)&&r.delete(t)}function Vd(){ho=!1,Pt!==null&&ui(Pt)&&(Pt=null),zt!==null&&ui(zt)&&(zt=null),Bt!==null&&ui(Bt)&&(Bt=null),xs.forEach(oa),Ss.forEach(oa)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,ho||(ho=!0,Ke.unstable_scheduleCallback(Ke.unstable_NormalPriority,Vd)))}function ws(e){function t(o){return Yr(o,e)}if(0<Ys.length){Yr(Ys[0],e);for(var r=1;r<Ys.length;r++){var s=Ys[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Pt!==null&&Yr(Pt,e),zt!==null&&Yr(zt,e),Bt!==null&&Yr(Bt,e),xs.forEach(t),Ss.forEach(t),r=0;r<Rt.length;r++)s=Rt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Rt.length&&(r=Rt[0],r.blockedOn===null);)tu(r),r.blockedOn===null&&Rt.shift()}var Nr=kt.ReactCurrentBatchConfig,Ei=!0;function qd(e,t,r,s){var o=ne,d=Nr.transition;Nr.transition=null;try{ne=1,al(e,t,r,s)}finally{ne=o,Nr.transition=d}}function Gd(e,t,r,s){var o=ne,d=Nr.transition;Nr.transition=null;try{ne=4,al(e,t,r,s)}finally{ne=o,Nr.transition=d}}function al(e,t,r,s){if(Ei){var o=fo(e,t,r,s);if(o===null)Mn(e,t,s,ji,r),na(e,s);else if(Kd(o,e,t,r,s))s.stopPropagation();else if(na(e,s),t&4&&-1<$d.indexOf(e)){for(;o!==null;){var d=Hs(o);if(d!==null&&Yc(d),d=fo(e,t,r,s),d===null&&Mn(e,t,s,ji,r),d===o)break;o=d}o!==null&&s.stopPropagation()}else Mn(e,t,s,null,r)}}var ji=null;function fo(e,t,r,s){if(ji=null,e=il(s),e=Jt(e),e!==null)if(t=ur(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Uc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ji=e,null}function ru(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pd()){case nl:return 1;case qc:return 4;case bi:case zd:return 16;case Gc:return 536870912;default:return 16}default:return 16}}var At=null,cl=null,hi=null;function su(){if(hi)return hi;var e,t=cl,r=t.length,s,o="value"in At?At.value:At.textContent,d=o.length;for(e=0;e<r&&t[e]===o[e];e++);var _=r-e;for(s=1;s<=_&&t[r-s]===o[d-s];s++);return hi=o.slice(e,1<s?1-s:void 0)}function di(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function la(){return!1}function qe(e){function t(r,s,o,d,_){this._reactName=r,this._targetInst=o,this.type=s,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var n in e)e.hasOwnProperty(n)&&(r=e[n],this[n]=r?r(d):d[n]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Js:la,this.isPropagationStopped=la,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=qe(Wr),Os=pe({},Wr,{view:0,detail:0}),Xd=qe(Os),kn,En,Jr,Gi=pe({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(kn=e.screenX-Jr.screenX,En=e.screenY-Jr.screenY):En=kn=0,Jr=e),kn)},movementY:function(e){return"movementY"in e?e.movementY:En}}),aa=qe(Gi),Qd=pe({},Gi,{dataTransfer:0}),Yd=qe(Qd),Jd=pe({},Os,{relatedTarget:0}),jn=qe(Jd),Zd=pe({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),ef=qe(Zd),tf=pe({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rf=qe(tf),sf=pe({},Wr,{data:0}),ca=qe(sf),nf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function af(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lf[e])?!!t[e]:!1}function hl(){return af}var cf=pe({},Os,{key:function(e){if(e.key){var t=nf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hl,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uf=qe(cf),hf=pe({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=qe(hf),df=pe({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hl}),ff=qe(df),pf=pe({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mf=qe(pf),_f=pe({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vf=qe(_f),gf=[9,13,27,32],dl=St&&"CompositionEvent"in window,as=null;St&&"documentMode"in document&&(as=document.documentMode);var yf=St&&"TextEvent"in window&&!as,iu=St&&(!dl||as&&8<as&&11>=as),ha=" ",da=!1;function nu(e,t){switch(e){case"keyup":return gf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ou(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function xf(e,t){switch(e){case"compositionend":return ou(t);case"keypress":return t.which!==32?null:(da=!0,ha);case"textInput":return e=t.data,e===ha&&da?null:e;default:return null}}function Sf(e,t){if(mr)return e==="compositionend"||!dl&&nu(e,t)?(e=su(),hi=cl=At=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iu&&t.locale!=="ko"?null:t.data;default:return null}}var wf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wf[e.type]:t==="textarea"}function lu(e,t,r,s){Ic(s),t=Ni(t,"onChange"),0<t.length&&(r=new ul("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var cs=null,Cs=null;function Cf(e){gu(e,0)}function Xi(e){var t=gr(e);if(Rc(t))return e}function bf(e,t){if(e==="change")return t}var au=!1;if(St){var Nn;if(St){var Ln="oninput"in document;if(!Ln){var pa=document.createElement("div");pa.setAttribute("oninput","return;"),Ln=typeof pa.oninput=="function"}Nn=Ln}else Nn=!1;au=Nn&&(!document.documentMode||9<document.documentMode)}function ma(){cs&&(cs.detachEvent("onpropertychange",cu),Cs=cs=null)}function cu(e){if(e.propertyName==="value"&&Xi(Cs)){var t=[];lu(t,Cs,e,il(e)),Wc(Cf,t)}}function kf(e,t,r){e==="focusin"?(ma(),cs=t,Cs=r,cs.attachEvent("onpropertychange",cu)):e==="focusout"&&ma()}function Ef(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(Cs)}function jf(e,t){if(e==="click")return Xi(t)}function Nf(e,t){if(e==="input"||e==="change")return Xi(t)}function Lf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Lf;function bs(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var o=r[s];if(!Gn.call(t,o)||!at(e[o],t[o]))return!1}return!0}function _a(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function va(e,t){var r=_a(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_a(r)}}function uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hu(){for(var e=window,t=Si();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Si(e.document)}return t}function fl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Df(e){var t=hu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uu(r.ownerDocument.documentElement,r)){if(s!==null&&fl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,d=Math.min(s.start,o);s=s.end===void 0?d:Math.min(s.end,o),!e.extend&&d>s&&(o=s,s=d,d=o),o=va(r,d);var _=va(r,s);o&&_&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(_.node,_.offset)):(t.setEnd(_.node,_.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rf=St&&"documentMode"in document&&11>=document.documentMode,_r=null,po=null,us=null,mo=!1;function ga(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mo||_r==null||_r!==Si(s)||(s=_r,"selectionStart"in s&&fl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),us&&bs(us,s)||(us=s,s=Ni(po,"onSelect"),0<s.length&&(t=new ul("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=_r)))}function Zs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vr={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Dn={},du={};St&&(du=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Qi(e){if(Dn[e])return Dn[e];if(!vr[e])return e;var t=vr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in du)return Dn[e]=t[r];return e}var fu=Qi("animationend"),pu=Qi("animationiteration"),mu=Qi("animationstart"),_u=Qi("transitionend"),vu=new Map,ya="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){vu.set(e,t),cr(t,[e])}for(var Rn=0;Rn<ya.length;Rn++){var Tn=ya[Rn],Tf=Tn.toLowerCase(),Af=Tn[0].toUpperCase()+Tn.slice(1);qt(Tf,"on"+Af)}qt(fu,"onAnimationEnd");qt(pu,"onAnimationIteration");qt(mu,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(_u,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function xa(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Rd(s,t,void 0,e),e.currentTarget=null}function gu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],o=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var _=s.length-1;0<=_;_--){var n=s[_],h=n.instance,p=n.currentTarget;if(n=n.listener,h!==d&&o.isPropagationStopped())break e;xa(o,n,p),d=h}else for(_=0;_<s.length;_++){if(n=s[_],h=n.instance,p=n.currentTarget,n=n.listener,h!==d&&o.isPropagationStopped())break e;xa(o,n,p),d=h}}}if(Ci)throw e=co,Ci=!1,co=null,e}function ae(e,t){var r=t[xo];r===void 0&&(r=t[xo]=new Set);var s=e+"__bubble";r.has(s)||(yu(t,e,2,!1),r.add(s))}function An(e,t,r){var s=0;t&&(s|=4),yu(r,e,s,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function ks(e){if(!e[ei]){e[ei]=!0,Ec.forEach(function(r){r!=="selectionchange"&&(Mf.has(r)||An(r,!1,e),An(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,An("selectionchange",!1,t))}}function yu(e,t,r,s){switch(ru(t)){case 1:var o=qd;break;case 4:o=Gd;break;default:o=al}r=o.bind(null,t,r,e),o=void 0,!ao||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Mn(e,t,r,s,o){var d=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var _=s.tag;if(_===3||_===4){var n=s.stateNode.containerInfo;if(n===o||n.nodeType===8&&n.parentNode===o)break;if(_===4)for(_=s.return;_!==null;){var h=_.tag;if((h===3||h===4)&&(h=_.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;_=_.return}for(;n!==null;){if(_=Jt(n),_===null)return;if(h=_.tag,h===5||h===6){s=d=_;continue e}n=n.parentNode}}s=s.return}Wc(function(){var p=d,x=il(r),f=[];e:{var v=vu.get(e);if(v!==void 0){var w=ul,C=e;switch(e){case"keypress":if(di(r)===0)break e;case"keydown":case"keyup":w=uf;break;case"focusin":C="focus",w=jn;break;case"focusout":C="blur",w=jn;break;case"beforeblur":case"afterblur":w=jn;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ff;break;case fu:case pu:case mu:w=ef;break;case _u:w=mf;break;case"scroll":w=Xd;break;case"wheel":w=vf;break;case"copy":case"cut":case"paste":w=rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ua}var S=(t&4)!==0,u=!S&&e==="scroll",c=S?v!==null?v+"Capture":null:v;S=[];for(var i=p,a;i!==null;){a=i;var m=a.stateNode;if(a.tag===5&&m!==null&&(a=m,c!==null&&(m=ys(i,c),m!=null&&S.push(Es(i,m,a)))),u)break;i=i.return}0<S.length&&(v=new w(v,C,null,r,x),f.push({event:v,listeners:S}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",v&&r!==oo&&(C=r.relatedTarget||r.fromElement)&&(Jt(C)||C[wt]))break e;if((w||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,w?(C=r.relatedTarget||r.toElement,w=p,C=C?Jt(C):null,C!==null&&(u=ur(C),C!==u||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=p),w!==C)){if(S=aa,m="onMouseLeave",c="onMouseEnter",i="mouse",(e==="pointerout"||e==="pointerover")&&(S=ua,m="onPointerLeave",c="onPointerEnter",i="pointer"),u=w==null?v:gr(w),a=C==null?v:gr(C),v=new S(m,i+"leave",w,r,x),v.target=u,v.relatedTarget=a,m=null,Jt(x)===p&&(S=new S(c,i+"enter",C,r,x),S.target=a,S.relatedTarget=u,m=S),u=m,w&&C)t:{for(S=w,c=C,i=0,a=S;a;a=dr(a))i++;for(a=0,m=c;m;m=dr(m))a++;for(;0<i-a;)S=dr(S),i--;for(;0<a-i;)c=dr(c),a--;for(;i--;){if(S===c||c!==null&&S===c.alternate)break t;S=dr(S),c=dr(c)}S=null}else S=null;w!==null&&Sa(f,v,w,S,!1),C!==null&&u!==null&&Sa(f,u,C,S,!0)}}e:{if(v=p?gr(p):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var g=bf;else if(fa(v))if(au)g=Nf;else{g=Ef;var b=kf}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(g=jf);if(g&&(g=g(e,p))){lu(f,g,r,x);break e}b&&b(e,v,p),e==="focusout"&&(b=v._wrapperState)&&b.controlled&&v.type==="number"&&to(v,"number",v.value)}switch(b=p?gr(p):window,e){case"focusin":(fa(b)||b.contentEditable==="true")&&(_r=b,po=p,us=null);break;case"focusout":us=po=_r=null;break;case"mousedown":mo=!0;break;case"contextmenu":case"mouseup":case"dragend":mo=!1,ga(f,r,x);break;case"selectionchange":if(Rf)break;case"keydown":case"keyup":ga(f,r,x)}var k;if(dl)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else mr?nu(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(iu&&r.locale!=="ko"&&(mr||y!=="onCompositionStart"?y==="onCompositionEnd"&&mr&&(k=su()):(At=x,cl="value"in At?At.value:At.textContent,mr=!0)),b=Ni(p,y),0<b.length&&(y=new ca(y,e,null,r,x),f.push({event:y,listeners:b}),k?y.data=k:(k=ou(r),k!==null&&(y.data=k)))),(k=yf?xf(e,r):Sf(e,r))&&(p=Ni(p,"onBeforeInput"),0<p.length&&(x=new ca("onBeforeInput","beforeinput",null,r,x),f.push({event:x,listeners:p}),x.data=k))}gu(f,t)})}function Es(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ni(e,t){for(var r=t+"Capture",s=[];e!==null;){var o=e,d=o.stateNode;o.tag===5&&d!==null&&(o=d,d=ys(e,r),d!=null&&s.unshift(Es(e,d,o)),d=ys(e,t),d!=null&&s.push(Es(e,d,o))),e=e.return}return s}function dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sa(e,t,r,s,o){for(var d=t._reactName,_=[];r!==null&&r!==s;){var n=r,h=n.alternate,p=n.stateNode;if(h!==null&&h===s)break;n.tag===5&&p!==null&&(n=p,o?(h=ys(r,d),h!=null&&_.unshift(Es(r,h,n))):o||(h=ys(r,d),h!=null&&_.push(Es(r,h,n)))),r=r.return}_.length!==0&&e.push({event:t,listeners:_})}var Pf=/\r\n?/g,zf=/\u0000|\uFFFD/g;function wa(e){return(typeof e=="string"?e:""+e).replace(Pf,`
`).replace(zf,"")}function ti(e,t,r){if(t=wa(t),wa(e)!==t&&r)throw Error(V(425))}function Li(){}var _o=null,vo=null;function go(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yo=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,Ca=typeof Promise=="function"?Promise:void 0,If=typeof queueMicrotask=="function"?queueMicrotask:typeof Ca<"u"?function(e){return Ca.resolve(null).then(e).catch(Of)}:yo;function Of(e){setTimeout(function(){throw e})}function Pn(e,t){var r=t,s=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(s===0){e.removeChild(o),ws(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=o}while(r);ws(t)}function It(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ba(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),dt="__reactFiber$"+Ur,js="__reactProps$"+Ur,wt="__reactContainer$"+Ur,xo="__reactEvents$"+Ur,Hf="__reactListeners$"+Ur,Ff="__reactHandles$"+Ur;function Jt(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[wt]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ba(e);e!==null;){if(r=e[dt])return r;e=ba(e)}return t}e=r,r=e.parentNode}return null}function Hs(e){return e=e[dt]||e[wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Yi(e){return e[js]||null}var So=[],yr=-1;function Gt(e){return{current:e}}function ce(e){0>yr||(e.current=So[yr],So[yr]=null,yr--)}function le(e,t){yr++,So[yr]=e.current,e.current=t}var $t={},De=Gt($t),Ie=Gt(!1),sr=$t;function Tr(e,t){var r=e.type.contextTypes;if(!r)return $t;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},d;for(d in r)o[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oe(e){return e=e.childContextTypes,e!=null}function Di(){ce(Ie),ce(De)}function ka(e,t,r){if(De.current!==$t)throw Error(V(168));le(De,t),le(Ie,r)}function xu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(V(108,bd(e)||"Unknown",o));return pe({},r,s)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$t,sr=De.current,le(De,e),le(Ie,Ie.current),!0}function Ea(e,t,r){var s=e.stateNode;if(!s)throw Error(V(169));r?(e=xu(e,t,sr),s.__reactInternalMemoizedMergedChildContext=e,ce(Ie),ce(De),le(De,e)):ce(Ie),le(Ie,r)}var vt=null,Ji=!1,zn=!1;function Su(e){vt===null?vt=[e]:vt.push(e)}function Wf(e){Ji=!0,Su(e)}function Xt(){if(!zn&&vt!==null){zn=!0;var e=0,t=ne;try{var r=vt;for(ne=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}vt=null,Ji=!1}catch(o){throw vt!==null&&(vt=vt.slice(e+1)),Vc(nl,Xt),o}finally{ne=t,zn=!1}}return null}var xr=[],Sr=0,Ti=null,Ai=0,Xe=[],Qe=0,ir=null,gt=1,yt="";function Qt(e,t){xr[Sr++]=Ai,xr[Sr++]=Ti,Ti=e,Ai=t}function wu(e,t,r){Xe[Qe++]=gt,Xe[Qe++]=yt,Xe[Qe++]=ir,ir=e;var s=gt;e=yt;var o=32-ot(s)-1;s&=~(1<<o),r+=1;var d=32-ot(t)+o;if(30<d){var _=o-o%5;d=(s&(1<<_)-1).toString(32),s>>=_,o-=_,gt=1<<32-ot(t)+o|r<<o|s,yt=d+e}else gt=1<<d|r<<o|s,yt=e}function pl(e){e.return!==null&&(Qt(e,1),wu(e,1,0))}function ml(e){for(;e===Ti;)Ti=xr[--Sr],xr[Sr]=null,Ai=xr[--Sr],xr[Sr]=null;for(;e===ir;)ir=Xe[--Qe],Xe[Qe]=null,yt=Xe[--Qe],Xe[Qe]=null,gt=Xe[--Qe],Xe[Qe]=null}var $e=null,We=null,ue=!1,nt=null;function Cu(e,t){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ja(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$e=e,We=It(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$e=e,We=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ir!==null?{id:gt,overflow:yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$e=e,We=null,!0):!1;default:return!1}}function wo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Co(e){if(ue){var t=We;if(t){var r=t;if(!ja(e,t)){if(wo(e))throw Error(V(418));t=It(r.nextSibling);var s=$e;t&&ja(e,t)?Cu(s,r):(e.flags=e.flags&-4097|2,ue=!1,$e=e)}}else{if(wo(e))throw Error(V(418));e.flags=e.flags&-4097|2,ue=!1,$e=e}}}function Na(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$e=e}function ri(e){if(e!==$e)return!1;if(!ue)return Na(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!go(e.type,e.memoizedProps)),t&&(t=We)){if(wo(e))throw bu(),Error(V(418));for(;t;)Cu(e,t),t=It(t.nextSibling)}if(Na(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){We=It(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}We=null}}else We=$e?It(e.stateNode.nextSibling):null;return!0}function bu(){for(var e=We;e;)e=It(e.nextSibling)}function Ar(){We=$e=null,ue=!1}function _l(e){nt===null?nt=[e]:nt.push(e)}var Uf=kt.ReactCurrentBatchConfig;function Zr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var s=r.stateNode}if(!s)throw Error(V(147,e));var o=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(_){var n=o.refs;_===null?delete n[d]:n[d]=_},t._stringRef=d,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function si(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function La(e){var t=e._init;return t(e._payload)}function ku(e){function t(c,i){if(e){var a=c.deletions;a===null?(c.deletions=[i],c.flags|=16):a.push(i)}}function r(c,i){if(!e)return null;for(;i!==null;)t(c,i),i=i.sibling;return null}function s(c,i){for(c=new Map;i!==null;)i.key!==null?c.set(i.key,i):c.set(i.index,i),i=i.sibling;return c}function o(c,i){return c=Wt(c,i),c.index=0,c.sibling=null,c}function d(c,i,a){return c.index=a,e?(a=c.alternate,a!==null?(a=a.index,a<i?(c.flags|=2,i):a):(c.flags|=2,i)):(c.flags|=1048576,i)}function _(c){return e&&c.alternate===null&&(c.flags|=2),c}function n(c,i,a,m){return i===null||i.tag!==6?(i=Un(a,c.mode,m),i.return=c,i):(i=o(i,a),i.return=c,i)}function h(c,i,a,m){var g=a.type;return g===pr?x(c,i,a.props.children,m,a.key):i!==null&&(i.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Lt&&La(g)===i.type)?(m=o(i,a.props),m.ref=Zr(c,i,a),m.return=c,m):(m=yi(a.type,a.key,a.props,null,c.mode,m),m.ref=Zr(c,i,a),m.return=c,m)}function p(c,i,a,m){return i===null||i.tag!==4||i.stateNode.containerInfo!==a.containerInfo||i.stateNode.implementation!==a.implementation?(i=$n(a,c.mode,m),i.return=c,i):(i=o(i,a.children||[]),i.return=c,i)}function x(c,i,a,m,g){return i===null||i.tag!==7?(i=rr(a,c.mode,m,g),i.return=c,i):(i=o(i,a),i.return=c,i)}function f(c,i,a){if(typeof i=="string"&&i!==""||typeof i=="number")return i=Un(""+i,c.mode,a),i.return=c,i;if(typeof i=="object"&&i!==null){switch(i.$$typeof){case Vs:return a=yi(i.type,i.key,i.props,null,c.mode,a),a.ref=Zr(c,null,i),a.return=c,a;case fr:return i=$n(i,c.mode,a),i.return=c,i;case Lt:var m=i._init;return f(c,m(i._payload),a)}if(ss(i)||Gr(i))return i=rr(i,c.mode,a,null),i.return=c,i;si(c,i)}return null}function v(c,i,a,m){var g=i!==null?i.key:null;if(typeof a=="string"&&a!==""||typeof a=="number")return g!==null?null:n(c,i,""+a,m);if(typeof a=="object"&&a!==null){switch(a.$$typeof){case Vs:return a.key===g?h(c,i,a,m):null;case fr:return a.key===g?p(c,i,a,m):null;case Lt:return g=a._init,v(c,i,g(a._payload),m)}if(ss(a)||Gr(a))return g!==null?null:x(c,i,a,m,null);si(c,a)}return null}function w(c,i,a,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return c=c.get(a)||null,n(i,c,""+m,g);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vs:return c=c.get(m.key===null?a:m.key)||null,h(i,c,m,g);case fr:return c=c.get(m.key===null?a:m.key)||null,p(i,c,m,g);case Lt:var b=m._init;return w(c,i,a,b(m._payload),g)}if(ss(m)||Gr(m))return c=c.get(a)||null,x(i,c,m,g,null);si(i,m)}return null}function C(c,i,a,m){for(var g=null,b=null,k=i,y=i=0,E=null;k!==null&&y<a.length;y++){k.index>y?(E=k,k=null):E=k.sibling;var D=v(c,k,a[y],m);if(D===null){k===null&&(k=E);break}e&&k&&D.alternate===null&&t(c,k),i=d(D,i,y),b===null?g=D:b.sibling=D,b=D,k=E}if(y===a.length)return r(c,k),ue&&Qt(c,y),g;if(k===null){for(;y<a.length;y++)k=f(c,a[y],m),k!==null&&(i=d(k,i,y),b===null?g=k:b.sibling=k,b=k);return ue&&Qt(c,y),g}for(k=s(c,k);y<a.length;y++)E=w(k,c,y,a[y],m),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?y:E.key),i=d(E,i,y),b===null?g=E:b.sibling=E,b=E);return e&&k.forEach(function(M){return t(c,M)}),ue&&Qt(c,y),g}function S(c,i,a,m){var g=Gr(a);if(typeof g!="function")throw Error(V(150));if(a=g.call(a),a==null)throw Error(V(151));for(var b=g=null,k=i,y=i=0,E=null,D=a.next();k!==null&&!D.done;y++,D=a.next()){k.index>y?(E=k,k=null):E=k.sibling;var M=v(c,k,D.value,m);if(M===null){k===null&&(k=E);break}e&&k&&M.alternate===null&&t(c,k),i=d(M,i,y),b===null?g=M:b.sibling=M,b=M,k=E}if(D.done)return r(c,k),ue&&Qt(c,y),g;if(k===null){for(;!D.done;y++,D=a.next())D=f(c,D.value,m),D!==null&&(i=d(D,i,y),b===null?g=D:b.sibling=D,b=D);return ue&&Qt(c,y),g}for(k=s(c,k);!D.done;y++,D=a.next())D=w(k,c,y,D.value,m),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?y:D.key),i=d(D,i,y),b===null?g=D:b.sibling=D,b=D);return e&&k.forEach(function(T){return t(c,T)}),ue&&Qt(c,y),g}function u(c,i,a,m){if(typeof a=="object"&&a!==null&&a.type===pr&&a.key===null&&(a=a.props.children),typeof a=="object"&&a!==null){switch(a.$$typeof){case Vs:e:{for(var g=a.key,b=i;b!==null;){if(b.key===g){if(g=a.type,g===pr){if(b.tag===7){r(c,b.sibling),i=o(b,a.props.children),i.return=c,c=i;break e}}else if(b.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Lt&&La(g)===b.type){r(c,b.sibling),i=o(b,a.props),i.ref=Zr(c,b,a),i.return=c,c=i;break e}r(c,b);break}else t(c,b);b=b.sibling}a.type===pr?(i=rr(a.props.children,c.mode,m,a.key),i.return=c,c=i):(m=yi(a.type,a.key,a.props,null,c.mode,m),m.ref=Zr(c,i,a),m.return=c,c=m)}return _(c);case fr:e:{for(b=a.key;i!==null;){if(i.key===b)if(i.tag===4&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(c,i.sibling),i=o(i,a.children||[]),i.return=c,c=i;break e}else{r(c,i);break}else t(c,i);i=i.sibling}i=$n(a,c.mode,m),i.return=c,c=i}return _(c);case Lt:return b=a._init,u(c,i,b(a._payload),m)}if(ss(a))return C(c,i,a,m);if(Gr(a))return S(c,i,a,m);si(c,a)}return typeof a=="string"&&a!==""||typeof a=="number"?(a=""+a,i!==null&&i.tag===6?(r(c,i.sibling),i=o(i,a),i.return=c,c=i):(r(c,i),i=Un(a,c.mode,m),i.return=c,c=i),_(c)):r(c,i)}return u}var Mr=ku(!0),Eu=ku(!1),Mi=Gt(null),Pi=null,wr=null,vl=null;function gl(){vl=wr=Pi=null}function yl(e){var t=Mi.current;ce(Mi),e._currentValue=t}function bo(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Lr(e,t){Pi=e,vl=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function et(e){var t=e._currentValue;if(vl!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(Pi===null)throw Error(V(308));wr=e,Pi.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var Zt=null;function xl(e){Zt===null?Zt=[e]:Zt.push(e)}function ju(e,t,r,s){var o=t.interleaved;return o===null?(r.next=r,xl(t)):(r.next=o.next,o.next=r),t.interleaved=r,Ct(e,s)}function Ct(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Dt=!1;function Sl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ot(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,te&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Ct(e,r)}return o=s.interleaved,o===null?(t.next=t,xl(s)):(t.next=o.next,o.next=t),s.interleaved=t,Ct(e,r)}function fi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ol(e,r)}}function Da(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var o=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var _={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?o=d=_:d=d.next=_,r=r.next}while(r!==null);d===null?o=d=t:d=d.next=t}else o=d=t;r={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zi(e,t,r,s){var o=e.updateQueue;Dt=!1;var d=o.firstBaseUpdate,_=o.lastBaseUpdate,n=o.shared.pending;if(n!==null){o.shared.pending=null;var h=n,p=h.next;h.next=null,_===null?d=p:_.next=p,_=h;var x=e.alternate;x!==null&&(x=x.updateQueue,n=x.lastBaseUpdate,n!==_&&(n===null?x.firstBaseUpdate=p:n.next=p,x.lastBaseUpdate=h))}if(d!==null){var f=o.baseState;_=0,x=p=h=null,n=d;do{var v=n.lane,w=n.eventTime;if((s&v)===v){x!==null&&(x=x.next={eventTime:w,lane:0,tag:n.tag,payload:n.payload,callback:n.callback,next:null});e:{var C=e,S=n;switch(v=t,w=r,S.tag){case 1:if(C=S.payload,typeof C=="function"){f=C.call(w,f,v);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,v=typeof C=="function"?C.call(w,f,v):C,v==null)break e;f=pe({},f,v);break e;case 2:Dt=!0}}n.callback!==null&&n.lane!==0&&(e.flags|=64,v=o.effects,v===null?o.effects=[n]:v.push(n))}else w={eventTime:w,lane:v,tag:n.tag,payload:n.payload,callback:n.callback,next:null},x===null?(p=x=w,h=f):x=x.next=w,_|=v;if(n=n.next,n===null){if(n=o.shared.pending,n===null)break;v=n,n=v.next,v.next=null,o.lastBaseUpdate=v,o.shared.pending=null}}while(!0);if(x===null&&(h=f),o.baseState=h,o.firstBaseUpdate=p,o.lastBaseUpdate=x,t=o.shared.interleaved,t!==null){o=t;do _|=o.lane,o=o.next;while(o!==t)}else d===null&&(o.shared.lanes=0);or|=_,e.lanes=_,e.memoizedState=f}}function Ra(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=r,typeof o!="function")throw Error(V(191,o));o.call(s)}}}var Fs={},mt=Gt(Fs),Ns=Gt(Fs),Ls=Gt(Fs);function er(e){if(e===Fs)throw Error(V(174));return e}function wl(e,t){switch(le(Ls,t),le(Ns,e),le(mt,Fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:so(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=so(t,e)}ce(mt),le(mt,t)}function Pr(){ce(mt),ce(Ns),ce(Ls)}function Lu(e){er(Ls.current);var t=er(mt.current),r=so(t,e.type);t!==r&&(le(Ns,e),le(mt,r))}function Cl(e){Ns.current===e&&(ce(mt),ce(Ns))}var de=Gt(0);function Bi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bn=[];function bl(){for(var e=0;e<Bn.length;e++)Bn[e]._workInProgressVersionPrimary=null;Bn.length=0}var pi=kt.ReactCurrentDispatcher,In=kt.ReactCurrentBatchConfig,nr=0,fe=null,ge=null,xe=null,Ii=!1,hs=!1,Ds=0,$f=0;function je(){throw Error(V(321))}function kl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!at(e[r],t[r]))return!1;return!0}function El(e,t,r,s,o,d){if(nr=d,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pi.current=e===null||e.memoizedState===null?Gf:Xf,e=r(s,o),hs){d=0;do{if(hs=!1,Ds=0,25<=d)throw Error(V(301));d+=1,xe=ge=null,t.updateQueue=null,pi.current=Qf,e=r(s,o)}while(hs)}if(pi.current=Oi,t=ge!==null&&ge.next!==null,nr=0,xe=ge=fe=null,Ii=!1,t)throw Error(V(300));return e}function jl(){var e=Ds!==0;return Ds=0,e}function ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?fe.memoizedState=xe=e:xe=xe.next=e,xe}function tt(){if(ge===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var t=xe===null?fe.memoizedState:xe.next;if(t!==null)xe=t,ge=e;else{if(e===null)throw Error(V(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},xe===null?fe.memoizedState=xe=e:xe=xe.next=e}return xe}function Rs(e,t){return typeof t=="function"?t(e):t}function On(e){var t=tt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var s=ge,o=s.baseQueue,d=r.pending;if(d!==null){if(o!==null){var _=o.next;o.next=d.next,d.next=_}s.baseQueue=o=d,r.pending=null}if(o!==null){d=o.next,s=s.baseState;var n=_=null,h=null,p=d;do{var x=p.lane;if((nr&x)===x)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var f={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(n=h=f,_=s):h=h.next=f,fe.lanes|=x,or|=x}p=p.next}while(p!==null&&p!==d);h===null?_=s:h.next=n,at(s,t.memoizedState)||(Be=!0),t.memoizedState=s,t.baseState=_,t.baseQueue=h,r.lastRenderedState=s}if(e=r.interleaved,e!==null){o=e;do d=o.lane,fe.lanes|=d,or|=d,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hn(e){var t=tt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var s=r.dispatch,o=r.pending,d=t.memoizedState;if(o!==null){r.pending=null;var _=o=o.next;do d=e(d,_.action),_=_.next;while(_!==o);at(d,t.memoizedState)||(Be=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,s]}function Du(){}function Ru(e,t){var r=fe,s=tt(),o=t(),d=!at(s.memoizedState,o);if(d&&(s.memoizedState=o,Be=!0),s=s.queue,Nl(Mu.bind(null,r,s,e),[e]),s.getSnapshot!==t||d||xe!==null&&xe.memoizedState.tag&1){if(r.flags|=2048,Ts(9,Au.bind(null,r,s,o,t),void 0,null),Se===null)throw Error(V(349));nr&30||Tu(r,t,o)}return o}function Tu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Au(e,t,r,s){t.value=r,t.getSnapshot=s,Pu(t)&&zu(e)}function Mu(e,t,r){return r(function(){Pu(t)&&zu(e)})}function Pu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!at(e,r)}catch{return!0}}function zu(e){var t=Ct(e,1);t!==null&&lt(t,e,1,-1)}function Ta(e){var t=ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t.queue=e,e=e.dispatch=qf.bind(null,fe,e),[t.memoizedState,e]}function Ts(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Bu(){return tt().memoizedState}function mi(e,t,r,s){var o=ht();fe.flags|=e,o.memoizedState=Ts(1|t,r,void 0,s===void 0?null:s)}function Zi(e,t,r,s){var o=tt();s=s===void 0?null:s;var d=void 0;if(ge!==null){var _=ge.memoizedState;if(d=_.destroy,s!==null&&kl(s,_.deps)){o.memoizedState=Ts(t,r,d,s);return}}fe.flags|=e,o.memoizedState=Ts(1|t,r,d,s)}function Aa(e,t){return mi(8390656,8,e,t)}function Nl(e,t){return Zi(2048,8,e,t)}function Iu(e,t){return Zi(4,2,e,t)}function Ou(e,t){return Zi(4,4,e,t)}function Hu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fu(e,t,r){return r=r!=null?r.concat([e]):null,Zi(4,4,Hu.bind(null,t,e),r)}function Ll(){}function Wu(e,t){var r=tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&kl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Uu(e,t){var r=tt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&kl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function $u(e,t,r){return nr&21?(at(r,t)||(r=Xc(),fe.lanes|=r,or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=r)}function Kf(e,t){var r=ne;ne=r!==0&&4>r?r:4,e(!0);var s=In.transition;In.transition={};try{e(!1),t()}finally{ne=r,In.transition=s}}function Ku(){return tt().memoizedState}function Vf(e,t,r){var s=Ft(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Vu(e))qu(t,r);else if(r=ju(e,t,r,s),r!==null){var o=Te();lt(r,e,s,o),Gu(r,t,s)}}function qf(e,t,r){var s=Ft(e),o={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vu(e))qu(t,o);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var _=t.lastRenderedState,n=d(_,r);if(o.hasEagerState=!0,o.eagerState=n,at(n,_)){var h=t.interleaved;h===null?(o.next=o,xl(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}r=ju(e,t,o,s),r!==null&&(o=Te(),lt(r,e,s,o),Gu(r,t,s))}}function Vu(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function qu(e,t){hs=Ii=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ol(e,r)}}var Oi={readContext:et,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Gf={readContext:et,useCallback:function(e,t){return ht().memoizedState=[e,t===void 0?null:t],e},useContext:et,useEffect:Aa,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,mi(4194308,4,Hu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return mi(4,2,e,t)},useMemo:function(e,t){var r=ht();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ht();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Vf.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=ht();return e={current:e},t.memoizedState=e},useState:Ta,useDebugValue:Ll,useDeferredValue:function(e){return ht().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Kf.bind(null,e[1]),ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=fe,o=ht();if(ue){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),Se===null)throw Error(V(349));nr&30||Tu(s,t,r)}o.memoizedState=r;var d={value:r,getSnapshot:t};return o.queue=d,Aa(Mu.bind(null,s,d,e),[e]),s.flags|=2048,Ts(9,Au.bind(null,s,d,r,t),void 0,null),r},useId:function(){var e=ht(),t=Se.identifierPrefix;if(ue){var r=yt,s=gt;r=(s&~(1<<32-ot(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ds++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$f++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xf={readContext:et,useCallback:Wu,useContext:et,useEffect:Nl,useImperativeHandle:Fu,useInsertionEffect:Iu,useLayoutEffect:Ou,useMemo:Uu,useReducer:On,useRef:Bu,useState:function(){return On(Rs)},useDebugValue:Ll,useDeferredValue:function(e){var t=tt();return $u(t,ge.memoizedState,e)},useTransition:function(){var e=On(Rs)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Du,useSyncExternalStore:Ru,useId:Ku,unstable_isNewReconciler:!1},Qf={readContext:et,useCallback:Wu,useContext:et,useEffect:Nl,useImperativeHandle:Fu,useInsertionEffect:Iu,useLayoutEffect:Ou,useMemo:Uu,useReducer:Hn,useRef:Bu,useState:function(){return Hn(Rs)},useDebugValue:Ll,useDeferredValue:function(e){var t=tt();return ge===null?t.memoizedState=e:$u(t,ge.memoizedState,e)},useTransition:function(){var e=Hn(Rs)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Du,useSyncExternalStore:Ru,useId:Ku,unstable_isNewReconciler:!1};function st(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ko(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var en={isMounted:function(e){return(e=e._reactInternals)?ur(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Te(),o=Ft(e),d=xt(s,o);d.payload=t,r!=null&&(d.callback=r),t=Ot(e,d,o),t!==null&&(lt(t,e,o,s),fi(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Te(),o=Ft(e),d=xt(s,o);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Ot(e,d,o),t!==null&&(lt(t,e,o,s),fi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Te(),s=Ft(e),o=xt(r,s);o.tag=2,t!=null&&(o.callback=t),t=Ot(e,o,s),t!==null&&(lt(t,e,s,r),fi(t,e,s))}};function Ma(e,t,r,s,o,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,_):t.prototype&&t.prototype.isPureReactComponent?!bs(r,s)||!bs(o,d):!0}function Xu(e,t,r){var s=!1,o=$t,d=t.contextType;return typeof d=="object"&&d!==null?d=et(d):(o=Oe(t)?sr:De.current,s=t.contextTypes,d=(s=s!=null)?Tr(e,o):$t),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=en,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=d),t}function Pa(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&en.enqueueReplaceState(t,t.state,null)}function Eo(e,t,r,s){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Sl(e);var d=t.contextType;typeof d=="object"&&d!==null?o.context=et(d):(d=Oe(t)?sr:De.current,o.context=Tr(e,d)),o.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(ko(e,t,d,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&en.enqueueReplaceState(o,o.state,null),zi(e,r,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function zr(e,t){try{var r="",s=t;do r+=Cd(s),s=s.return;while(s);var o=r}catch(d){o=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:o,digest:null}}function Fn(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function jo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Yf=typeof WeakMap=="function"?WeakMap:Map;function Qu(e,t,r){r=xt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Fi||(Fi=!0,Bo=s),jo(e,t)},r}function Yu(e,t,r){r=xt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;r.payload=function(){return s(o)},r.callback=function(){jo(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){jo(e,t),typeof s!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var _=t.stack;this.componentDidCatch(t.value,{componentStack:_!==null?_:""})}),r}function za(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Yf;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(r)||(o.add(r),e=hp.bind(null,e,t,r),t.then(e,e))}function Ba(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ia(e,t,r,s,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xt(-1,1),t.tag=2,Ot(r,t,1))),r.lanes|=1),e)}var Jf=kt.ReactCurrentOwner,Be=!1;function Re(e,t,r,s){t.child=e===null?Eu(t,null,r,s):Mr(t,e.child,r,s)}function Oa(e,t,r,s,o){r=r.render;var d=t.ref;return Lr(t,o),s=El(e,t,r,s,d,o),r=jl(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,bt(e,t,o)):(ue&&r&&pl(t),t.flags|=1,Re(e,t,s,o),t.child)}function Ha(e,t,r,s,o){if(e===null){var d=r.type;return typeof d=="function"&&!Bl(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Ju(e,t,d,s,o)):(e=yi(r.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&o)){var _=d.memoizedProps;if(r=r.compare,r=r!==null?r:bs,r(_,s)&&e.ref===t.ref)return bt(e,t,o)}return t.flags|=1,e=Wt(d,s),e.ref=t.ref,e.return=t,t.child=e}function Ju(e,t,r,s,o){if(e!==null){var d=e.memoizedProps;if(bs(d,s)&&e.ref===t.ref)if(Be=!1,t.pendingProps=s=d,(e.lanes&o)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,bt(e,t,o)}return No(e,t,r,s,o)}function Zu(e,t,r){var s=t.pendingProps,o=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(br,Fe),Fe|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(br,Fe),Fe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:r,le(br,Fe),Fe|=s}else d!==null?(s=d.baseLanes|r,t.memoizedState=null):s=r,le(br,Fe),Fe|=s;return Re(e,t,o,r),t.child}function eh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,r,s,o){var d=Oe(r)?sr:De.current;return d=Tr(t,d),Lr(t,o),r=El(e,t,r,s,d,o),s=jl(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,bt(e,t,o)):(ue&&s&&pl(t),t.flags|=1,Re(e,t,r,o),t.child)}function Fa(e,t,r,s,o){if(Oe(r)){var d=!0;Ri(t)}else d=!1;if(Lr(t,o),t.stateNode===null)_i(e,t),Xu(t,r,s),Eo(t,r,s,o),s=!0;else if(e===null){var _=t.stateNode,n=t.memoizedProps;_.props=n;var h=_.context,p=r.contextType;typeof p=="object"&&p!==null?p=et(p):(p=Oe(r)?sr:De.current,p=Tr(t,p));var x=r.getDerivedStateFromProps,f=typeof x=="function"||typeof _.getSnapshotBeforeUpdate=="function";f||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(n!==s||h!==p)&&Pa(t,_,s,p),Dt=!1;var v=t.memoizedState;_.state=v,zi(t,s,_,o),h=t.memoizedState,n!==s||v!==h||Ie.current||Dt?(typeof x=="function"&&(ko(t,r,x,s),h=t.memoizedState),(n=Dt||Ma(t,r,n,s,v,h,p))?(f||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4194308)):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=h),_.props=s,_.state=h,_.context=p,s=n):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{_=t.stateNode,Nu(e,t),n=t.memoizedProps,p=t.type===t.elementType?n:st(t.type,n),_.props=p,f=t.pendingProps,v=_.context,h=r.contextType,typeof h=="object"&&h!==null?h=et(h):(h=Oe(r)?sr:De.current,h=Tr(t,h));var w=r.getDerivedStateFromProps;(x=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(n!==f||v!==h)&&Pa(t,_,s,h),Dt=!1,v=t.memoizedState,_.state=v,zi(t,s,_,o);var C=t.memoizedState;n!==f||v!==C||Ie.current||Dt?(typeof w=="function"&&(ko(t,r,w,s),C=t.memoizedState),(p=Dt||Ma(t,r,p,s,v,C,h)||!1)?(x||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(s,C,h),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(s,C,h)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof _.componentDidUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=C),_.props=s,_.state=C,_.context=h,s=p):(typeof _.componentDidUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),s=!1)}return Lo(e,t,r,s,d,o)}function Lo(e,t,r,s,o,d){eh(e,t);var _=(t.flags&128)!==0;if(!s&&!_)return o&&Ea(t,r,!1),bt(e,t,d);s=t.stateNode,Jf.current=t;var n=_&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&_?(t.child=Mr(t,e.child,null,d),t.child=Mr(t,null,n,d)):Re(e,t,n,d),t.memoizedState=s.state,o&&Ea(t,r,!0),t.child}function th(e){var t=e.stateNode;t.pendingContext?ka(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ka(e,t.context,!1),wl(e,t.containerInfo)}function Wa(e,t,r,s,o){return Ar(),_l(o),t.flags|=256,Re(e,t,r,s),t.child}var Do={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function rh(e,t,r){var s=t.pendingProps,o=de.current,d=!1,_=(t.flags&128)!==0,n;if((n=_)||(n=e!==null&&e.memoizedState===null?!1:(o&2)!==0),n?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),le(de,o&1),e===null)return Co(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(_=s.children,e=s.fallback,d?(s=t.mode,d=t.child,_={mode:"hidden",children:_},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=_):d=sn(_,s,0,null),e=rr(e,s,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ro(r),t.memoizedState=Do,e):Dl(t,_));if(o=e.memoizedState,o!==null&&(n=o.dehydrated,n!==null))return Zf(e,t,_,s,n,o,r);if(d){d=s.fallback,_=t.mode,o=e.child,n=o.sibling;var h={mode:"hidden",children:s.children};return!(_&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=h,t.deletions=null):(s=Wt(o,h),s.subtreeFlags=o.subtreeFlags&14680064),n!==null?d=Wt(n,d):(d=rr(d,_,r,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,_=e.child.memoizedState,_=_===null?Ro(r):{baseLanes:_.baseLanes|r,cachePool:null,transitions:_.transitions},d.memoizedState=_,d.childLanes=e.childLanes&~r,t.memoizedState=Do,s}return d=e.child,e=d.sibling,s=Wt(d,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Dl(e,t){return t=sn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ii(e,t,r,s){return s!==null&&_l(s),Mr(t,e.child,null,r),e=Dl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zf(e,t,r,s,o,d,_){if(r)return t.flags&256?(t.flags&=-257,s=Fn(Error(V(422))),ii(e,t,_,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,o=t.mode,s=sn({mode:"visible",children:s.children},o,0,null),d=rr(d,o,_,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,t.mode&1&&Mr(t,e.child,null,_),t.child.memoizedState=Ro(_),t.memoizedState=Do,d);if(!(t.mode&1))return ii(e,t,_,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var n=s.dgst;return s=n,d=Error(V(419)),s=Fn(d,s,void 0),ii(e,t,_,s)}if(n=(_&e.childLanes)!==0,Be||n){if(s=Se,s!==null){switch(_&-_){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|_)?0:o,o!==0&&o!==d.retryLane&&(d.retryLane=o,Ct(e,o),lt(s,e,o,-1))}return zl(),s=Fn(Error(V(421))),ii(e,t,_,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=dp.bind(null,e),o._reactRetry=t,null):(e=d.treeContext,We=It(o.nextSibling),$e=t,ue=!0,nt=null,e!==null&&(Xe[Qe++]=gt,Xe[Qe++]=yt,Xe[Qe++]=ir,gt=e.id,yt=e.overflow,ir=t),t=Dl(t,s.children),t.flags|=4096,t)}function Ua(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),bo(e.return,t,r)}function Wn(e,t,r,s,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:o}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=r,d.tailMode=o)}function sh(e,t,r){var s=t.pendingProps,o=s.revealOrder,d=s.tail;if(Re(e,t,s.children,r),s=de.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ua(e,r,t);else if(e.tag===19)Ua(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(le(de,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Bi(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Wn(t,!1,o,r,d);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Bi(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Wn(t,!0,r,null,d);break;case"together":Wn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _i(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=Wt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ep(e,t,r){switch(t.tag){case 3:th(t),Ar();break;case 5:Lu(t);break;case 1:Oe(t.type)&&Ri(t);break;case 4:wl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;le(Mi,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(le(de,de.current&1),t.flags|=128,null):r&t.child.childLanes?rh(e,t,r):(le(de,de.current&1),e=bt(e,t,r),e!==null?e.sibling:null);le(de,de.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return sh(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),le(de,de.current),s)break;return null;case 22:case 23:return t.lanes=0,Zu(e,t,r)}return bt(e,t,r)}var ih,To,nh,oh;ih=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};To=function(){};nh=function(e,t,r,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,er(mt.current);var d=null;switch(r){case"input":o=Zn(e,o),s=Zn(e,s),d=[];break;case"select":o=pe({},o,{value:void 0}),s=pe({},s,{value:void 0}),d=[];break;case"textarea":o=ro(e,o),s=ro(e,s),d=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Li)}io(r,s);var _;r=null;for(p in o)if(!s.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var n=o[p];for(_ in n)n.hasOwnProperty(_)&&(r||(r={}),r[_]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(vs.hasOwnProperty(p)?d||(d=[]):(d=d||[]).push(p,null));for(p in s){var h=s[p];if(n=o!=null?o[p]:void 0,s.hasOwnProperty(p)&&h!==n&&(h!=null||n!=null))if(p==="style")if(n){for(_ in n)!n.hasOwnProperty(_)||h&&h.hasOwnProperty(_)||(r||(r={}),r[_]="");for(_ in h)h.hasOwnProperty(_)&&n[_]!==h[_]&&(r||(r={}),r[_]=h[_])}else r||(d||(d=[]),d.push(p,r)),r=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,n=n?n.__html:void 0,h!=null&&n!==h&&(d=d||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(d=d||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(vs.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&ae("scroll",e),d||n===h||(d=[])):(d=d||[]).push(p,h))}r&&(d=d||[]).push("style",r);var p=d;(t.updateQueue=p)&&(t.flags|=4)}};oh=function(e,t,r,s){r!==s&&(t.flags|=4)};function es(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function tp(e,t,r){var s=t.pendingProps;switch(ml(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return Oe(t.type)&&Di(),Ne(t),null;case 3:return s=t.stateNode,Pr(),ce(Ie),ce(De),bl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(Ho(nt),nt=null))),To(e,t),Ne(t),null;case 5:Cl(t);var o=er(Ls.current);if(r=t.type,e!==null&&t.stateNode!=null)nh(e,t,r,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(V(166));return Ne(t),null}if(e=er(mt.current),ri(t)){s=t.stateNode,r=t.type;var d=t.memoizedProps;switch(s[dt]=t,s[js]=d,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",s),ae("close",s);break;case"iframe":case"object":case"embed":ae("load",s);break;case"video":case"audio":for(o=0;o<ns.length;o++)ae(ns[o],s);break;case"source":ae("error",s);break;case"img":case"image":case"link":ae("error",s),ae("load",s);break;case"details":ae("toggle",s);break;case"input":Jl(s,d),ae("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},ae("invalid",s);break;case"textarea":ea(s,d),ae("invalid",s)}io(r,d),o=null;for(var _ in d)if(d.hasOwnProperty(_)){var n=d[_];_==="children"?typeof n=="string"?s.textContent!==n&&(d.suppressHydrationWarning!==!0&&ti(s.textContent,n,e),o=["children",n]):typeof n=="number"&&s.textContent!==""+n&&(d.suppressHydrationWarning!==!0&&ti(s.textContent,n,e),o=["children",""+n]):vs.hasOwnProperty(_)&&n!=null&&_==="onScroll"&&ae("scroll",s)}switch(r){case"input":qs(s),Zl(s,d,!0);break;case"textarea":qs(s),ta(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=Li)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{_=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=_.createElement(r,{is:s.is}):(e=_.createElement(r),r==="select"&&(_=e,s.multiple?_.multiple=!0:s.size&&(_.size=s.size))):e=_.createElementNS(e,r),e[dt]=t,e[js]=s,ih(e,t,!1,!1),t.stateNode=e;e:{switch(_=no(r,s),r){case"dialog":ae("cancel",e),ae("close",e),o=s;break;case"iframe":case"object":case"embed":ae("load",e),o=s;break;case"video":case"audio":for(o=0;o<ns.length;o++)ae(ns[o],e);o=s;break;case"source":ae("error",e),o=s;break;case"img":case"image":case"link":ae("error",e),ae("load",e),o=s;break;case"details":ae("toggle",e),o=s;break;case"input":Jl(e,s),o=Zn(e,s),ae("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=pe({},s,{value:void 0}),ae("invalid",e);break;case"textarea":ea(e,s),o=ro(e,s),ae("invalid",e);break;default:o=s}io(r,o),n=o;for(d in n)if(n.hasOwnProperty(d)){var h=n[d];d==="style"?Bc(e,h):d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pc(e,h)):d==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&gs(e,h):typeof h=="number"&&gs(e,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vs.hasOwnProperty(d)?h!=null&&d==="onScroll"&&ae("scroll",e):h!=null&&el(e,d,h,_))}switch(r){case"input":qs(e),Zl(e,s,!1);break;case"textarea":qs(e),ta(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ut(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?kr(e,!!s.multiple,d,!1):s.defaultValue!=null&&kr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Li)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)oh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(V(166));if(r=er(Ls.current),er(mt.current),ri(t)){if(s=t.stateNode,r=t.memoizedProps,s[dt]=t,(d=s.nodeValue!==r)&&(e=$e,e!==null))switch(e.tag){case 3:ti(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ti(s.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[dt]=t,t.stateNode=s}return Ne(t),null;case 13:if(ce(de),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&We!==null&&t.mode&1&&!(t.flags&128))bu(),Ar(),t.flags|=98560,d=!1;else if(d=ri(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(V(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(V(317));d[dt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),d=!1}else nt!==null&&(Ho(nt),nt=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?ye===0&&(ye=3):zl())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return Pr(),To(e,t),e===null&&ks(t.stateNode.containerInfo),Ne(t),null;case 10:return yl(t.type._context),Ne(t),null;case 17:return Oe(t.type)&&Di(),Ne(t),null;case 19:if(ce(de),d=t.memoizedState,d===null)return Ne(t),null;if(s=(t.flags&128)!==0,_=d.rendering,_===null)if(s)es(d,!1);else{if(ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(_=Bi(e),_!==null){for(t.flags|=128,es(d,!1),s=_.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)d=r,e=s,d.flags&=14680066,_=d.alternate,_===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,e=_.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return le(de,de.current&1|2),t.child}e=e.sibling}d.tail!==null&&_e()>Br&&(t.flags|=128,s=!0,es(d,!1),t.lanes=4194304)}else{if(!s)if(e=Bi(_),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),es(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!ue)return Ne(t),null}else 2*_e()-d.renderingStartTime>Br&&r!==1073741824&&(t.flags|=128,s=!0,es(d,!1),t.lanes=4194304);d.isBackwards?(_.sibling=t.child,t.child=_):(r=d.last,r!==null?r.sibling=_:t.child=_,d.last=_)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=_e(),t.sibling=null,r=de.current,le(de,s?r&1|2:r&1),t):(Ne(t),null);case 22:case 23:return Pl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Fe&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function rp(e,t){switch(ml(t),t.tag){case 1:return Oe(t.type)&&Di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pr(),ce(Ie),ce(De),bl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cl(t),null;case 13:if(ce(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(de),null;case 4:return Pr(),null;case 10:return yl(t.type._context),null;case 22:case 23:return Pl(),null;case 24:return null;default:return null}}var ni=!1,Le=!1,sp=typeof WeakSet=="function"?WeakSet:Set,X=null;function Cr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){me(e,t,s)}else r.current=null}function Ao(e,t,r){try{r()}catch(s){me(e,t,s)}}var $a=!1;function ip(e,t){if(_o=Ei,e=hu(),fl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var o=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var _=0,n=-1,h=-1,p=0,x=0,f=e,v=null;t:for(;;){for(var w;f!==r||o!==0&&f.nodeType!==3||(n=_+o),f!==d||s!==0&&f.nodeType!==3||(h=_+s),f.nodeType===3&&(_+=f.nodeValue.length),(w=f.firstChild)!==null;)v=f,f=w;for(;;){if(f===e)break t;if(v===r&&++p===o&&(n=_),v===d&&++x===s&&(h=_),(w=f.nextSibling)!==null)break;f=v,v=f.parentNode}f=w}r=n===-1||h===-1?null:{start:n,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(vo={focusedElem:e,selectionRange:r},Ei=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var S=C.memoizedProps,u=C.memoizedState,c=t.stateNode,i=c.getSnapshotBeforeUpdate(t.elementType===t.type?S:st(t.type,S),u);c.__reactInternalSnapshotBeforeUpdate=i}break;case 3:var a=t.stateNode.containerInfo;a.nodeType===1?a.textContent="":a.nodeType===9&&a.documentElement&&a.removeChild(a.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(m){me(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return C=$a,$a=!1,C}function ds(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var d=o.destroy;o.destroy=void 0,d!==void 0&&Ao(t,r,d)}o=o.next}while(o!==s)}}function tn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Mo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lh(e){var t=e.alternate;t!==null&&(e.alternate=null,lh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[js],delete t[xo],delete t[Hf],delete t[Ff])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ah(e){return e.tag===5||e.tag===3||e.tag===4}function Ka(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Po(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Li));else if(s!==4&&(e=e.child,e!==null))for(Po(e,t,r),e=e.sibling;e!==null;)Po(e,t,r),e=e.sibling}function zo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(zo(e,t,r),e=e.sibling;e!==null;)zo(e,t,r),e=e.sibling}var Ce=null,it=!1;function Nt(e,t,r){for(r=r.child;r!==null;)ch(e,t,r),r=r.sibling}function ch(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(qi,r)}catch{}switch(r.tag){case 5:Le||Cr(r,t);case 6:var s=Ce,o=it;Ce=null,Nt(e,t,r),Ce=s,it=o,Ce!==null&&(it?(e=Ce,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ce.removeChild(r.stateNode));break;case 18:Ce!==null&&(it?(e=Ce,r=r.stateNode,e.nodeType===8?Pn(e.parentNode,r):e.nodeType===1&&Pn(e,r),ws(e)):Pn(Ce,r.stateNode));break;case 4:s=Ce,o=it,Ce=r.stateNode.containerInfo,it=!0,Nt(e,t,r),Ce=s,it=o;break;case 0:case 11:case 14:case 15:if(!Le&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var d=o,_=d.destroy;d=d.tag,_!==void 0&&(d&2||d&4)&&Ao(r,t,_),o=o.next}while(o!==s)}Nt(e,t,r);break;case 1:if(!Le&&(Cr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(n){me(r,t,n)}Nt(e,t,r);break;case 21:Nt(e,t,r);break;case 22:r.mode&1?(Le=(s=Le)||r.memoizedState!==null,Nt(e,t,r),Le=s):Nt(e,t,r);break;default:Nt(e,t,r)}}function Va(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new sp),t.forEach(function(s){var o=fp.bind(null,e,s);r.has(s)||(r.add(s),s.then(o,o))})}}function rt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];try{var d=e,_=t,n=_;e:for(;n!==null;){switch(n.tag){case 5:Ce=n.stateNode,it=!1;break e;case 3:Ce=n.stateNode.containerInfo,it=!0;break e;case 4:Ce=n.stateNode.containerInfo,it=!0;break e}n=n.return}if(Ce===null)throw Error(V(160));ch(d,_,o),Ce=null,it=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(p){me(o,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uh(t,e),t=t.sibling}function uh(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),ut(e),s&4){try{ds(3,e,e.return),tn(3,e)}catch(S){me(e,e.return,S)}try{ds(5,e,e.return)}catch(S){me(e,e.return,S)}}break;case 1:rt(t,e),ut(e),s&512&&r!==null&&Cr(r,r.return);break;case 5:if(rt(t,e),ut(e),s&512&&r!==null&&Cr(r,r.return),e.flags&32){var o=e.stateNode;try{gs(o,"")}catch(S){me(e,e.return,S)}}if(s&4&&(o=e.stateNode,o!=null)){var d=e.memoizedProps,_=r!==null?r.memoizedProps:d,n=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{n==="input"&&d.type==="radio"&&d.name!=null&&Tc(o,d),no(n,_);var p=no(n,d);for(_=0;_<h.length;_+=2){var x=h[_],f=h[_+1];x==="style"?Bc(o,f):x==="dangerouslySetInnerHTML"?Pc(o,f):x==="children"?gs(o,f):el(o,x,f,p)}switch(n){case"input":eo(o,d);break;case"textarea":Ac(o,d);break;case"select":var v=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!d.multiple;var w=d.value;w!=null?kr(o,!!d.multiple,w,!1):v!==!!d.multiple&&(d.defaultValue!=null?kr(o,!!d.multiple,d.defaultValue,!0):kr(o,!!d.multiple,d.multiple?[]:"",!1))}o[js]=d}catch(S){me(e,e.return,S)}}break;case 6:if(rt(t,e),ut(e),s&4){if(e.stateNode===null)throw Error(V(162));o=e.stateNode,d=e.memoizedProps;try{o.nodeValue=d}catch(S){me(e,e.return,S)}}break;case 3:if(rt(t,e),ut(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(S){me(e,e.return,S)}break;case 4:rt(t,e),ut(e);break;case 13:rt(t,e),ut(e),o=e.child,o.flags&8192&&(d=o.memoizedState!==null,o.stateNode.isHidden=d,!d||o.alternate!==null&&o.alternate.memoizedState!==null||(Al=_e())),s&4&&Va(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(Le=(p=Le)||x,rt(t,e),Le=p):rt(t,e),ut(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!x&&e.mode&1)for(X=e,x=e.child;x!==null;){for(f=X=x;X!==null;){switch(v=X,w=v.child,v.tag){case 0:case 11:case 14:case 15:ds(4,v,v.return);break;case 1:Cr(v,v.return);var C=v.stateNode;if(typeof C.componentWillUnmount=="function"){s=v,r=v.return;try{t=s,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(S){me(s,r,S)}}break;case 5:Cr(v,v.return);break;case 22:if(v.memoizedState!==null){Ga(f);continue}}w!==null?(w.return=v,X=w):Ga(f)}x=x.sibling}e:for(x=null,f=e;;){if(f.tag===5){if(x===null){x=f;try{o=f.stateNode,p?(d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(n=f.stateNode,h=f.memoizedProps.style,_=h!=null&&h.hasOwnProperty("display")?h.display:null,n.style.display=zc("display",_))}catch(S){me(e,e.return,S)}}}else if(f.tag===6){if(x===null)try{f.stateNode.nodeValue=p?"":f.memoizedProps}catch(S){me(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;x===f&&(x=null),f=f.return}x===f&&(x=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rt(t,e),ut(e),s&4&&Va(e);break;case 21:break;default:rt(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ah(r)){var s=r;break e}r=r.return}throw Error(V(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(gs(o,""),s.flags&=-33);var d=Ka(e);zo(e,d,o);break;case 3:case 4:var _=s.stateNode.containerInfo,n=Ka(e);Po(e,n,_);break;default:throw Error(V(161))}}catch(h){me(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function np(e,t,r){X=e,hh(e)}function hh(e,t,r){for(var s=(e.mode&1)!==0;X!==null;){var o=X,d=o.child;if(o.tag===22&&s){var _=o.memoizedState!==null||ni;if(!_){var n=o.alternate,h=n!==null&&n.memoizedState!==null||Le;n=ni;var p=Le;if(ni=_,(Le=h)&&!p)for(X=o;X!==null;)_=X,h=_.child,_.tag===22&&_.memoizedState!==null?Xa(o):h!==null?(h.return=_,X=h):Xa(o);for(;d!==null;)X=d,hh(d),d=d.sibling;X=o,ni=n,Le=p}qa(e)}else o.subtreeFlags&8772&&d!==null?(d.return=o,X=d):qa(e)}}function qa(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||tn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Le)if(r===null)s.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:st(t.type,r.memoizedProps);s.componentDidUpdate(o,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Ra(t,d,s);break;case 3:var _=t.updateQueue;if(_!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ra(t,_,r)}break;case 5:var n=t.stateNode;if(r===null&&t.flags&4){r=n;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var f=x.dehydrated;f!==null&&ws(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Le||t.flags&512&&Mo(t)}catch(v){me(t,t.return,v)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function Ga(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function Xa(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tn(4,t)}catch(h){me(t,r,h)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(h){me(t,o,h)}}var d=t.return;try{Mo(t)}catch(h){me(t,d,h)}break;case 5:var _=t.return;try{Mo(t)}catch(h){me(t,_,h)}}}catch(h){me(t,t.return,h)}if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}var op=Math.ceil,Hi=kt.ReactCurrentDispatcher,Rl=kt.ReactCurrentOwner,Ze=kt.ReactCurrentBatchConfig,te=0,Se=null,ve=null,ke=0,Fe=0,br=Gt(0),ye=0,As=null,or=0,rn=0,Tl=0,fs=null,ze=null,Al=0,Br=1/0,_t=null,Fi=!1,Bo=null,Ht=null,oi=!1,Mt=null,Wi=0,ps=0,Io=null,vi=-1,gi=0;function Te(){return te&6?_e():vi!==-1?vi:vi=_e()}function Ft(e){return e.mode&1?te&2&&ke!==0?ke&-ke:Uf.transition!==null?(gi===0&&(gi=Xc()),gi):(e=ne,e!==0||(e=window.event,e=e===void 0?16:ru(e.type)),e):1}function lt(e,t,r,s){if(50<ps)throw ps=0,Io=null,Error(V(185));Is(e,r,s),(!(te&2)||e!==Se)&&(e===Se&&(!(te&2)&&(rn|=r),ye===4&&Tt(e,ke)),He(e,s),r===1&&te===0&&!(t.mode&1)&&(Br=_e()+500,Ji&&Xt()))}function He(e,t){var r=e.callbackNode;Wd(e,t);var s=ki(e,e===Se?ke:0);if(s===0)r!==null&&ia(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ia(r),t===1)e.tag===0?Wf(Qa.bind(null,e)):Su(Qa.bind(null,e)),If(function(){!(te&6)&&Xt()}),r=null;else{switch(Qc(s)){case 1:r=nl;break;case 4:r=qc;break;case 16:r=bi;break;case 536870912:r=Gc;break;default:r=bi}r=yh(r,dh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dh(e,t){if(vi=-1,gi=0,te&6)throw Error(V(327));var r=e.callbackNode;if(Dr()&&e.callbackNode!==r)return null;var s=ki(e,e===Se?ke:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ui(e,s);else{t=s;var o=te;te|=2;var d=ph();(Se!==e||ke!==t)&&(_t=null,Br=_e()+500,tr(e,t));do try{cp();break}catch(n){fh(e,n)}while(!0);gl(),Hi.current=d,te=o,ve!==null?t=0:(Se=null,ke=0,t=ye)}if(t!==0){if(t===2&&(o=uo(e),o!==0&&(s=o,t=Oo(e,o))),t===1)throw r=As,tr(e,0),Tt(e,s),He(e,_e()),r;if(t===6)Tt(e,s);else{if(o=e.current.alternate,!(s&30)&&!lp(o)&&(t=Ui(e,s),t===2&&(d=uo(e),d!==0&&(s=d,t=Oo(e,d))),t===1))throw r=As,tr(e,0),Tt(e,s),He(e,_e()),r;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(V(345));case 2:Yt(e,ze,_t);break;case 3:if(Tt(e,s),(s&130023424)===s&&(t=Al+500-_e(),10<t)){if(ki(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Te(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=yo(Yt.bind(null,e,ze,_t),t);break}Yt(e,ze,_t);break;case 4:if(Tt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var _=31-ot(s);d=1<<_,_=t[_],_>o&&(o=_),s&=~d}if(s=o,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*op(s/1960))-s,10<s){e.timeoutHandle=yo(Yt.bind(null,e,ze,_t),s);break}Yt(e,ze,_t);break;case 5:Yt(e,ze,_t);break;default:throw Error(V(329))}}}return He(e,_e()),e.callbackNode===r?dh.bind(null,e):null}function Oo(e,t){var r=fs;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=ze,ze=r,t!==null&&Ho(t)),e}function Ho(e){ze===null?ze=e:ze.push.apply(ze,e)}function lp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var o=r[s],d=o.getSnapshot;o=o.value;try{if(!at(d(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tt(e,t){for(t&=~Tl,t&=~rn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),s=1<<r;e[r]=-1,t&=~s}}function Qa(e){if(te&6)throw Error(V(327));Dr();var t=ki(e,0);if(!(t&1))return He(e,_e()),null;var r=Ui(e,t);if(e.tag!==0&&r===2){var s=uo(e);s!==0&&(t=s,r=Oo(e,s))}if(r===1)throw r=As,tr(e,0),Tt(e,t),He(e,_e()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yt(e,ze,_t),He(e,_e()),null}function Ml(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(Br=_e()+500,Ji&&Xt())}}function lr(e){Mt!==null&&Mt.tag===0&&!(te&6)&&Dr();var t=te;te|=1;var r=Ze.transition,s=ne;try{if(Ze.transition=null,ne=1,e)return e()}finally{ne=s,Ze.transition=r,te=t,!(te&6)&&Xt()}}function Pl(){Fe=br.current,ce(br)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bf(r)),ve!==null)for(r=ve.return;r!==null;){var s=r;switch(ml(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Di();break;case 3:Pr(),ce(Ie),ce(De),bl();break;case 5:Cl(s);break;case 4:Pr();break;case 13:ce(de);break;case 19:ce(de);break;case 10:yl(s.type._context);break;case 22:case 23:Pl()}r=r.return}if(Se=e,ve=e=Wt(e.current,null),ke=Fe=t,ye=0,As=null,Tl=rn=or=0,ze=fs=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],s=r.interleaved,s!==null){r.interleaved=null;var o=s.next,d=r.pending;if(d!==null){var _=d.next;d.next=o,s.next=_}r.pending=s}Zt=null}return e}function fh(e,t){do{var r=ve;try{if(gl(),pi.current=Oi,Ii){for(var s=fe.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Ii=!1}if(nr=0,xe=ge=fe=null,hs=!1,Ds=0,Rl.current=null,r===null||r.return===null){ye=1,As=t,ve=null;break}e:{var d=e,_=r.return,n=r,h=t;if(t=ke,n.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,x=n,f=x.tag;if(!(x.mode&1)&&(f===0||f===11||f===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var w=Ba(_);if(w!==null){w.flags&=-257,Ia(w,_,n,d,t),w.mode&1&&za(d,p,t),t=w,h=p;var C=t.updateQueue;if(C===null){var S=new Set;S.add(h),t.updateQueue=S}else C.add(h);break e}else{if(!(t&1)){za(d,p,t),zl();break e}h=Error(V(426))}}else if(ue&&n.mode&1){var u=Ba(_);if(u!==null){!(u.flags&65536)&&(u.flags|=256),Ia(u,_,n,d,t),_l(zr(h,n));break e}}d=h=zr(h,n),ye!==4&&(ye=2),fs===null?fs=[d]:fs.push(d),d=_;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var c=Qu(d,h,t);Da(d,c);break e;case 1:n=h;var i=d.type,a=d.stateNode;if(!(d.flags&128)&&(typeof i.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Ht===null||!Ht.has(a)))){d.flags|=65536,t&=-t,d.lanes|=t;var m=Yu(d,n,t);Da(d,m);break e}}d=d.return}while(d!==null)}_h(r)}catch(g){t=g,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function ph(){var e=Hi.current;return Hi.current=Oi,e===null?Oi:e}function zl(){(ye===0||ye===3||ye===2)&&(ye=4),Se===null||!(or&268435455)&&!(rn&268435455)||Tt(Se,ke)}function Ui(e,t){var r=te;te|=2;var s=ph();(Se!==e||ke!==t)&&(_t=null,tr(e,t));do try{ap();break}catch(o){fh(e,o)}while(!0);if(gl(),te=r,Hi.current=s,ve!==null)throw Error(V(261));return Se=null,ke=0,ye}function ap(){for(;ve!==null;)mh(ve)}function cp(){for(;ve!==null&&!Ad();)mh(ve)}function mh(e){var t=gh(e.alternate,e,Fe);e.memoizedProps=e.pendingProps,t===null?_h(e):ve=t,Rl.current=null}function _h(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=rp(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ye=6,ve=null;return}}else if(r=tp(r,t,Fe),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);ye===0&&(ye=5)}function Yt(e,t,r){var s=ne,o=Ze.transition;try{Ze.transition=null,ne=1,up(e,t,r,s)}finally{Ze.transition=o,ne=s}return null}function up(e,t,r,s){do Dr();while(Mt!==null);if(te&6)throw Error(V(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(Ud(e,d),e===Se&&(ve=Se=null,ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oi||(oi=!0,yh(bi,function(){return Dr(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=Ze.transition,Ze.transition=null;var _=ne;ne=1;var n=te;te|=4,Rl.current=null,ip(e,r),uh(r,e),Df(vo),Ei=!!_o,vo=_o=null,e.current=r,np(r),Md(),te=n,ne=_,Ze.transition=d}else e.current=r;if(oi&&(oi=!1,Mt=e,Wi=o),d=e.pendingLanes,d===0&&(Ht=null),Bd(r.stateNode),He(e,_e()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],s(o.value,{componentStack:o.stack,digest:o.digest});if(Fi)throw Fi=!1,e=Bo,Bo=null,e;return Wi&1&&e.tag!==0&&Dr(),d=e.pendingLanes,d&1?e===Io?ps++:(ps=0,Io=e):ps=0,Xt(),null}function Dr(){if(Mt!==null){var e=Qc(Wi),t=Ze.transition,r=ne;try{if(Ze.transition=null,ne=16>e?16:e,Mt===null)var s=!1;else{if(e=Mt,Mt=null,Wi=0,te&6)throw Error(V(331));var o=te;for(te|=4,X=e.current;X!==null;){var d=X,_=d.child;if(X.flags&16){var n=d.deletions;if(n!==null){for(var h=0;h<n.length;h++){var p=n[h];for(X=p;X!==null;){var x=X;switch(x.tag){case 0:case 11:case 15:ds(8,x,d)}var f=x.child;if(f!==null)f.return=x,X=f;else for(;X!==null;){x=X;var v=x.sibling,w=x.return;if(lh(x),x===p){X=null;break}if(v!==null){v.return=w,X=v;break}X=w}}}var C=d.alternate;if(C!==null){var S=C.child;if(S!==null){C.child=null;do{var u=S.sibling;S.sibling=null,S=u}while(S!==null)}}X=d}}if(d.subtreeFlags&2064&&_!==null)_.return=d,X=_;else e:for(;X!==null;){if(d=X,d.flags&2048)switch(d.tag){case 0:case 11:case 15:ds(9,d,d.return)}var c=d.sibling;if(c!==null){c.return=d.return,X=c;break e}X=d.return}}var i=e.current;for(X=i;X!==null;){_=X;var a=_.child;if(_.subtreeFlags&2064&&a!==null)a.return=_,X=a;else e:for(_=i;X!==null;){if(n=X,n.flags&2048)try{switch(n.tag){case 0:case 11:case 15:tn(9,n)}}catch(g){me(n,n.return,g)}if(n===_){X=null;break e}var m=n.sibling;if(m!==null){m.return=n.return,X=m;break e}X=n.return}}if(te=o,Xt(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(qi,e)}catch{}s=!0}return s}finally{ne=r,Ze.transition=t}}return!1}function Ya(e,t,r){t=zr(r,t),t=Qu(e,t,1),e=Ot(e,t,1),t=Te(),e!==null&&(Is(e,1,t),He(e,t))}function me(e,t,r){if(e.tag===3)Ya(e,e,r);else for(;t!==null;){if(t.tag===3){Ya(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ht===null||!Ht.has(s))){e=zr(r,e),e=Yu(t,e,1),t=Ot(t,e,1),e=Te(),t!==null&&(Is(t,1,e),He(t,e));break}}t=t.return}}function hp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Te(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(ke&r)===r&&(ye===4||ye===3&&(ke&130023424)===ke&&500>_e()-Al?tr(e,0):Tl|=r),He(e,t)}function vh(e,t){t===0&&(e.mode&1?(t=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):t=1);var r=Te();e=Ct(e,t),e!==null&&(Is(e,t,r),He(e,r))}function dp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vh(e,r)}function fp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(V(314))}s!==null&&s.delete(t),vh(e,r)}var gh;gh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ie.current)Be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Be=!1,ep(e,t,r);Be=!!(e.flags&131072)}else Be=!1,ue&&t.flags&1048576&&wu(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;_i(e,t),e=t.pendingProps;var o=Tr(t,De.current);Lr(t,r),o=El(null,t,s,e,o,r);var d=jl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oe(s)?(d=!0,Ri(t)):d=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Sl(t),o.updater=en,t.stateNode=o,o._reactInternals=t,Eo(t,s,e,r),t=Lo(null,t,s,!0,d,r)):(t.tag=0,ue&&d&&pl(t),Re(null,t,o,r),t=t.child),t;case 16:s=t.elementType;e:{switch(_i(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=mp(s),e=st(s,e),o){case 0:t=No(null,t,s,e,r);break e;case 1:t=Fa(null,t,s,e,r);break e;case 11:t=Oa(null,t,s,e,r);break e;case 14:t=Ha(null,t,s,st(s.type,e),r);break e}throw Error(V(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:st(s,o),No(e,t,s,o,r);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:st(s,o),Fa(e,t,s,o,r);case 3:e:{if(th(t),e===null)throw Error(V(387));s=t.pendingProps,d=t.memoizedState,o=d.element,Nu(e,t),zi(t,s,null,r);var _=t.memoizedState;if(s=_.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){o=zr(Error(V(423)),t),t=Wa(e,t,s,r,o);break e}else if(s!==o){o=zr(Error(V(424)),t),t=Wa(e,t,s,r,o);break e}else for(We=It(t.stateNode.containerInfo.firstChild),$e=t,ue=!0,nt=null,r=Eu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ar(),s===o){t=bt(e,t,r);break e}Re(e,t,s,r)}t=t.child}return t;case 5:return Lu(t),e===null&&Co(t),s=t.type,o=t.pendingProps,d=e!==null?e.memoizedProps:null,_=o.children,go(s,o)?_=null:d!==null&&go(s,d)&&(t.flags|=32),eh(e,t),Re(e,t,_,r),t.child;case 6:return e===null&&Co(t),null;case 13:return rh(e,t,r);case 4:return wl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Mr(t,null,s,r):Re(e,t,s,r),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:st(s,o),Oa(e,t,s,o,r);case 7:return Re(e,t,t.pendingProps,r),t.child;case 8:return Re(e,t,t.pendingProps.children,r),t.child;case 12:return Re(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,d=t.memoizedProps,_=o.value,le(Mi,s._currentValue),s._currentValue=_,d!==null)if(at(d.value,_)){if(d.children===o.children&&!Ie.current){t=bt(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var n=d.dependencies;if(n!==null){_=d.child;for(var h=n.firstContext;h!==null;){if(h.context===s){if(d.tag===1){h=xt(-1,r&-r),h.tag=2;var p=d.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?h.next=h:(h.next=x.next,x.next=h),p.pending=h}}d.lanes|=r,h=d.alternate,h!==null&&(h.lanes|=r),bo(d.return,r,t),n.lanes|=r;break}h=h.next}}else if(d.tag===10)_=d.type===t.type?null:d.child;else if(d.tag===18){if(_=d.return,_===null)throw Error(V(341));_.lanes|=r,n=_.alternate,n!==null&&(n.lanes|=r),bo(_,r,t),_=d.sibling}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}Re(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,Lr(t,r),o=et(o),s=s(o),t.flags|=1,Re(e,t,s,r),t.child;case 14:return s=t.type,o=st(s,t.pendingProps),o=st(s.type,o),Ha(e,t,s,o,r);case 15:return Ju(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:st(s,o),_i(e,t),t.tag=1,Oe(s)?(e=!0,Ri(t)):e=!1,Lr(t,r),Xu(t,s,o),Eo(t,s,o,r),Lo(null,t,s,!0,e,r);case 19:return sh(e,t,r);case 22:return Zu(e,t,r)}throw Error(V(156,t.tag))};function yh(e,t){return Vc(e,t)}function pp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,r,s){return new pp(e,t,r,s)}function Bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mp(e){if(typeof e=="function")return Bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rl)return 11;if(e===sl)return 14}return 2}function Wt(e,t){var r=e.alternate;return r===null?(r=Je(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yi(e,t,r,s,o,d){var _=2;if(s=e,typeof e=="function")Bl(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case pr:return rr(r.children,o,d,t);case tl:_=8,o|=8;break;case Xn:return e=Je(12,r,t,o|2),e.elementType=Xn,e.lanes=d,e;case Qn:return e=Je(13,r,t,o),e.elementType=Qn,e.lanes=d,e;case Yn:return e=Je(19,r,t,o),e.elementType=Yn,e.lanes=d,e;case Lc:return sn(r,o,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jc:_=10;break e;case Nc:_=9;break e;case rl:_=11;break e;case sl:_=14;break e;case Lt:_=16,s=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Je(_,r,t,o),t.elementType=e,t.type=s,t.lanes=d,t}function rr(e,t,r,s){return e=Je(7,e,s,t),e.lanes=r,e}function sn(e,t,r,s){return e=Je(22,e,s,t),e.elementType=Lc,e.lanes=r,e.stateNode={isHidden:!1},e}function Un(e,t,r){return e=Je(6,e,null,t),e.lanes=r,e}function $n(e,t,r){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _p(e,t,r,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bn(0),this.expirationTimes=bn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Il(e,t,r,s,o,d,_,n,h){return e=new _p(e,t,r,n,h),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Je(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sl(d),e}function vp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function xh(e){if(!e)return $t;e=e._reactInternals;e:{if(ur(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(Oe(r))return xu(e,r,t)}return t}function Sh(e,t,r,s,o,d,_,n,h){return e=Il(r,s,!0,e,o,d,_,n,h),e.context=xh(null),r=e.current,s=Te(),o=Ft(r),d=xt(s,o),d.callback=t!=null?t:null,Ot(r,d,o),e.current.lanes=o,Is(e,o,s),He(e,s),e}function nn(e,t,r,s){var o=t.current,d=Te(),_=Ft(o);return r=xh(r),t.context===null?t.context=r:t.pendingContext=r,t=xt(d,_),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ot(o,t,_),e!==null&&(lt(e,o,_,d),fi(e,o,_)),_}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ja(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ol(e,t){Ja(e,t),(e=e.alternate)&&Ja(e,t)}function gp(){return null}var wh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hl(e){this._internalRoot=e}on.prototype.render=Hl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));nn(e,t,null,null)};on.prototype.unmount=Hl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){nn(null,e,null,null)}),t[wt]=null}};function on(e){this._internalRoot=e}on.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&t!==0&&t<Rt[r].priority;r++);Rt.splice(r,0,e),r===0&&tu(e)}};function Fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ln(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Za(){}function yp(e,t,r,s,o){if(o){if(typeof s=="function"){var d=s;s=function(){var p=$i(_);d.call(p)}}var _=Sh(t,s,e,0,null,!1,!1,"",Za);return e._reactRootContainer=_,e[wt]=_.current,ks(e.nodeType===8?e.parentNode:e),lr(),_}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var n=s;s=function(){var p=$i(h);n.call(p)}}var h=Il(e,0,!1,null,null,!1,!1,"",Za);return e._reactRootContainer=h,e[wt]=h.current,ks(e.nodeType===8?e.parentNode:e),lr(function(){nn(t,h,r,s)}),h}function an(e,t,r,s,o){var d=r._reactRootContainer;if(d){var _=d;if(typeof o=="function"){var n=o;o=function(){var h=$i(_);n.call(h)}}nn(t,_,e,o)}else _=yp(r,t,e,o,s);return $i(_)}Yc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=is(t.pendingLanes);r!==0&&(ol(t,r|1),He(t,_e()),!(te&6)&&(Br=_e()+500,Xt()))}break;case 13:lr(function(){var s=Ct(e,1);if(s!==null){var o=Te();lt(s,e,1,o)}}),Ol(e,1)}};ll=function(e){if(e.tag===13){var t=Ct(e,134217728);if(t!==null){var r=Te();lt(t,e,134217728,r)}Ol(e,134217728)}};Jc=function(e){if(e.tag===13){var t=Ft(e),r=Ct(e,t);if(r!==null){var s=Te();lt(r,e,t,s)}Ol(e,t)}};Zc=function(){return ne};eu=function(e,t){var r=ne;try{return ne=e,t()}finally{ne=r}};lo=function(e,t,r){switch(t){case"input":if(eo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var o=Yi(s);if(!o)throw Error(V(90));Rc(s),eo(s,o)}}}break;case"textarea":Ac(e,r);break;case"select":t=r.value,t!=null&&kr(e,!!r.multiple,t,!1)}};Hc=Ml;Fc=lr;var xp={usingClientEntryPoint:!1,Events:[Hs,gr,Yi,Ic,Oc,Ml]},ts={findFiberByHostInstance:Jt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sp={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$c(e),e===null?null:e.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||gp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!li.isDisabled&&li.supportsFiber)try{qi=li.inject(Sp),pt=li}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xp;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fl(t))throw Error(V(200));return vp(e,t,null,r)};Ve.createRoot=function(e,t){if(!Fl(e))throw Error(V(299));var r=!1,s="",o=wh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Il(e,1,!1,null,null,r,!1,s,o),e[wt]=t.current,ks(e.nodeType===8?e.parentNode:e),new Hl(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=$c(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return lr(e)};Ve.hydrate=function(e,t,r){if(!ln(t))throw Error(V(200));return an(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!Fl(e))throw Error(V(405));var s=r!=null&&r.hydratedSources||null,o=!1,d="",_=wh;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),t=Sh(t,null,e,1,r!=null?r:null,o,!1,d,_),e[wt]=t.current,ks(e),s)for(e=0;e<s.length;e++)r=s[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new on(t)};Ve.render=function(e,t,r){if(!ln(t))throw Error(V(200));return an(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!ln(e))throw Error(V(40));return e._reactRootContainer?(lr(function(){an(null,null,e,!1,function(){e._reactRootContainer=null,e[wt]=null})}),!0):!1};Ve.unstable_batchedUpdates=Ml;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ln(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return an(e,t,r,!1,s)};Ve.version="18.3.1-next-f1338f8080-20240426";function Ch(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ch)}catch(e){console.error(e)}}Ch(),Cc.exports=Ve;var wp=Cc.exports,ec=wp;qn.createRoot=ec.createRoot,qn.hydrateRoot=ec.hydrateRoot;/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bh=(...e)=>e.filter((t,r,s)=>!!t&&s.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:d,iconNode:_,...n},h)=>U.createElement("svg",{ref:h,...bp,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:bh("lucide",o),...n},[..._.map(([p,x])=>U.createElement(p,x)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const r=U.forwardRef(({className:s,...o},d)=>U.createElement(kp,{ref:d,iconNode:t,className:bh(`lucide-${Cp(e)}`,s),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Y("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Y("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Y("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Y("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Y("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Y("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Y("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Y("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Y("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Y("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Y("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Y("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Y("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Y("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Y("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Y("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Y("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Y("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=Y("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Y("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Y("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Y("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Y("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Y("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Y("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Y("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Y("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Y("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Y("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Kp={},sc=e=>{let t;const r=new Set,s=(x,f)=>{const v=typeof x=="function"?x(t):x;if(!Object.is(v,t)){const w=t;t=(f!=null?f:typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(C=>C(t,w))}},o=()=>t,h={setState:s,getState:o,getInitialState:()=>p,subscribe:x=>(r.add(x),()=>r.delete(x)),destroy:()=>{(Kp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},p=t=e(s,o,h);return h},Vp=e=>e?sc(e):sc;var Ph={exports:{}},zh={},Bh={exports:{}},Ih={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=U;function qp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gp=typeof Object.is=="function"?Object.is:qp,Xp=Hr.useState,Qp=Hr.useEffect,Yp=Hr.useLayoutEffect,Jp=Hr.useDebugValue;function Zp(e,t){var r=t(),s=Xp({inst:{value:r,getSnapshot:t}}),o=s[0].inst,d=s[1];return Yp(function(){o.value=r,o.getSnapshot=t,Kn(o)&&d({inst:o})},[e,r,t]),Qp(function(){return Kn(o)&&d({inst:o}),e(function(){Kn(o)&&d({inst:o})})},[e]),Jp(r),r}function Kn(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gp(e,r)}catch{return!0}}function e0(e,t){return t()}var t0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?e0:Zp;Ih.useSyncExternalStore=Hr.useSyncExternalStore!==void 0?Hr.useSyncExternalStore:t0;Bh.exports=Ih;var r0=Bh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn=U,s0=r0;function i0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var n0=typeof Object.is=="function"?Object.is:i0,o0=s0.useSyncExternalStore,l0=fn.useRef,a0=fn.useEffect,c0=fn.useMemo,u0=fn.useDebugValue;zh.useSyncExternalStoreWithSelector=function(e,t,r,s,o){var d=l0(null);if(d.current===null){var _={hasValue:!1,value:null};d.current=_}else _=d.current;d=c0(function(){function h(w){if(!p){if(p=!0,x=w,w=s(w),o!==void 0&&_.hasValue){var C=_.value;if(o(C,w))return f=C}return f=w}if(C=f,n0(x,w))return C;var S=s(w);return o!==void 0&&o(C,S)?(x=w,C):(x=w,f=S)}var p=!1,x,f,v=r===void 0?null:r;return[function(){return h(t())},v===null?void 0:function(){return h(v())}]},[t,r,s,o]);var n=o0(e,d[0],d[1]);return a0(function(){_.hasValue=!0,_.value=n},[n]),u0(n),n};Ph.exports=zh;var h0=Ph.exports;const d0=uc(h0),Oh={},{useDebugValue:f0}=Sc,{useSyncExternalStoreWithSelector:p0}=d0;let ic=!1;const m0=e=>e;function _0(e,t=m0,r){(Oh?"production":void 0)!=="production"&&r&&!ic&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ic=!0);const s=p0(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return f0(s),s}const v0=e=>{(Oh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Vp(e):e,r=(s,o)=>_0(t,s,o);return Object.assign(r,t),r},g0=e=>v0,y0={};function Hh(e,t){let r;try{r=e()}catch{return}return{getItem:o=>{var d;const _=h=>h===null?null:JSON.parse(h,void 0),n=(d=r.getItem(o))!=null?d:null;return n instanceof Promise?n.then(_):_(n)},setItem:(o,d)=>r.setItem(o,JSON.stringify(d,void 0)),removeItem:o=>r.removeItem(o)}}const zs=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return zs(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return zs(s)(r)}}}},x0=(e,t)=>(r,s,o)=>{let d={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:u=>u,version:0,merge:(u,c)=>({...c,...u}),...t},_=!1;const n=new Set,h=new Set;let p;try{p=d.getStorage()}catch{}if(!p)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),r(...u)},s,o);const x=zs(d.serialize),f=()=>{const u=d.partialize({...s()});let c;const i=x({state:u,version:d.version}).then(a=>p.setItem(d.name,a)).catch(a=>{c=a});if(c)throw c;return i},v=o.setState;o.setState=(u,c)=>{v(u,c),f()};const w=e((...u)=>{r(...u),f()},s,o);let C;const S=()=>{var u;if(!p)return;_=!1,n.forEach(i=>i(s()));const c=((u=d.onRehydrateStorage)==null?void 0:u.call(d,s()))||void 0;return zs(p.getItem.bind(p))(d.name).then(i=>{if(i)return d.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==d.version){if(d.migrate)return d.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var a;return C=d.merge(i,(a=s())!=null?a:w),r(C,!0),f()}).then(()=>{c==null||c(C,void 0),_=!0,h.forEach(i=>i(C))}).catch(i=>{c==null||c(void 0,i)})};return o.persist={setOptions:u=>{d={...d,...u},u.getStorage&&(p=u.getStorage())},clearStorage:()=>{p==null||p.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>S(),hasHydrated:()=>_,onHydrate:u=>(n.add(u),()=>{n.delete(u)}),onFinishHydration:u=>(h.add(u),()=>{h.delete(u)})},S(),C||w},S0=(e,t)=>(r,s,o)=>{let d={storage:Hh(()=>localStorage),partialize:S=>S,version:0,merge:(S,u)=>({...u,...S}),...t},_=!1;const n=new Set,h=new Set;let p=d.storage;if(!p)return e((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),r(...S)},s,o);const x=()=>{const S=d.partialize({...s()});return p.setItem(d.name,{state:S,version:d.version})},f=o.setState;o.setState=(S,u)=>{f(S,u),x()};const v=e((...S)=>{r(...S),x()},s,o);o.getInitialState=()=>v;let w;const C=()=>{var S,u;if(!p)return;_=!1,n.forEach(i=>{var a;return i((a=s())!=null?a:v)});const c=((u=d.onRehydrateStorage)==null?void 0:u.call(d,(S=s())!=null?S:v))||void 0;return zs(p.getItem.bind(p))(d.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==d.version){if(d.migrate)return[!0,d.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var a;const[m,g]=i;if(w=d.merge(g,(a=s())!=null?a:v),r(w,!0),m)return x()}).then(()=>{c==null||c(w,void 0),w=s(),_=!0,h.forEach(i=>i(w))}).catch(i=>{c==null||c(void 0,i)})};return o.persist={setOptions:S=>{d={...d,...S},S.storage&&(p=S.storage)},clearStorage:()=>{p==null||p.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>C(),hasHydrated:()=>_,onHydrate:S=>(n.add(S),()=>{n.delete(S)}),onFinishHydration:S=>(h.add(S),()=>{h.delete(S)})},d.skipHydration||C(),w||v},w0=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((y0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),x0(e,t)):S0(e,t),C0=w0;function b0(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}async function re(e,t={},r){return window.__TAURI_INTERNALS__.invoke(e,t,r)}const nc={theme:"dark",fontSize:13,fontFamily:"JetBrains Mono",sidebarVisible:!0,terminalVisible:!0,autoSave:!0,autoSaveInterval:30,enableNotifications:!0,soundEffects:!1,telemetryEnabled:!1,preferredModel:"kimi-k2.5",sshSettings:{host:"89.167.14.222",port:22,username:"root",password:"",privateKey:"",publicKey:""},editorSettings:{tabSize:2,useSpaces:!0,wordWrap:!0,minimap:!1,lineNumbers:!0}},oe=g0()(C0((e,t)=>({backend:{status:"disconnected",error:null},isConnected:!1,nexusStatus:null,currentProjectPath:null,currentProject:null,ui:{isChatLoading:!1,isSwarmLoading:!1,isMemoryLoading:!1,isLoading:!1},agents:[],swarmTasks:[],currentSwarmTask:null,messages:[],chatHistory:[],isStreaming:!1,memoryStats:null,watcherStatus:null,terminalHistory:[],settings:nc,toasts:[],logs:[],availableProviders:[],availableModels:[],activeProvider:"",activeModel:"",addToast:r=>{const s=crypto.randomUUID();e(o=>({toasts:[...o.toasts,{...r,id:s}]}))},removeToast:r=>{e(s=>({toasts:s.toasts.filter(o=>o.id!==r)}))},addLog:(r,s,o,d)=>{e(_=>({logs:[..._.logs.slice(-999),{timestamp:new Date().toISOString(),level:r,source:s,message:o,details:d}]}))},clearLogs:()=>e({logs:[]}),setBackendStatus:(r,s=null)=>e(o=>({backend:{...o.backend,status:r,error:s},isConnected:r==="connected"})),setNexusStatus:r=>e({nexusStatus:r}),setCurrentProject:r=>e({currentProjectPath:r,currentProject:r?{name:r.split("/").pop()||"Unknown",path:r,fileTree:[],recentFiles:[],gitStatus:null}:null}),setProjectFromPath:r=>t().setCurrentProject(r),setAgents:r=>e({agents:r}),setSwarmTasks:r=>e({swarmTasks:r}),addMessage:r=>e(s=>({messages:[...s.messages,r],chatHistory:[...s.chatHistory,r]})),addChatMessage:r=>t().addMessage(r),updateChatStream:(r,s)=>e(o=>({isStreaming:!0,messages:o.messages.map(d=>d.id===r?{...d,content:d.content+s}:d)})),completeChatStream:r=>e(s=>({isStreaming:!1,messages:s.messages.map(o=>o.id===r?{...o,isStreaming:!1}:o)})),clearChat:()=>e({messages:[],chatHistory:[]}),clearChatHistory:()=>t().clearChat(),setMemoryStats:r=>e({memoryStats:r}),setWatcherStatus:r=>e({watcherStatus:r}),setSettings:r=>e(s=>({settings:{...s.settings,...r}})),updateSetting:(r,s)=>e(o=>({settings:{...o.settings,[r]:s}})),resetSettings:()=>e({settings:nc}),addTerminalOutput:r=>e(s=>({terminalHistory:[...s.terminalHistory,r]})),initializeTauriListeners:()=>{},loadChatHistory:async()=>{try{const s=(await re("get_chat_history")).map(o=>{try{const d=JSON.parse(o);return{id:d.id,role:d.role,content:d.content,timestamp:d.timestamp,isStreaming:d.is_streaming||!1}}catch{return null}}).filter(Boolean);e({chatHistory:s})}catch(r){console.error("Failed to load chat history:",r)}},loadSwarmTasks:async()=>{try{const s=(await re("get_all_swarms")).map(o=>({id:o,description:"",status:"completed",subtasks:[],progress:100,createdAt:new Date().toISOString()}));e({swarmTasks:s})}catch(r){console.error("Failed to load swarm tasks:",r)}},loadMemoryStats:async()=>{var r,s,o,d,_;try{e(p=>({ui:{...p.ui,isMemoryLoading:!0}}));const n=await re("get_memory_stats"),h=JSON.parse(n);if(h.success&&h.data){const p=h.data;e({memoryStats:{totalMemories:(r=p.total_memories)!=null?r:0,eventsCount:(s=p.events_count)!=null?s:0,graphEntities:(o=p.graph_entities)!=null?o:0,vectorDocuments:(d=p.vector_documents)!=null?d:0,sizeBytes:(_=p.size_bytes)!=null?_:0,lastUpdated:new Date().toISOString()}})}}catch(n){console.error("Failed to load memory stats:",n)}finally{e(n=>({ui:{...n.ui,isMemoryLoading:!1}}))}},loadWatcherStatus:async()=>{var r,s,o,d,_,n,h;try{const p=await re("get_watcher_status"),x=JSON.parse(p);if(x.success&&x.data){const f=x.data;e({watcherStatus:{isRunning:(r=f.is_running)!=null?r:!1,watchedProjects:(s=f.watched_projects)!=null?s:0,activeLogSources:(o=f.active_log_sources)!=null?o:0,errorsDetected:(d=f.errors_detected)!=null?d:0,errorsFixed:(_=f.errors_fixed)!=null?_:0,healingSessionsTotal:(n=f.healing_sessions_total)!=null?n:0,healingSessionsActive:(h=f.healing_sessions_active)!=null?h:0,startTime:f.start_time}})}}catch(p){console.error("Failed to load watcher status:",p)}},checkNexusStatus:async()=>{try{e(s=>({backend:{...s.backend,status:s.backend.status==="connected"?"connected":"connecting"}}));const r=await re("get_nexus_status");e({nexusStatus:r,isConnected:r.nexusInstalled||r.version!=="Unknown",backend:{status:r.nexusInstalled||r.version!=="Unknown"?"connected":"disconnected",error:null}})}catch(r){const s=String(r);e({isConnected:!1,backend:{status:"error",error:s}})}},startSwarmTask:async r=>{try{e(_=>({ui:{..._.ui,isSwarmLoading:!0}}));const s=await re("start_swarm_task",{task:r}),d={id:JSON.parse(s).task_id||crypto.randomUUID(),description:r,status:"completed",subtasks:[],progress:100,createdAt:new Date().toISOString()};e(_=>({swarmTasks:[..._.swarmTasks,d]}))}catch(s){console.error("Failed to start swarm task:",s)}finally{e(s=>({ui:{...s.ui,isSwarmLoading:!1}}))}},executeCommand:async(r,s)=>{try{return await re("execute_terminal_command",{command:r,dir:s})}catch(o){const d=String(o);throw console.error("Command execution failed:",d),o}},initMemory:async()=>{try{await re("memory_init")}catch(r){console.error("Failed to init memory:",r)}},consolidateMemory:async()=>{try{await re("memory_consolidate")}catch(r){console.error("Failed to consolidate memory:",r)}},toggleNode:r=>{e(s=>{const o=s.currentProject;if(!(o!=null&&o.fileTree))return{};const d=_=>_.map(n=>n.id===r?{...n,isExpanded:!n.isExpanded}:n.children?{...n,children:d(n.children)}:n);return{currentProject:{...o,fileTree:d(o.fileTree)}}})},setProvider:async r=>{try{await re("set_provider",{provider:r}),e({activeProvider:r}),await t().loadAvailableModels(r)}catch(s){console.error("Failed to set provider:",s),t().addToast({type:"error",title:"Failed to set provider",message:String(s)})}},setModel:async r=>{try{await re("set_model",{model:r}),e({activeModel:r})}catch(s){console.error("Failed to set model:",s),t().addToast({type:"error",title:"Failed to set model",message:String(s)})}},setApiKey:async(r,s)=>{try{await re("set_api_key",{provider:r,key:s}),t().addToast({type:"success",title:"API key saved",message:`Key stored for ${r}`})}catch(o){console.error("Failed to set API key:",o),t().addToast({type:"error",title:"Failed to save API key",message:String(o)})}},loadAvailableModels:async r=>{try{const s=await re("list_models",{provider:r});e({availableModels:s})}catch(s){console.error("Failed to load models:",s),e({availableModels:[]})}},testProviderConnection:async r=>{try{const s=await re("test_provider_connection",{provider:r});return t().addToast({type:"success",title:"Connection OK",message:s}),s}catch(s){const o=String(s);throw t().addToast({type:"error",title:"Connection failed",message:o}),s}},loadProviders:async()=>{try{const r=await re("get_config"),s=JSON.parse(r);if(s.success&&s.data){const o=s.data;o.providers&&Array.isArray(o.providers)&&e({availableProviders:o.providers.map(d=>d.name||d)}),o.active_provider&&e({activeProvider:o.active_provider}),o.active_model&&e({activeModel:o.active_model})}}catch(r){console.error("Failed to load providers:",r)}},scanCurrentProject:async r=>{try{const s=r||t().currentProjectPath||".",o=await re("scan_project",{path:s}),d=JSON.parse(o);d.success&&d.data&&console.log("Project scanned:",d.data)}catch(s){console.error("Failed to scan project:",s)}}}),{name:"nexus-storage",storage:Hh(()=>localStorage),partialize:e=>({settings:e.settings})})),k0=()=>oe(e=>e.nexusStatus),E0=()=>oe(e=>e.watcherStatus),j0=()=>oe(e=>e.currentProject),N0=()=>oe(e=>e.agents),L0=()=>oe(e=>e.swarmTasks),$l=()=>oe(e=>e.isConnected),D0=()=>oe(e=>e.memoryStats),R0=()=>oe(e=>e.currentProject),T0=()=>oe(e=>e.terminalHistory),oc={architect:{icon:l.jsx(Ip,{className:"w-4 h-4"}),label:"Architect",color:"text-purple-400"},frontend:{icon:l.jsx(cn,{className:"w-4 h-4"}),label:"Frontend",color:"text-blue-400"},backend:{icon:l.jsx(Ah,{className:"w-4 h-4"}),label:"Backend",color:"text-green-400"},qa:{icon:l.jsx(Wl,{className:"w-4 h-4"}),label:"QA",color:"text-orange-400"},devops:{icon:l.jsx(hn,{className:"w-4 h-4"}),label:"DevOps",color:"text-cyan-400"},security:{icon:l.jsx(Vt,{className:"w-4 h-4"}),label:"Security",color:"text-red-400"}},A0=({status:e})=>{switch(e){case"working":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Or,{className:"w-4 h-4 text-blue-400 animate-spin"}),l.jsx("span",{className:"text-xs text-blue-400 font-medium",children:"Working"})]});case"completed":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vt,{className:"w-4 h-4 text-green-400"}),l.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Completed"})]});case"error":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Dp,{className:"w-4 h-4 text-red-400"}),l.jsx("span",{className:"text-xs text-red-400 font-medium",children:"Error"})]});case"paused":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fo,{className:"w-4 h-4 text-yellow-400"}),l.jsx("span",{className:"text-xs text-yellow-400 font-medium",children:"Paused"})]});default:return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fo,{className:"w-4 h-4 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-500 font-medium",children:"Idle"})]})}},M0=({agent:e})=>{const t=oc[e.type]||oc.backend,r=e.status==="working";return l.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-300 ${r?"bg-zinc-800/80 border-blue-500/30 shadow-lg shadow-blue-500/5":"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`p-1.5 rounded-md bg-zinc-800 ${t.color}`,children:t.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-zinc-200",children:e.name}),l.jsx("div",{className:"text-xs text-zinc-500",children:t.label})]})]}),l.jsx(A0,{status:e.status})]}),e.currentTask&&l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(hn,{className:"w-3 h-3 text-zinc-500 mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-xs text-zinc-400 line-clamp-2",children:e.currentTask})]}),r&&e.progress!==void 0&&l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-500",children:"Progress"}),l.jsxs("span",{className:"text-blue-400",children:[e.progress,"%"]})]}),l.jsx("div",{className:"h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all duration-500",style:{width:`${e.progress}%`}})})]})]}),e.lastCompletedTask&&e.status==="completed"&&l.jsx("div",{className:"mt-2 pt-2 border-t border-zinc-800",children:l.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500",children:[l.jsx(Vt,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"line-clamp-1",children:e.lastCompletedTask})]})})]})},P0=({task:e})=>{const t=e.status==="in_progress";return l.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-300 ${t?"bg-zinc-800/80 border-blue-500/30 shadow-lg shadow-blue-500/5":"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`p-1.5 rounded-md bg-zinc-800 ${t?"text-blue-400":"text-green-400"}`,children:t?l.jsx(Or,{className:"w-4 h-4 animate-spin"}):l.jsx(Vt,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-zinc-200 line-clamp-1",children:e.description}),l.jsxs("div",{className:"text-xs text-zinc-500",children:[e.subtasks.length," subtasks"]})]})]}),l.jsxs("span",{className:"text-xs text-zinc-500",children:[e.progress,"%"]})]}),l.jsx("div",{className:"h-1.5 bg-zinc-800 rounded-full overflow-hidden mt-2",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${t?"bg-gradient-to-r from-blue-500 to-blue-400":"bg-green-500"}`,style:{width:`${e.progress}%`}})}),e.subtasks.length>0&&l.jsxs("div",{className:"mt-2 space-y-1",children:[e.subtasks.slice(0,3).map(r=>l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.status==="completed"?l.jsx(Vt,{className:"w-3 h-3 text-green-500"}):r.status==="in_progress"?l.jsx(Or,{className:"w-3 h-3 text-blue-400 animate-spin"}):l.jsx(Fo,{className:"w-3 h-3 text-zinc-600"}),l.jsx("span",{className:r.status==="completed"?"text-zinc-500":"text-zinc-400",children:r.description})]},r.id)),e.subtasks.length>3&&l.jsxs("p",{className:"text-xs text-zinc-600 pl-5",children:["+",e.subtasks.length-3," more"]})]})]})},z0=()=>l.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"})]}),B0=({onToggle:e})=>{const[t,r]=U.useState(!1),[s,o]=U.useState(""),[d,_]=U.useState("agents"),n=N0(),h=L0(),{startSwarmTask:p,currentSwarmTask:x,ui:f}=oe(),v=$l(),w=n.filter(i=>i.status==="working"),C=n.filter(i=>i.lastCompletedTask).length,S=n.filter(i=>i.status==="error").length,u=h.filter(i=>i.status==="in_progress"),c=U.useCallback(async()=>{if(s.trim())try{await p(s),o(""),r(!1)}catch(i){console.error("Failed to start swarm task:",i)}},[s,p]);return l.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 border-r border-zinc-800",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-lg border border-blue-500/30",children:l.jsx(Ir,{className:"w-5 h-5 text-blue-400"})}),w.length>0&&l.jsx("div",{className:"absolute -top-0.5 -right-0.5",children:l.jsx(z0,{})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-zinc-100",children:"Swarm"}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsxs("span",{className:"text-zinc-500",children:[w.length," active"]}),S>0&&l.jsxs("span",{className:"text-red-400",children:[" ",S," error"]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[v&&l.jsx("button",{onClick:()=>r(!0),className:"p-1.5 bg-blue-500/20 hover:bg-blue-500/30 rounded-md transition-colors",title:"Start New Swarm Task",children:l.jsx(Th,{className:"w-4 h-4 text-blue-400"})}),l.jsx("button",{onClick:e,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors group",title:"Hide Panel",children:l.jsx(Ep,{className:"w-4 h-4 text-zinc-500 group-hover:text-zinc-300"})})]})]}),l.jsx("div",{className:"flex border-b border-zinc-800",children:[{id:"agents",label:"Agents"},{id:"tasks",label:`Tasks (${h.length})`}].map(({id:i,label:a})=>l.jsx("button",{onClick:()=>_(i),className:`flex-1 py-2 text-xs font-medium transition-colors border-b-2 ${d===i?"text-zinc-200 border-blue-500":"text-zinc-500 border-transparent hover:text-zinc-300"}`,children:a},i))}),x&&l.jsxs("div",{className:"px-4 py-3 bg-zinc-900/50 border-b border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Ul,{className:"w-3.5 h-3.5 text-yellow-400"}),l.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wide",children:"Current Task"})]}),l.jsx("p",{className:"text-sm text-zinc-200 font-medium leading-relaxed line-clamp-2",children:x.description}),x.progress>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"h-1 bg-zinc-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${x.progress}%`}})}),l.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[l.jsxs("span",{className:"text-zinc-500",children:[x.progress,"% complete"]}),l.jsx("span",{className:"text-blue-400",children:x.status})]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 p-3 border-b border-zinc-800",children:[l.jsxs("div",{className:"text-center p-2 bg-zinc-900/50 rounded-md",children:[l.jsx("div",{className:"text-lg font-semibold text-blue-400",children:w.length}),l.jsx("div",{className:"text-xs text-zinc-500",children:"Active"})]}),l.jsxs("div",{className:"text-center p-2 bg-zinc-900/50 rounded-md",children:[l.jsx("div",{className:"text-lg font-semibold text-green-400",children:C}),l.jsx("div",{className:"text-xs text-zinc-500",children:"Done"})]}),l.jsxs("div",{className:"text-center p-2 bg-zinc-900/50 rounded-md",children:[l.jsx("div",{className:"text-lg font-semibold text-zinc-400",children:n.length}),l.jsx("div",{className:"text-xs text-zinc-500",children:"Total"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d==="agents"&&l.jsxs("div",{className:"p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wide",children:"Agents"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),l.jsx("span",{className:"text-xs text-zinc-500",children:"Online"})]})]}),n.length===0?l.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[l.jsx(Ir,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No agents active"}),l.jsx("p",{className:"text-xs mt-1 opacity-70",children:"Start a task to see agents"})]}):n.map(i=>l.jsx(M0,{agent:i},i.id)),C>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Ws,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wide",children:"Recent"})]}),l.jsx("div",{className:"space-y-2",children:n.filter(i=>i.lastCompletedTask).slice(0,3).map(i=>l.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[l.jsx(Vt,{className:"w-3 h-3 text-green-500 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-zinc-400 line-clamp-1",children:i.lastCompletedTask}),l.jsx("p",{className:"text-zinc-600 mt-0.5",children:i.name})]}),i.completedAt&&l.jsx("span",{className:"text-zinc-600 flex-shrink-0",children:new Date(i.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},i.id))})]})]}),d==="tasks"&&l.jsx("div",{className:"p-3 space-y-2",children:h.length===0?l.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[l.jsx(Ms,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No swarm tasks yet"}),l.jsx("p",{className:"text-xs mt-1 opacity-70",children:"Start a task to begin"}),v&&l.jsx("button",{onClick:()=>r(!0),className:"mt-3 px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded text-xs transition-colors",children:"Start First Task"})]}):h.map(i=>l.jsx(P0,{task:i},i.id))})]}),l.jsx("div",{className:"p-3 border-t border-zinc-800 bg-zinc-900/30",children:l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex -space-x-1",children:[n.slice(0,3).map((i,a)=>l.jsx("div",{className:`w-5 h-5 rounded-full border-2 border-zinc-950 flex items-center justify-center ${i.status==="working"?"bg-blue-500/20":"bg-zinc-800"}`,style:{zIndex:3-a},children:l.jsx("span",{className:"text-[8px] font-medium text-zinc-400",children:i.name.charAt(0).toUpperCase()})},i.id)),n.length>3&&l.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-zinc-950 bg-zinc-800 flex items-center justify-center",children:l.jsxs("span",{className:"text-[8px] font-medium text-zinc-400",children:["+",n.length-3]})})]}),l.jsxs("span",{className:"text-zinc-500",children:[n.length," agent",n.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${u.length>0?"bg-blue-500 animate-pulse":"bg-zinc-600"}`}),l.jsx("span",{className:"text-zinc-400",children:u.length>0?"Swarm Active":"Idle"})]})]})}),t&&l.jsx("div",{className:"absolute inset-0 bg-zinc-950/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 w-96 shadow-2xl",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-200 mb-3",children:"Start New Swarm Task"}),l.jsx("textarea",{value:s,onChange:i=>o(i.target.value),placeholder:"Describe the task you want the swarm to execute...",className:"w-full h-24 bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-sm text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-blue-500 resize-none"}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{onClick:()=>{r(!1),o("")},className:"px-3 py-1.5 text-xs text-zinc-400 hover:text-zinc-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:c,disabled:!s.trim()||f.isLoading,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 disabled:bg-zinc-800 disabled:text-zinc-600 text-white rounded text-xs font-medium transition-colors flex items-center gap-1",children:f.isLoading?l.jsxs(l.Fragment,{children:[l.jsx(Or,{className:"w-3 h-3 animate-spin"}),"Starting..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ms,{className:"w-3 h-3"}),"Start Task"]})})]})]})})]})};var lc;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(lc||(lc={}));async function I0(e,t){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,t),await re("plugin:event|unlisten",{event:e,eventId:t})}async function Vn(e,t,r){var s;const o=(s=void 0)!==null&&s!==void 0?s:{kind:"Any"};return re("plugin:event|listen",{event:e,target:o,handler:b0(t)}).then(d=>async()=>I0(e,d))}const O0=({code:e,language:t="typescript"})=>{const[r,s]=U.useState(!1),o=()=>{navigator.clipboard.writeText(e),s(!0),setTimeout(()=>s(!1),2e3)};return l.jsxs("div",{className:"my-3 rounded-lg bg-zinc-950 border border-zinc-800 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-zinc-900 border-b border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Eh,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-500",children:t})]}),l.jsx("button",{onClick:o,className:"p-1 hover:bg-zinc-800 rounded transition-colors",title:"Copy code",children:r?l.jsx(Kt,{className:"w-3.5 h-3.5 text-green-400"}):l.jsx(jh,{className:"w-3.5 h-3.5 text-zinc-500"})})]}),l.jsx("pre",{className:"p-3 overflow-x-auto text-xs font-mono text-zinc-300 leading-relaxed",children:l.jsx("code",{children:e})})]})},H0=({content:e})=>{const t=e.split(`
`),r=[];let s=!1,o="",d="";return t.forEach((_,n)=>{var h;if(_.startsWith("```")){s?(r.push(l.jsx(O0,{code:o.trim(),language:d},`code-${n}`)),s=!1,o="",d=""):(s=!0,d=_.slice(3).trim()||"typescript");return}if(s){o+=_+`
`;return}_.startsWith("**")&&_.endsWith("**")?r.push(l.jsx("p",{className:"font-semibold text-zinc-200 my-2",children:_.slice(2,-2)},n)):_.startsWith("- ")?r.push(l.jsxs("li",{className:"ml-4 text-zinc-300 my-1 flex items-start gap-2",children:[l.jsx("span",{className:"text-zinc-500 mt-1",children:""}),l.jsx("span",{children:_.slice(2)})]},n)):_.match(/^\d+\./)?r.push(l.jsxs("li",{className:"ml-4 text-zinc-300 my-1 flex items-start gap-2",children:[l.jsxs("span",{className:"text-zinc-500 font-medium min-w-[1.5rem]",children:[(h=_.match(/^\d+/))==null?void 0:h[0],"."]}),l.jsx("span",{children:_.replace(/^\d+\.\s*/,"")})]},n)):_.trim()===""?r.push(l.jsx("div",{className:"h-2"},n)):r.push(l.jsx("p",{className:"text-zinc-300 leading-relaxed my-1",children:_},n))}),l.jsx("div",{className:"space-y-1",children:r})},F0=({message:e})=>{const t=e.role==="user",r=e.role==="system";return l.jsxs("div",{className:`flex gap-3 ${t?"flex-row-reverse":""}`,children:[l.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${t?"bg-blue-500/20":r?"bg-zinc-800":"bg-gradient-to-br from-purple-500/20 to-blue-500/20"}`,children:t?l.jsx(Up,{className:"w-4 h-4 text-blue-400"}):r?l.jsx(Ul,{className:"w-4 h-4 text-yellow-400"}):l.jsx(Ir,{className:"w-4 h-4 text-purple-400"})}),l.jsxs("div",{className:`flex-1 max-w-[80%] ${t?"items-end":"items-start"}`,children:[l.jsxs("div",{className:`rounded-2xl px-4 py-3 ${t?"bg-blue-500/10 border border-blue-500/20":"bg-zinc-900/50 border border-zinc-800"}`,children:[l.jsx(H0,{content:e.content}),e.isStreaming&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),l.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),l.jsx("span",{className:"text-xs text-zinc-500",children:"Thinking..."})]})]}),l.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-zinc-600 ${t?"justify-end":""}`,children:[l.jsx("span",{children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!t&&!r&&l.jsxs("button",{className:"hover:text-zinc-400 transition-colors flex items-center gap-1",children:[l.jsx(ar,{className:"w-3 h-3"}),l.jsx("span",{children:"Regenerate"})]})]})]})]})},W0=({text:e,onClick:t})=>l.jsx("button",{onClick:t,className:"px-3 py-2 bg-zinc-900/50 border border-zinc-800 rounded-lg text-xs text-zinc-400 hover:text-zinc-200 hover:border-zinc-700 hover:bg-zinc-800/50 transition-all text-left",children:e}),U0=()=>{const[e,t]=U.useState(""),[r,s]=U.useState([]),[o,d]=U.useState(!1),_=U.useRef(null),n=U.useRef(null),{messages:h,addMessage:p,updateChatStream:x,completeChatStream:f,nexusStatus:v,isConnected:w}=oe(),C=U.useCallback(()=>{var g;(g=_.current)==null||g.scrollIntoView({behavior:"smooth"})},[]);U.useEffect(()=>{C()},[h,C]);const S=async()=>{if(!e.trim()&&r.length===0||o)return;d(!0);const g=e;t(""),s([]);const b={id:crypto.randomUUID(),role:"user",content:g,timestamp:new Date().toISOString()};p(b);const k=crypto.randomUUID(),y={id:k,role:"assistant",content:"",timestamp:new Date().toISOString(),isStreaming:!0};p(y);try{const E=await Vn("nexus://chat-chunk",T=>{T.payload.messageId===k&&x(k,T.payload.chunk)}),D=await Vn("nexus://chat-done",T=>{T.payload.messageId===k&&(f(k),d(!1),E(),D(),M())}),M=await Vn("nexus://chat-error",T=>{T.payload.messageId===k&&x(k,`
Error: ${T.payload.error}`)});await re("send_chat_message_stream",{message:g,messageId:k})}catch(E){const D=String(E);console.error("Failed to send message:",E),x(k,`Error: ${D}`),f(k),d(!1)}},u=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),S())},c=()=>{const g=document.createElement("input");g.type="file",g.multiple=!0,g.onchange=b=>{const k=b.target.files;if(k){const y=Array.from(k).map(E=>({id:Math.random().toString(36).substr(2,9),name:E.name,type:E.type,size:E.size}));s([...r,...y])}},g.click()},i=g=>{s(r.filter(b=>b.id!==g))},a=["Refactor the API layer to use TypeScript strict mode","Add comprehensive error handling to the database module","Generate unit tests for the authentication service","Optimize the React component re-renders"],m=o||!w;return l.jsxs("div",{className:"h-full flex flex-col bg-zinc-950",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-lg border border-purple-500/30",children:l.jsx(Ul,{className:"w-4 h-4 text-purple-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-zinc-100",children:"Nexus Assistant"}),l.jsx("div",{className:"flex items-center gap-2",children:w?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),l.jsxs("span",{className:"text-xs text-zinc-500",children:[(v==null?void 0:v.provider)||"Nexus","  ",(v==null?void 0:v.model)||"AI Model"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500"}),l.jsx("span",{className:"text-xs text-yellow-500",children:"Offline Mode"})]})})]})]}),l.jsx("button",{className:"p-2 hover:bg-zinc-800 rounded-lg transition-colors",children:l.jsx(Tp,{className:"w-4 h-4 text-zinc-500"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-6",children:[h.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-8",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-2xl flex items-center justify-center mb-4 border border-purple-500/30",children:l.jsx(Ir,{className:"w-8 h-8 text-purple-400"})}),l.jsx("h3",{className:"text-lg font-semibold text-zinc-200 mb-2",children:"Welcome to Nexus"}),l.jsx("p",{className:"text-sm text-zinc-500 max-w-sm mb-6",children:"I can help you with coding tasks, refactoring, debugging, and more. What would you like to work on today?"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-md",children:a.map((g,b)=>l.jsx(W0,{text:g,onClick:()=>!m&&t(g)},b))})]}):h.map(g=>l.jsx(F0,{message:g},g.id)),l.jsx("div",{ref:_})]}),l.jsxs("div",{className:"border-t border-zinc-800 p-4",children:[r.length>0&&l.jsx("div",{className:"flex gap-2 mb-3 flex-wrap",children:r.map(g=>l.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 bg-zinc-900 border border-zinc-800 rounded-lg text-xs",children:[l.jsx(rc,{className:"w-3 h-3 text-zinc-500"}),l.jsx("span",{className:"text-zinc-400 max-w-[150px] truncate",children:g.name}),l.jsx("button",{onClick:()=>i(g.id),className:"p-0.5 hover:bg-zinc-800 rounded",children:l.jsx(Kt,{className:"w-3 h-3 text-zinc-500 rotate-45"})})]},g.id))}),l.jsxs("div",{className:"flex items-end gap-2 bg-zinc-900 border border-zinc-800 rounded-xl p-2 focus-within:border-zinc-700 focus-within:bg-zinc-800/50 transition-all",children:[l.jsx("button",{onClick:c,disabled:m,className:"p-2 hover:bg-zinc-800 rounded-lg transition-colors disabled:opacity-50",title:"Attach files",children:l.jsx(rc,{className:"w-4 h-4 text-zinc-500"})}),l.jsx("textarea",{ref:n,value:e,onChange:g=>t(g.target.value),onKeyDown:u,placeholder:w?"Type your message...":"Connect to Nexus CLI to chat...",disabled:m,className:"flex-1 bg-transparent border-none outline-none resize-none text-sm text-zinc-200 placeholder:text-zinc-600 py-2 max-h-32 min-h-[40px] disabled:opacity-50",rows:1,style:{height:"auto"},onInput:g=>{const b=g.target;b.style.height="auto",b.style.height=Math.min(b.scrollHeight,128)+"px"}}),l.jsx("button",{onClick:S,disabled:m||!e.trim()&&r.length===0,className:"p-2 bg-blue-500 hover:bg-blue-600 disabled:bg-zinc-800 disabled:text-zinc-600 text-white rounded-lg transition-all flex-shrink-0",children:o?l.jsx(Or,{className:"w-4 h-4 animate-spin"}):l.jsx(Op,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-zinc-600",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{className:"hover:text-zinc-400 transition-colors flex items-center gap-1",children:[l.jsx(Pp,{className:"w-3 h-3"}),l.jsx("span",{children:"Image"})]}),l.jsxs("button",{className:"hover:text-zinc-400 transition-colors flex items-center gap-1",children:[l.jsx(Eh,{className:"w-3 h-3"}),l.jsx("span",{children:"Code"})]})]}),l.jsx("span",{children:"Press Enter to send, Shift+Enter for new line"})]})]})]})},Fh=({type:e})=>{switch(e){case"typescript":return l.jsx("span",{className:"text-blue-400 text-xs font-medium",children:"TS"});case"javascript":return l.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:"JS"});case"css":return l.jsx("span",{className:"text-cyan-400 text-xs font-medium",children:"CSS"});case"json":return l.jsx("span",{className:"text-green-400 text-xs font-medium"});case"html":return l.jsx("span",{className:"text-orange-400 text-xs font-medium",children:"HTML"});case"rust":return l.jsx("span",{className:"text-orange-500 text-xs font-medium",children:"RS"});case"python":return l.jsx("span",{className:"text-blue-500 text-xs font-medium",children:"PY"});default:return l.jsx(Nh,{className:"w-4 h-4 text-zinc-500"})}},Wh=e=>{var s;const t=((s=e.split(".").pop())==null?void 0:s.toLowerCase())||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",css:"css",scss:"css",json:"json",html:"html",rs:"rust",py:"python",md:"markdown"}[t]||"file"},Uh=({node:e,depth:t=0,onToggle:r})=>{var _;const s=e.type==="directory"&&e.children&&e.children.length>0,o=(_=e.isExpanded)!=null?_:t<2,d=()=>{s&&r(e.path)};return l.jsxs("div",{children:[l.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 w-full py-1 px-2 hover:bg-zinc-800/50 rounded text-left transition-colors group",style:{paddingLeft:`${t*12+8}px`},children:[s?o?l.jsx(kh,{className:"w-3.5 h-3.5 text-zinc-500"}):l.jsx(jp,{className:"w-3.5 h-3.5 text-zinc-500"}):l.jsx("span",{className:"w-3.5"}),e.type==="directory"?l.jsx(xi,{className:"w-4 h-4 text-yellow-500/80"}):l.jsx(Fh,{type:Wh(e.name)}),l.jsx("span",{className:`text-xs ${e.type==="directory"?"text-zinc-300 font-medium":"text-zinc-400"} group-hover:text-zinc-200`,children:e.name}),e.size!==void 0&&e.size>0&&l.jsxs("span",{className:"text-[10px] text-zinc-600 ml-auto",children:[(e.size/1024).toFixed(1),"KB"]})]}),s&&o&&l.jsx("div",{children:e.children.map(n=>l.jsx(Uh,{node:n,depth:t+1,onToggle:r},n.id))})]})},$0=({status:e})=>{const t=e.modified.length>0||e.staged.length>0||e.untracked.length>0;return l.jsxs("div",{className:"p-3 bg-zinc-900/50 border border-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ki,{className:"w-4 h-4 text-purple-400"}),l.jsx("span",{className:"text-xs font-medium text-zinc-300",children:e.branch})]}),(e.ahead>0||e.behind>0)&&l.jsxs("span",{className:"text-[10px] text-zinc-500",children:[e.ahead>0&&`${e.ahead} `,e.behind>0&&`${e.behind}`]})]}),t?l.jsxs("div",{className:"space-y-1",children:[e.modified.length>0&&l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500"}),l.jsxs("span",{className:"text-zinc-400",children:[e.modified.length," modified"]})]}),e.staged.length>0&&l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),l.jsxs("span",{className:"text-zinc-400",children:[e.staged.length," staged"]})]}),e.untracked.length>0&&l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-zinc-500"}),l.jsxs("span",{className:"text-zinc-400",children:[e.untracked.length," untracked"]})]})]}):l.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500",children:[l.jsx(Vt,{className:"w-3 h-3"}),l.jsx("span",{children:"Working tree clean"})]})]})},K0=({onClose:e})=>{const[t,r]=U.useState("files"),[s,o]=U.useState(""),[d,_]=U.useState(!1),n=R0(),h=D0(),p=(n==null?void 0:n.fileTree)||[],x=(n==null?void 0:n.recentFiles)||[],f=n==null?void 0:n.gitStatus,{toggleNode:v,scanCurrentProject:w,setProjectFromPath:C,currentProject:S,loadMemoryStats:u,initMemory:c,consolidateMemory:i,ui:a}=oe(),m=$l(),g=U.useCallback(D=>{const M=Date.now()-new Date(D).getTime(),T=Math.floor(M/6e4);if(T<60)return`${T}m ago`;const A=Math.floor(T/60);return A<24?`${A}h ago`:`${Math.floor(A/24)}d ago`},[]),b=U.useCallback(D=>D<1024?`${D} B`:D<1024*1024?`${(D/1024).toFixed(1)} KB`:`${(D/(1024*1024)).toFixed(1)} MB`,[]),k=x.filter(D=>D.toLowerCase().includes(s.toLowerCase())),y=async()=>{t==="files"?await w():t==="memory"&&await u()},E=async D=>{await C(D),_(!1)};return l.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 border-l border-zinc-800",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-lg border border-green-500/30",children:l.jsx(Wo,{className:"w-4 h-4 text-green-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-zinc-100",children:"Context"}),l.jsx("span",{className:"text-xs text-zinc-500",children:(S==null?void 0:S.name)||"No project selected"})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:y,disabled:a.isLoading,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors disabled:opacity-50",title:"Refresh",children:l.jsx(ar,{className:`w-4 h-4 text-zinc-500 ${a.isLoading?"animate-spin":""}`})}),l.jsx("button",{onClick:e,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors group",children:l.jsx(Ps,{className:"w-4 h-4 text-zinc-500 group-hover:text-zinc-300"})})]})]}),l.jsx("div",{className:"px-4 py-2 border-b border-zinc-800",children:l.jsxs("button",{onClick:()=>_(!0),className:"w-full flex items-center justify-between px-3 py-2 bg-zinc-900/50 border border-zinc-800 rounded-lg hover:border-zinc-700 hover:bg-zinc-900 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xi,{className:"w-4 h-4 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-300 truncate max-w-[180px]",children:(S==null?void 0:S.path)||"Select a project..."})]}),l.jsx(Th,{className:"w-3.5 h-3.5 text-zinc-500"})]})}),l.jsx("div",{className:"flex border-b border-zinc-800",children:[{id:"files",icon:xi,label:"Files"},{id:"memory",icon:Uo,label:"Memory"},{id:"git",icon:Ki,label:"Git"}].map(({id:D,icon:M,label:T})=>l.jsxs("button",{onClick:()=>r(D),className:`flex items-center gap-2 px-4 py-2.5 text-xs font-medium transition-colors border-b-2 ${t===D?"text-zinc-200 border-blue-500 bg-zinc-900/50":"text-zinc-500 border-transparent hover:text-zinc-300 hover:bg-zinc-900/30"}`,children:[l.jsx(M,{className:"w-3.5 h-3.5"}),T]},D))}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[t==="files"&&l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-3 border-b border-zinc-800",children:l.jsxs("div",{className:"relative",children:[l.jsx(Wl,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-zinc-500"}),l.jsx("input",{type:"text",value:s,onChange:D=>o(D.target.value),placeholder:"Search files...",className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg pl-8 pr-3 py-1.5 text-xs text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-zinc-700"})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:p.length===0?l.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[l.jsx(xi,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No files scanned"}),l.jsx("p",{className:"text-xs mt-1 opacity-70",children:"Select a project to view files"})]}):p.map(D=>l.jsx(Uh,{node:D,onToggle:v},D.id))}),k.length>0&&l.jsxs("div",{className:"border-t border-zinc-800 p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-[10px] font-medium text-zinc-600 uppercase tracking-wider",children:"Recent"}),l.jsx(Ws,{className:"w-3 h-3 text-zinc-600"})]}),l.jsx("div",{className:"space-y-1",children:k.slice(0,5).map((D,M)=>l.jsxs("button",{className:"flex items-center gap-2 w-full p-1.5 hover:bg-zinc-800/50 rounded text-left transition-colors group",children:[l.jsx(Fh,{type:Wh(D)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs text-zinc-400 truncate group-hover:text-zinc-300",children:D.split("/").pop()}),l.jsx("p",{className:"text-[10px] text-zinc-600",children:D})]})]},M))})]})]}),t==="memory"&&l.jsx("div",{className:"h-full overflow-y-auto p-4 space-y-4",children:h?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-3 bg-zinc-900/50 border border-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(un,{className:"w-4 h-4 text-blue-400"}),l.jsx("span",{className:"text-xs font-medium text-zinc-300",children:"Memory Usage"})]}),l.jsx("span",{className:"text-xs text-zinc-500",children:b(h.sizeBytes)})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-semibold text-zinc-200",children:h.eventsCount}),l.jsx("p",{className:"text-[10px] text-zinc-500",children:"Events"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-semibold text-zinc-200",children:h.graphEntities}),l.jsx("p",{className:"text-[10px] text-zinc-500",children:"Entities"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-semibold text-zinc-200",children:h.vectorDocuments}),l.jsx("p",{className:"text-[10px] text-zinc-500",children:"Vectors"})]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("button",{onClick:u,className:"flex items-center gap-2 w-full p-2 hover:bg-zinc-900/50 rounded-lg text-left transition-colors group",children:[l.jsx(ar,{className:"w-3.5 h-3.5 text-zinc-500 group-hover:text-zinc-400"}),l.jsx("span",{className:"text-xs text-zinc-400 group-hover:text-zinc-300",children:"Refresh Stats"})]}),l.jsxs("button",{onClick:i,disabled:a.isLoading,className:"flex items-center gap-2 w-full p-2 hover:bg-zinc-900/50 rounded-lg text-left transition-colors group disabled:opacity-50",children:[l.jsx(Mh,{className:"w-3.5 h-3.5 text-zinc-500 group-hover:text-zinc-400"}),l.jsx("span",{className:"text-xs text-zinc-400 group-hover:text-zinc-300",children:"Consolidate Memory"})]})]}),l.jsxs("p",{className:"text-[10px] text-zinc-600 text-center",children:["Last updated: ",g(h.lastUpdated)]})]}):l.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[l.jsx(Uo,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Memory not initialized"}),m&&l.jsx("button",{onClick:c,disabled:a.isLoading,className:"mt-3 px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded text-xs transition-colors",children:"Initialize Memory"})]})}),t==="git"&&l.jsx("div",{className:"h-full overflow-y-auto p-4",children:f?l.jsx($0,{status:f}):l.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[l.jsx(Ki,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No git repository"}),l.jsx("p",{className:"text-xs mt-1 opacity-70",children:"Select a project with git initialized"})]})})]}),d&&l.jsx("div",{className:"absolute inset-0 bg-zinc-950/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 w-96 shadow-2xl",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-200 mb-3",children:"Select Project"}),l.jsx("input",{type:"text",placeholder:"Enter project path...",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-sm text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:border-blue-500 mb-3",onKeyDown:D=>{D.key==="Enter"&&E(D.currentTarget.value)}}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>_(!1),className:"px-3 py-1.5 text-xs text-zinc-400 hover:text-zinc-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:()=>{const D=document.querySelector("input");D!=null&&D.value&&E(D.value)},className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs font-medium transition-colors",children:"Open Project"})]})]})})]})};var $h={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={4567:function(_,n,h){var p=this&&this.__decorate||function(a,m,g,b){var k,y=arguments.length,E=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,m,g,b);else for(var D=a.length-1;D>=0;D--)(k=a[D])&&(E=(y<3?k(E):y>3?k(m,g,E):k(m,g))||E);return y>3&&E&&Object.defineProperty(m,g,E),E},x=this&&this.__param||function(a,m){return function(g,b){m(g,b,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const f=h(9042),v=h(6114),w=h(9924),C=h(844),S=h(5596),u=h(4725),c=h(3656);let i=n.AccessibilityManager=class extends C.Disposable{constructor(a,m){super(),this._terminal=a,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new w.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,c.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let m=0;m<a;m++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,m){this._liveRegionDebouncer.refresh(a,m,this._terminal.rows)}_renderRows(a,m){const g=this._terminal.buffer,b=g.lines.length.toString();for(let k=a;k<=m;k++){const y=g.translateBufferLineToString(g.ydisp+k,!0),E=(g.ydisp+k+1).toString(),D=this._rowElements[k];D&&(y.length===0?D.innerText="":D.textContent=y,D.setAttribute("aria-posinset",E),D.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,m){const g=a.target,b=this._rowElements[m===0?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==b)return;let k,y;if(m===0?(k=g,y=this._rowElements.pop(),this._rowContainer.removeChild(y)):(k=this._rowElements.shift(),y=g,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),y.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};n.AccessibilityManager=i=p([x(1,u.IRenderService)],i)},3614:(_,n)=>{function h(v){return v.replace(/\r?\n/g,"\r")}function p(v,w){return w?"\x1B[200~"+v+"\x1B[201~":v}function x(v,w,C,S){v=p(v=h(v),C.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(v,!0),w.value=""}function f(v,w,C){const S=C.getBoundingClientRect(),u=v.clientX-S.left-10,c=v.clientY-S.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${u}px`,w.style.top=`${c}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=h,n.bracketTextForPaste=p,n.copyHandler=function(v,w){v.clipboardData&&v.clipboardData.setData("text/plain",w.selectionText),v.preventDefault()},n.handlePasteEvent=function(v,w,C,S){v.stopPropagation(),v.clipboardData&&x(v.clipboardData.getData("text/plain"),w,C,S)},n.paste=x,n.moveTextAreaUnderMouseCursor=f,n.rightClickHandler=function(v,w,C,S,u){f(v,w,C),u&&S.rightClickSelect(v),w.value=S.selectionText,w.select()}},7239:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const p=h(1505);n.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(x,f,v){this._css.set(x,f,v)}getCss(x,f){return this._css.get(x,f)}setColor(x,f,v){this._color.set(x,f,v)}getColor(x,f){return this._color.get(x,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(h,p,x,f){h.addEventListener(p,x,f);let v=!1;return{dispose:()=>{v||(v=!0,h.removeEventListener(p,x,f))}}}},6465:function(_,n,h){var p=this&&this.__decorate||function(u,c,i,a){var m,g=arguments.length,b=g<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(u,c,i,a);else for(var k=u.length-1;k>=0;k--)(m=u[k])&&(b=(g<3?m(b):g>3?m(c,i,b):m(c,i))||b);return g>3&&b&&Object.defineProperty(c,i,b),b},x=this&&this.__param||function(u,c){return function(i,a){c(i,a,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const f=h(3656),v=h(8460),w=h(844),C=h(2585);let S=n.Linkifier2=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(u){super(),this._bufferService=u,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(u){return this._linkProviders.push(u),{dispose:()=>{const c=this._linkProviders.indexOf(u);c!==-1&&this._linkProviders.splice(c,1)}}}attachToDom(u,c,i){this._element=u,this._mouseService=c,this._renderService=i,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(u){if(this._lastMouseEvent=u,!this._element||!this._mouseService)return;const c=this._positionFromMouseEvent(u,this._element,this._mouseService);if(!c)return;this._isMouseOut=!1;const i=u.composedPath();for(let a=0;a<i.length;a++){const m=i[a];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&c.x===this._lastBufferCell.x&&c.y===this._lastBufferCell.y||(this._handleHover(c),this._lastBufferCell=c)}_handleHover(u){if(this._activeLine!==u.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(u,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))}_askForLink(u,c){var i,a;this._activeProviderReplies&&c||((i=this._activeProviderReplies)===null||i===void 0||i.forEach(g=>{g==null||g.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=u.y);let m=!1;for(const[g,b]of this._linkProviders.entries())c?!((a=this._activeProviderReplies)===null||a===void 0)&&a.get(g)&&(m=this._checkLinkProviderResult(g,u,m)):b.provideLinks(u.y,k=>{var y,E;if(this._isMouseOut)return;const D=k==null?void 0:k.map(M=>({link:M}));(y=this._activeProviderReplies)===null||y===void 0||y.set(g,D),m=this._checkLinkProviderResult(g,u,m),((E=this._activeProviderReplies)===null||E===void 0?void 0:E.size)===this._linkProviders.length&&this._removeIntersectingLinks(u.y,this._activeProviderReplies)})}_removeIntersectingLinks(u,c){const i=new Set;for(let a=0;a<c.size;a++){const m=c.get(a);if(m)for(let g=0;g<m.length;g++){const b=m[g],k=b.link.range.start.y<u?0:b.link.range.start.x,y=b.link.range.end.y>u?this._bufferService.cols:b.link.range.end.x;for(let E=k;E<=y;E++){if(i.has(E)){m.splice(g--,1);break}i.add(E)}}}}_checkLinkProviderResult(u,c,i){var a;if(!this._activeProviderReplies)return i;const m=this._activeProviderReplies.get(u);let g=!1;for(let b=0;b<u;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(g=!0);if(!g&&m){const b=m.find(k=>this._linkAtPosition(k.link,c));b&&(i=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(let b=0;b<this._activeProviderReplies.size;b++){const k=(a=this._activeProviderReplies.get(b))===null||a===void 0?void 0:a.find(y=>this._linkAtPosition(y.link,c));if(k){i=!0,this._handleNewLink(k);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(u){if(!this._element||!this._mouseService||!this._currentLink)return;const c=this._positionFromMouseEvent(u,this._element,this._mouseService);c&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,c)&&this._currentLink.link.activate(u,this._currentLink.link.text)}_clearCurrentLink(u,c){this._element&&this._currentLink&&this._lastMouseEvent&&(!u||!c||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=c)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(u){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(u.link,c)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:u.link.decorations===void 0||u.link.decorations.underline,pointerCursor:u.link.decorations===void 0||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:()=>{var i,a;return(a=(i=this._currentLink)===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a.decorations.pointerCursor},set:i=>{var a,m;!((a=this._currentLink)===null||a===void 0)&&a.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",i)))}},underline:{get:()=>{var i,a;return(a=(i=this._currentLink)===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a.decorations.underline},set:i=>{var a,m,g;!((a=this._currentLink)===null||a===void 0)&&a.state&&((g=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||g===void 0?void 0:g.decorations.underline)!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(u.link,i))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;const a=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(a,m),this._lastMouseEvent&&this._element)){const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(u,c,i){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),c.hover&&c.hover(i,c.text)}_fireUnderlineEvent(u,c){const i=u.range,a=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-a-1,i.end.x,i.end.y-a-1,void 0);(c?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(u,c,i){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),c.leave&&c.leave(i,c.text)}_linkAtPosition(u,c){const i=u.range.start.y*this._bufferService.cols+u.range.start.x,a=u.range.end.y*this._bufferService.cols+u.range.end.x,m=c.y*this._bufferService.cols+c.x;return i<=m&&m<=a}_positionFromMouseEvent(u,c,i){const a=i.getCoords(u,c,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(u,c,i,a,m){return{x1:u,y1:c,x2:i,y2:a,cols:this._bufferService.cols,fg:m}}};n.Linkifier2=S=p([x(0,C.IBufferService)],S)},9042:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,n,h){var p=this&&this.__decorate||function(S,u,c,i){var a,m=arguments.length,g=m<3?u:i===null?i=Object.getOwnPropertyDescriptor(u,c):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(S,u,c,i);else for(var b=S.length-1;b>=0;b--)(a=S[b])&&(g=(m<3?a(g):m>3?a(u,c,g):a(u,c))||g);return m>3&&g&&Object.defineProperty(u,c,g),g},x=this&&this.__param||function(S,u){return function(c,i){u(c,i,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const f=h(511),v=h(2585);let w=n.OscLinkProvider=class{constructor(S,u,c){this._bufferService=S,this._optionsService=u,this._oscLinkService=c}provideLinks(S,u){var c;const i=this._bufferService.buffer.lines.get(S-1);if(!i)return void u(void 0);const a=[],m=this._optionsService.rawOptions.linkHandler,g=new f.CellData,b=i.getTrimmedLength();let k=-1,y=-1,E=!1;for(let D=0;D<b;D++)if(y!==-1||i.hasContent(D)){if(i.loadCell(D,g),g.hasExtendedAttrs()&&g.extended.urlId){if(y===-1){y=D,k=g.extended.urlId;continue}E=g.extended.urlId!==k}else y!==-1&&(E=!0);if(E||y!==-1&&D===b-1){const M=(c=this._oscLinkService.getLinkData(k))===null||c===void 0?void 0:c.uri;if(M){const T={start:{x:y+1,y:S},end:{x:D+(E||D!==b-1?0:1),y:S}};let A=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{const B=new URL(M);["http:","https:"].includes(B.protocol)||(A=!0)}catch{A=!0}A||a.push({text:M,range:T,activate:(B,H)=>m?m.activate(B,H,T):C(0,H),hover:(B,H)=>{var $;return($=m==null?void 0:m.hover)===null||$===void 0?void 0:$.call(m,B,H,T)},leave:(B,H)=>{var $;return($=m==null?void 0:m.leave)===null||$===void 0?void 0:$.call(m,B,H,T)}})}E=!1,g.hasExtendedAttrs()&&g.extended.urlId?(y=D,k=g.extended.urlId):(y=-1,k=-1)}}u(a)}};function C(S,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}n.OscLinkProvider=w=p([x(0,v.IBufferService),x(1,v.IOptionsService),x(2,v.IOscLinkService)],w)},6193:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(h,p){this._parentWindow=h,this._renderCallback=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(h){return this._refreshCallbacks.push(h),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(h,p,x){this._rowCount=x,h=h!==void 0?h:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const h=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const h of this._refreshCallbacks)h(0);this._refreshCallbacks=[]}}},5596:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const p=h(844);class x extends p.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,p.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=x},3236:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const p=h(3614),x=h(3656),f=h(6465),v=h(9042),w=h(3730),C=h(1680),S=h(3107),u=h(5744),c=h(2950),i=h(1296),a=h(428),m=h(4269),g=h(5114),b=h(8934),k=h(3230),y=h(9312),E=h(4725),D=h(6731),M=h(8055),T=h(8969),A=h(8460),B=h(844),H=h(6114),$=h(8437),W=h(2584),j=h(7399),N=h(5941),R=h(9074),P=h(2585),I=h(5435),K=h(4567),q=typeof window<"u"?window.document:null;class Q extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(L={}){super(L),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((z,F)=>this.refresh(z,F))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(z=>this._reportWindowsOptions(z))),this.register(this._inputHandler.onColor(z=>this._handleColorEvent(z))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(z=>this._afterResize(z.cols,z.rows))),this.register((0,B.toDisposable)(()=>{var z,F;this._customKeyEventHandler=void 0,(F=(z=this.element)===null||z===void 0?void 0:z.parentNode)===null||F===void 0||F.removeChild(this.element)}))}_handleColorEvent(L){if(this._themeService)for(const z of L){let F,O="";switch(z.index){case 256:F="foreground",O="10";break;case 257:F="background",O="11";break;case 258:F="cursor",O="12";break;default:F="ansi",O="4;"+z.index}switch(z.type){case 0:const J=M.color.toColorRGB(F==="ansi"?this._themeService.colors.ansi[z.index]:this._themeService.colors[F]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${O};${(0,N.toRgbString)(J)}${W.C1_ESCAPED.ST}`);break;case 1:if(F==="ansi")this._themeService.modifyColors(G=>G.ansi[z.index]=M.rgba.toColor(...z.color));else{const G=F;this._themeService.modifyColors(ie=>ie[G]=M.rgba.toColor(...z.color))}break;case 2:this._themeService.restoreColor(z.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(L){L?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(L){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(L),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var L;return(L=this.textarea)===null||L===void 0?void 0:L.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const L=this.buffer.ybase+this.buffer.y,z=this.buffer.lines.get(L);if(!z)return;const F=Math.min(this.buffer.x,this.cols-1),O=this._renderService.dimensions.css.cell.height,J=z.getWidth(F),G=this._renderService.dimensions.css.cell.width*J,ie=this.buffer.y*this._renderService.dimensions.css.cell.height,we=F*this._renderService.dimensions.css.cell.width;this.textarea.style.left=we+"px",this.textarea.style.top=ie+"px",this.textarea.style.width=G+"px",this.textarea.style.height=O+"px",this.textarea.style.lineHeight=O+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,x.addDisposableDomListener)(this.element,"copy",z=>{this.hasSelection()&&(0,p.copyHandler)(z,this._selectionService)}));const L=z=>(0,p.handlePasteEvent)(z,this.textarea,this.coreService,this.optionsService);this.register((0,x.addDisposableDomListener)(this.textarea,"paste",L)),this.register((0,x.addDisposableDomListener)(this.element,"paste",L)),H.isFirefox?this.register((0,x.addDisposableDomListener)(this.element,"mousedown",z=>{z.button===2&&(0,p.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,x.addDisposableDomListener)(this.element,"contextmenu",z=>{(0,p.rightClickHandler)(z,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,x.addDisposableDomListener)(this.element,"auxclick",z=>{z.button===1&&(0,p.moveTextAreaUnderMouseCursor)(z,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,x.addDisposableDomListener)(this.textarea,"keyup",L=>this._keyUp(L),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keydown",L=>this._keyDown(L),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"keypress",L=>this._keyPress(L),!0)),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionupdate",L=>this._compositionHelper.compositionupdate(L))),this.register((0,x.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,x.addDisposableDomListener)(this.textarea,"input",L=>this._inputEvent(L),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(L){var z;if(!L)throw new Error("Terminal requires a parent element.");L.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=L.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),L.appendChild(this.element);const F=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,(z=this._document.defaultView)!==null&&z!==void 0?z:window),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,x.addDisposableDomListener)(this.textarea,"focus",O=>this._handleTextAreaFocus(O))),this.register((0,x.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(O=>this._onRender.fire(O))),this.onResize(O=>this._renderService.resize(O.cols,O.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(O=>this.scrollLines(O.amount,O.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(O=>this.scrollLines(O.amount,O.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(O=>this._renderService.handleSelectionChanged(O.start,O.end,O.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(O=>{this.textarea.value=O,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(O=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,x.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,x.addDisposableDomListener)(this.element,"mousedown",O=>this._selectionService.handleMouseDown(O))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",O=>this._handleScreenReaderModeOptionChange(O))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",O=>{!this._overviewRulerRenderer&&O&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const L=this,z=this.element;function F(G){const ie=L._mouseService.getMouseReportCoords(G,L.screenElement);if(!ie)return!1;let we,Pe;switch(G.overrideType||G.type){case"mousemove":Pe=32,G.buttons===void 0?(we=3,G.button!==void 0&&(we=G.button<3?G.button:3)):we=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":Pe=0,we=G.button<3?G.button:3;break;case"mousedown":Pe=1,we=G.button<3?G.button:3;break;case"wheel":if(L.viewport.getLinesScrolled(G)===0)return!1;Pe=G.deltaY<0?0:1,we=4;break;default:return!1}return!(Pe===void 0||we===void 0||we>4)&&L.coreMouseService.triggerMouseEvent({col:ie.col,row:ie.row,x:ie.x,y:ie.y,button:we,action:Pe,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const O={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:G=>(F(G),G.buttons||(this._document.removeEventListener("mouseup",O.mouseup),O.mousedrag&&this._document.removeEventListener("mousemove",O.mousedrag)),this.cancel(G)),wheel:G=>(F(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&F(G)},mousemove:G=>{G.buttons||F(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?O.mousemove||(z.addEventListener("mousemove",J.mousemove),O.mousemove=J.mousemove):(z.removeEventListener("mousemove",O.mousemove),O.mousemove=null),16&G?O.wheel||(z.addEventListener("wheel",J.wheel,{passive:!1}),O.wheel=J.wheel):(z.removeEventListener("wheel",O.wheel),O.wheel=null),2&G?O.mouseup||(z.addEventListener("mouseup",J.mouseup),O.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",O.mouseup),z.removeEventListener("mouseup",O.mouseup),O.mouseup=null),4&G?O.mousedrag||(O.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",O.mousedrag),O.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,x.addDisposableDomListener)(z,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return F(G),O.mouseup&&this._document.addEventListener("mouseup",O.mouseup),O.mousedrag&&this._document.addEventListener("mousemove",O.mousedrag),this.cancel(G)})),this.register((0,x.addDisposableDomListener)(z,"wheel",G=>{if(!O.wheel){if(!this.buffer.hasScrollback){const ie=this.viewport.getLinesScrolled(G);if(ie===0)return;const we=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let Pe="";for(let hr=0;hr<Math.abs(ie);hr++)Pe+=we;return this.coreService.triggerDataEvent(Pe,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,x.addDisposableDomListener)(z,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,x.addDisposableDomListener)(z,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(L,z){var F;(F=this._renderService)===null||F===void 0||F.refreshRows(L,z)}updateCursorStyle(L){var z;!((z=this._selectionService)===null||z===void 0)&&z.shouldColumnSelect(L)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(L,z,F=0){var O;F===1?(super.scrollLines(L,z,F),this.refresh(0,this.rows-1)):(O=this.viewport)===null||O===void 0||O.scrollLines(L)}paste(L){(0,p.paste)(L,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(L){this._customKeyEventHandler=L}registerLinkProvider(L){return this.linkifier2.registerLinkProvider(L)}registerCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const z=this._characterJoinerService.register(L);return this.refresh(0,this.rows-1),z}deregisterCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(L)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(L){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+L)}registerDecoration(L){return this._decorationService.registerDecoration(L)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(L,z,F){this._selectionService.setSelection(L,z,F)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var L;(L=this._selectionService)===null||L===void 0||L.clearSelection()}selectAll(){var L;(L=this._selectionService)===null||L===void 0||L.selectAll()}selectLines(L,z){var F;(F=this._selectionService)===null||F===void 0||F.selectLines(L,z)}_keyDown(L){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;const z=this.browser.isMac&&this.options.macOptionIsMeta&&L.altKey;if(!z&&!this._compositionHelper.keydown(L))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;z||L.key!=="Dead"&&L.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const F=(0,j.evaluateKeyboardEvent)(L,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(L),F.type===3||F.type===2){const O=this.rows-1;return this.scrollLines(F.type===2?-O:O),this.cancel(L,!0)}return F.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,L)||(F.cancel&&this.cancel(L,!0),!F.key||!!(L.key&&!L.ctrlKey&&!L.altKey&&!L.metaKey&&L.key.length===1&&L.key.charCodeAt(0)>=65&&L.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(F.key!==W.C0.ETX&&F.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:F.key,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent(F.key,!0),!this.optionsService.rawOptions.screenReaderMode||L.altKey||L.ctrlKey?this.cancel(L,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(L,z){const F=L.isMac&&!this.options.macOptionIsMeta&&z.altKey&&!z.ctrlKey&&!z.metaKey||L.isWindows&&z.altKey&&z.ctrlKey&&!z.metaKey||L.isWindows&&z.getModifierState("AltGraph");return z.type==="keypress"?F:F&&(!z.keyCode||z.keyCode>47)}_keyUp(L){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1||(function(z){return z.keyCode===16||z.keyCode===17||z.keyCode===18}(L)||this.focus(),this.updateCursorStyle(L),this._keyPressHandled=!1)}_keyPress(L){let z;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;if(this.cancel(L),L.charCode)z=L.charCode;else if(L.which===null||L.which===void 0)z=L.keyCode;else{if(L.which===0||L.charCode===0)return!1;z=L.which}return!(!z||(L.altKey||L.ctrlKey||L.metaKey)&&!this._isThirdLevelShift(this.browser,L)||(z=String.fromCharCode(z),this._onKey.fire({key:z,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent(z,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(L){if(L.data&&L.inputType==="insertText"&&(!L.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const z=L.data;return this.coreService.triggerDataEvent(z,!0),this.cancel(L),!0}return!1}resize(L,z){L!==this.cols||z!==this.rows?super.resize(L,z):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(L,z){var F,O;(F=this._charSizeService)===null||F===void 0||F.measure(),(O=this.viewport)===null||O===void 0||O.syncScrollArea(!0)}clear(){var L;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(L=this.viewport)===null||L===void 0||L.reset(),this.refresh(0,this.rows-1)}}reset(){var L,z;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)===null||L===void 0||L.reset(),this._decorationService.reset(),(z=this.viewport)===null||z===void 0||z.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var L;(L=this._renderService)===null||L===void 0||L.clearTextureAtlas()}_reportFocus(){var L;!((L=this.element)===null||L===void 0)&&L.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(L){if(this._renderService)switch(L){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const z=this._renderService.dimensions.css.canvas.width.toFixed(0),F=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${F};${z}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const O=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${J};${O}t`)}}cancel(L,z){if(this.options.cancelEvents||z)return L.preventDefault(),L.stopPropagation(),!1}}n.Terminal=Q},9924:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(h,p=1e3){this._renderCallback=h,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(h,p,x){this._rowCount=x,h=h!==void 0?h:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=f-this._lastRefreshMs,w=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const h=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,p)}}},1680:function(_,n,h){var p=this&&this.__decorate||function(c,i,a,m){var g,b=arguments.length,k=b<3?i:m===null?m=Object.getOwnPropertyDescriptor(i,a):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,i,a,m);else for(var y=c.length-1;y>=0;y--)(g=c[y])&&(k=(b<3?g(k):b>3?g(i,a,k):g(i,a))||k);return b>3&&k&&Object.defineProperty(i,a,k),k},x=this&&this.__param||function(c,i){return function(a,m){i(a,m,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const f=h(3656),v=h(4725),w=h(8460),C=h(844),S=h(2585);let u=n.Viewport=class extends C.Disposable{constructor(c,i,a,m,g,b,k,y){super(),this._viewportElement=c,this._scrollArea=i,this._bufferService=a,this._optionsService=m,this._charSizeService=g,this._renderService=b,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const i=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==i&&(this._lastRecordedBufferHeight=i,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,i){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&a<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const i=this._getPixelsScrolled(c);return i!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+i:this._smoothScrollState.target+=i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=i,this._bubbleScroll(c,i))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const i=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+i,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let i=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i}getBufferElements(c,i){var a;let m,g="";const b=[],k=i!=null?i:this._bufferService.buffer.lines.length,y=this._bufferService.buffer.lines;for(let E=c;E<k;E++){const D=y.get(E);if(!D)continue;const M=(a=y.get(E+1))===null||a===void 0?void 0:a.isWrapped;if(g+=D.translateToString(!M),!M||E===y.length-1){const T=document.createElement("div");T.textContent=g,b.push(T),g.length>0&&(m=T),g=""}}return{bufferElements:b,cursorElement:m}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let i=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(c,i){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&i.altKey||a==="ctrl"&&i.ctrlKey||a==="shift"&&i.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const i=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(c,i))}};n.Viewport=u=p([x(2,S.IBufferService),x(3,S.IOptionsService),x(4,v.ICharSizeService),x(5,v.IRenderService),x(6,v.ICoreBrowserService),x(7,v.IThemeService)],u)},3107:function(_,n,h){var p=this&&this.__decorate||function(u,c,i,a){var m,g=arguments.length,b=g<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(u,c,i,a);else for(var k=u.length-1;k>=0;k--)(m=u[k])&&(b=(g<3?m(b):g>3?m(c,i,b):m(c,i))||b);return g>3&&b&&Object.defineProperty(c,i,b),b},x=this&&this.__param||function(u,c){return function(i,a){c(i,a,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const f=h(3656),v=h(4725),w=h(844),C=h(2585);let S=n.BufferDecorationRenderer=class extends w.Disposable{constructor(u,c,i,a){super(),this._screenElement=u,this._bufferService=c,this._decorationService=i,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,w.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){var c,i;const a=document.createElement("div");a.classList.add("xterm-decoration"),a.classList.toggle("xterm-decoration-top-layer",((c=u==null?void 0:u.options)===null||c===void 0?void 0:c.layer)==="top"),a.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,a.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",a.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",a.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=(i=u.options.x)!==null&&i!==void 0?i:0;return m&&m>this._bufferService.cols&&(a.style.display="none"),this._refreshXPosition(u,a),a}_refreshStyle(u){const c=u.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let i=this._decorationElements.get(u);i||(i=this._createElement(u),u.element=i,this._decorationElements.set(u,i),this._container.appendChild(i),u.onDispose(()=>{this._decorationElements.delete(u),i.remove()})),i.style.top=c*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(i)}}_refreshXPosition(u,c=u.element){var i;if(!c)return;const a=(i=u.options.x)!==null&&i!==void 0?i:0;(u.options.anchor||"left")==="right"?c.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){var c;(c=this._decorationElements.get(u))===null||c===void 0||c.remove(),this._decorationElements.delete(u),u.dispose()}};n.BufferDecorationRenderer=S=p([x(1,C.IBufferService),x(2,C.IDecorationService),x(3,v.IRenderService)],S)},5871:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(h){if(h.options.overviewRulerOptions){for(const p of this._zones)if(p.color===h.options.overviewRulerOptions.color&&p.position===h.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,h.marker.line))return;if(this._lineAdjacentToZone(p,h.marker.line,h.options.overviewRulerOptions.position))return void this._addLineToZone(p,h.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=h.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=h.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=h.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=h.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:h.options.overviewRulerOptions.color,position:h.options.overviewRulerOptions.position,startBufferLine:h.marker.line,endBufferLine:h.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(h){this._linePadding=h}_lineIntersectsZone(h,p){return p>=h.startBufferLine&&p<=h.endBufferLine}_lineAdjacentToZone(h,p,x){return p>=h.startBufferLine-this._linePadding[x||"full"]&&p<=h.endBufferLine+this._linePadding[x||"full"]}_addLineToZone(h,p){h.startBufferLine=Math.min(h.startBufferLine,p),h.endBufferLine=Math.max(h.endBufferLine,p)}}},5744:function(_,n,h){var p=this&&this.__decorate||function(m,g,b,k){var y,E=arguments.length,D=E<3?g:k===null?k=Object.getOwnPropertyDescriptor(g,b):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(m,g,b,k);else for(var M=m.length-1;M>=0;M--)(y=m[M])&&(D=(E<3?y(D):E>3?y(g,b,D):y(g,b))||D);return E>3&&D&&Object.defineProperty(g,b,D),D},x=this&&this.__param||function(m,g){return function(b,k){g(b,k,m)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const f=h(5871),v=h(3656),w=h(4725),C=h(844),S=h(2585),u={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},i={full:0,left:0,center:0,right:0};let a=n.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,g,b,k,y,E,D){var M;super(),this._viewportElement=m,this._screenElement=g,this._bufferService=b,this._decorationService=k,this._renderService=y,this._optionsService=E,this._coreBrowseService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)===null||M===void 0||M.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var A;(A=this._canvas)===null||A===void 0||A.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),g=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=m,c.center=g,c.right=m,this._refreshDrawHeightConstants(),i.full=0,i.left=0,i.center=c.left,i.right=c.left+c.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowseService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,g=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);u.left=g,u.center=g,u.right=g}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const g of this._decorationService.decorations)this._colorZoneStore.addDecoration(g);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const g of m)g.position!=="full"&&this._renderColorZone(g);for(const g of m)g.position==="full"&&this._renderColorZone(g);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(i[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-u[m.position||"full"]/2),c[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[m.position||"full"]))}_queueRefresh(m,g){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=g||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n.OverviewRulerRenderer=a=p([x(2,S.IBufferService),x(3,S.IDecorationService),x(4,w.IRenderService),x(5,S.IOptionsService),x(6,w.ICoreBrowserService)],a)},2950:function(_,n,h){var p=this&&this.__decorate||function(S,u,c,i){var a,m=arguments.length,g=m<3?u:i===null?i=Object.getOwnPropertyDescriptor(u,c):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(S,u,c,i);else for(var b=S.length-1;b>=0;b--)(a=S[b])&&(g=(m<3?a(g):m>3?a(u,c,g):a(u,c))||g);return m>3&&g&&Object.defineProperty(u,c,g),g},x=this&&this.__param||function(S,u){return function(c,i){u(c,i,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const f=h(4725),v=h(2585),w=h(2584);let C=n.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,u,c,i,a,m){this._textarea=S,this._compositionView=u,this._bufferService=c,this._optionsService=i,this._coreService=a,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const u=this._textarea.value,c=u.replace(S,"");this._dataAlreadySent=c,u.length>S.length?this._coreService.triggerDataEvent(c,!0):u.length<S.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):u.length===S.length&&u!==S&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};n.CompositionHelper=C=p([x(2,v.IBufferService),x(3,v.IOptionsService),x(4,v.ICoreService),x(5,f.IRenderService)],C)},9806:(_,n)=>{function h(p,x,f){const v=f.getBoundingClientRect(),w=p.getComputedStyle(f),C=parseInt(w.getPropertyValue("padding-left")),S=parseInt(w.getPropertyValue("padding-top"));return[x.clientX-v.left-C,x.clientY-v.top-S]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=h,n.getCoords=function(p,x,f,v,w,C,S,u,c){if(!C)return;const i=h(p,x,f);return i?(i[0]=Math.ceil((i[0]+(c?S/2:0))/S),i[1]=Math.ceil(i[1]/u),i[0]=Math.min(Math.max(i[0],1),v+(c?1:0)),i[1]=Math.min(Math.max(i[1],1),w),i):void 0}},9504:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const p=h(2584);function x(u,c,i,a){const m=u-f(u,i),g=c-f(c,i),b=Math.abs(m-g)-function(k,y,E){let D=0;const M=k-f(k,E),T=y-f(y,E);for(let A=0;A<Math.abs(M-T);A++){const B=v(k,y)==="A"?-1:1,H=E.buffer.lines.get(M+B*A);H!=null&&H.isWrapped&&D++}return D}(u,c,i);return S(b,C(v(u,c),a))}function f(u,c){let i=0,a=c.buffer.lines.get(u),m=a==null?void 0:a.isWrapped;for(;m&&u>=0&&u<c.rows;)i++,a=c.buffer.lines.get(--u),m=a==null?void 0:a.isWrapped;return i}function v(u,c){return u>c?"A":"B"}function w(u,c,i,a,m,g){let b=u,k=c,y="";for(;b!==i||k!==a;)b+=m?1:-1,m&&b>g.cols-1?(y+=g.buffer.translateBufferLineToString(k,!1,u,b),b=0,u=0,k++):!m&&b<0&&(y+=g.buffer.translateBufferLineToString(k,!1,0,u+1),b=g.cols-1,u=b,k--);return y+g.buffer.translateBufferLineToString(k,!1,u,b)}function C(u,c){const i=c?"O":"[";return p.C0.ESC+i+u}function S(u,c){u=Math.floor(u);let i="";for(let a=0;a<u;a++)i+=c;return i}n.moveToCellSequence=function(u,c,i,a){const m=i.buffer.x,g=i.buffer.y;if(!i.buffer.hasScrollback)return function(y,E,D,M,T,A){return x(E,M,T,A).length===0?"":S(w(y,E,y,E-f(E,T),!1,T).length,C("D",A))}(m,g,0,c,i,a)+x(g,c,i,a)+function(y,E,D,M,T,A){let B;B=x(E,M,T,A).length>0?M-f(M,T):E;const H=M,$=function(W,j,N,R,P,I){let K;return K=x(N,R,P,I).length>0?R-f(R,P):j,W<N&&K<=R||W>=N&&K<R?"C":"D"}(y,E,D,M,T,A);return S(w(y,B,D,H,$==="C",T).length,C($,A))}(m,g,u,c,i,a);let b;if(g===c)return b=m>u?"D":"C",S(Math.abs(m-u),C(b,a));b=g>c?"D":"C";const k=Math.abs(g-c);return S(function(y,E){return E.cols-y}(g>c?u:m,i)+(k-1)*i.cols+1+((g>c?m:u)-1),C(b,a))}},1296:function(_,n,h){var p=this&&this.__decorate||function(T,A,B,H){var $,W=arguments.length,j=W<3?A:H===null?H=Object.getOwnPropertyDescriptor(A,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(T,A,B,H);else for(var N=T.length-1;N>=0;N--)($=T[N])&&(j=(W<3?$(j):W>3?$(A,B,j):$(A,B))||j);return W>3&&j&&Object.defineProperty(A,B,j),j},x=this&&this.__param||function(T,A){return function(B,H){A(B,H,T)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const f=h(3787),v=h(2550),w=h(2223),C=h(6171),S=h(4725),u=h(8055),c=h(8460),i=h(844),a=h(2585),m="xterm-dom-renderer-owner-",g="xterm-rows",b="xterm-fg-",k="xterm-bg-",y="xterm-focus",E="xterm-selection";let D=1,M=n.DomRenderer=class extends i.Disposable{constructor(T,A,B,H,$,W,j,N,R,P){super(),this._element=T,this._screenElement=A,this._viewportElement=B,this._linkifier2=H,this._charSizeService=W,this._optionsService=j,this._bufferService=N,this._coreBrowserService=R,this._themeService=P,this._terminalClass=D++,this._rowElements=[],this.onRequestRedraw=this.register(new c.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(I=>this._injectCss(I))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(I=>this._handleLinkHover(I))),this.register(this._linkifier2.onHideLinkUnderline(I=>this._handleLinkLeave(I))),this.register((0,i.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${g} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${g} .xterm-dim { color: ${u.color.multiplyOpacity(T.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,A+=`${this._terminalSelector} .${g}.${y} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[B,H]of T.ansi.entries())A+=`${this._terminalSelector} .${b}${B} { color: ${H.css}; }${this._terminalSelector} .${b}${B}.xterm-dim { color: ${u.color.multiplyOpacity(H,.5).css}; }${this._terminalSelector} .${k}${B} { background-color: ${H.css}; }`;A+=`${this._terminalSelector} .${b}${w.INVERTED_DEFAULT_COLOR} { color: ${u.color.opaque(T.background).css}; }${this._terminalSelector} .${b}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${u.color.multiplyOpacity(u.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${k}${w.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,A){for(let B=this._rowElements.length;B<=A;B++){const H=document.createElement("div");this._rowContainer.appendChild(H),this._rowElements.push(H)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,A){this._refreshRowElements(T,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,A,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,A,B),this.renderRows(0,this._bufferService.rows-1),!T||!A)return;const H=T[1]-this._bufferService.buffer.ydisp,$=A[1]-this._bufferService.buffer.ydisp,W=Math.max(H,0),j=Math.min($,this._bufferService.rows-1);if(W>=this._bufferService.rows||j<0)return;const N=document.createDocumentFragment();if(B){const R=T[0]>A[0];N.appendChild(this._createSelectionElement(W,R?A[0]:T[0],R?T[0]:A[0],j-W+1))}else{const R=H===W?T[0]:0,P=W===$?A[0]:this._bufferService.cols;N.appendChild(this._createSelectionElement(W,R,P));const I=j-W-1;if(N.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,I)),W!==j){const K=$===j?A[0]:this._bufferService.cols;N.appendChild(this._createSelectionElement(j,0,K))}}this._selectionContainer.appendChild(N)}_createSelectionElement(T,A,B,H=1){const $=document.createElement("div");return $.style.height=H*this.dimensions.css.cell.height+"px",$.style.top=T*this.dimensions.css.cell.height+"px",$.style.left=A*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(B-A)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,A){const B=this._bufferService.buffer,H=B.ybase+B.y,$=Math.min(B.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,N=this._optionsService.rawOptions.cursorInactiveStyle;for(let R=T;R<=A;R++){const P=R+B.ydisp,I=this._rowElements[R],K=B.lines.get(P);if(!I||!K)break;I.replaceChildren(...this._rowFactory.createRow(K,P,P===H,j,N,$,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,A,B,H,$,W){B<0&&(T=0),H<0&&(A=0);const j=this._bufferService.rows-1;B=Math.max(Math.min(B,j),0),H=Math.max(Math.min(H,j),0),$=Math.min($,this._bufferService.cols);const N=this._bufferService.buffer,R=N.ybase+N.y,P=Math.min(N.x,$-1),I=this._optionsService.rawOptions.cursorBlink,K=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let Q=B;Q<=H;++Q){const se=Q+N.ydisp,L=this._rowElements[Q],z=N.lines.get(se);if(!L||!z)break;L.replaceChildren(...this._rowFactory.createRow(z,se,se===R,K,q,P,I,this.dimensions.css.cell.width,this._widthCache,W?Q===B?T:0:-1,W?(Q===H?A:$)-1:-1))}}};n.DomRenderer=M=p([x(4,a.IInstantiationService),x(5,S.ICharSizeService),x(6,a.IOptionsService),x(7,a.IBufferService),x(8,S.ICoreBrowserService),x(9,S.IThemeService)],M)},3787:function(_,n,h){var p=this&&this.__decorate||function(b,k,y,E){var D,M=arguments.length,T=M<3?k:E===null?E=Object.getOwnPropertyDescriptor(k,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(b,k,y,E);else for(var A=b.length-1;A>=0;A--)(D=b[A])&&(T=(M<3?D(T):M>3?D(k,y,T):D(k,y))||T);return M>3&&T&&Object.defineProperty(k,y,T),T},x=this&&this.__param||function(b,k){return function(y,E){k(y,E,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=void 0;const f=h(2223),v=h(643),w=h(511),C=h(2585),S=h(8055),u=h(4725),c=h(4269),i=h(6171),a=h(3734);let m=n.DomRendererRowFactory=class{constructor(b,k,y,E,D,M,T){this._document=b,this._characterJoinerService=k,this._optionsService=y,this._coreBrowserService=E,this._coreService=D,this._decorationService=M,this._themeService=T,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,k,y){this._selectionStart=b,this._selectionEnd=k,this._columnSelectMode=y}createRow(b,k,y,E,D,M,T,A,B,H,$){const W=[],j=this._characterJoinerService.getJoinedCharacters(k),N=this._themeService.colors;let R,P=b.getNoBgTrimmedLength();y&&P<M+1&&(P=M+1);let I=0,K="",q=0,Q=0,se=0,L=!1,z=0,F=!1,O=0;const J=[],G=H!==-1&&$!==-1;for(let ie=0;ie<P;ie++){b.loadCell(ie,this._workCell);let we=this._workCell.getWidth();if(we===0)continue;let Pe=!1,hr=ie,Z=this._workCell;if(j.length>0&&ie===j[0][0]){Pe=!0;const he=j.shift();Z=new c.JoinedCellData(this._workCell,b.translateToString(!0,he[0],he[1]),he[1]-he[0]),hr=he[1]-1,we=Z.getWidth()}const $r=this._isCellInSelection(ie,k),pn=y&&ie===M,mn=G&&ie>=H&&ie<=$;let _n=!1;this._decorationService.forEachDecorationAtCell(ie,k,void 0,he=>{_n=!0});let $s=Z.getChars()||v.WHITESPACE_CELL_CHAR;if($s===" "&&(Z.isUnderline()||Z.isOverline())&&($s=""),O=we*A-B.get($s,Z.isBold(),Z.isItalic()),R){if(I&&($r&&F||!$r&&!F&&Z.bg===q)&&($r&&F&&N.selectionForeground||Z.fg===Q)&&Z.extended.ext===se&&mn===L&&O===z&&!pn&&!Pe&&!_n){K+=$s,I++;continue}I&&(R.textContent=K),R=this._document.createElement("span"),I=0,K=""}else R=this._document.createElement("span");if(q=Z.bg,Q=Z.fg,se=Z.extended.ext,L=mn,z=O,F=$r,Pe&&M>=ie&&M<=hr&&(M=ie),!this._coreService.isCursorHidden&&pn){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&J.push("xterm-cursor-blink"),J.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(Z.isBold()&&J.push("xterm-bold"),Z.isItalic()&&J.push("xterm-italic"),Z.isDim()&&J.push("xterm-dim"),K=Z.isInvisible()?v.WHITESPACE_CELL_CHAR:Z.getChars()||v.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(J.push(`xterm-underline-${Z.extended.underlineStyle}`),K===" "&&(K=""),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let he=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&he<8&&(he+=8),R.style.textDecorationColor=N.ansi[he].css}Z.isOverline()&&(J.push("xterm-overline"),K===" "&&(K="")),Z.isStrikethrough()&&J.push("xterm-strikethrough"),mn&&(R.style.textDecoration="underline");let Ge=Z.getFgColor(),Kr=Z.getFgColorMode(),ct=Z.getBgColor(),Vr=Z.getBgColorMode();const vn=!!Z.isInverse();if(vn){const he=Ge;Ge=ct,ct=he;const qh=Kr;Kr=Vr,Vr=qh}let Et,gn,jt,qr=!1;switch(this._decorationService.forEachDecorationAtCell(ie,k,void 0,he=>{he.options.layer!=="top"&&qr||(he.backgroundColorRGB&&(Vr=50331648,ct=he.backgroundColorRGB.rgba>>8&16777215,Et=he.backgroundColorRGB),he.foregroundColorRGB&&(Kr=50331648,Ge=he.foregroundColorRGB.rgba>>8&16777215,gn=he.foregroundColorRGB),qr=he.options.layer==="top")}),!qr&&$r&&(Et=this._coreBrowserService.isFocused?N.selectionBackgroundOpaque:N.selectionInactiveBackgroundOpaque,ct=Et.rgba>>8&16777215,Vr=50331648,qr=!0,N.selectionForeground&&(Kr=50331648,Ge=N.selectionForeground.rgba>>8&16777215,gn=N.selectionForeground)),qr&&J.push("xterm-decoration-top"),Vr){case 16777216:case 33554432:jt=N.ansi[ct],J.push(`xterm-bg-${ct}`);break;case 50331648:jt=S.rgba.toColor(ct>>16,ct>>8&255,255&ct),this._addStyle(R,`background-color:#${g((ct>>>0).toString(16),"0",6)}`);break;default:vn?(jt=N.foreground,J.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):jt=N.background}switch(Et||Z.isDim()&&(Et=S.color.multiplyOpacity(jt,.5)),Kr){case 16777216:case 33554432:Z.isBold()&&Ge<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ge+=8),this._applyMinimumContrast(R,jt,N.ansi[Ge],Z,Et,void 0)||J.push(`xterm-fg-${Ge}`);break;case 50331648:const he=S.rgba.toColor(Ge>>16&255,Ge>>8&255,255&Ge);this._applyMinimumContrast(R,jt,he,Z,Et,gn)||this._addStyle(R,`color:#${g(Ge.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,jt,N.foreground,Z,Et,void 0)||vn&&J.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}J.length&&(R.className=J.join(" "),J.length=0),pn||Pe||_n?R.textContent=K:I++,O!==this.defaultSpacing&&(R.style.letterSpacing=`${O}px`),W.push(R),ie=hr}return R&&I&&(R.textContent=K),W}_applyMinimumContrast(b,k,y,E,D,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.excludeFromContrastRatioDemands)(E.getCode()))return!1;const T=this._getContrastCache(E);let A;if(D||M||(A=T.getColor(k.rgba,y.rgba)),A===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);A=S.color.ensureContrastRatio(D||k,M||y,B),T.setColor((D||k).rgba,(M||y).rgba,A!=null?A:null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,k){b.setAttribute("style",`${b.getAttribute("style")||""}${k};`)}_isCellInSelection(b,k){const y=this._selectionStart,E=this._selectionEnd;return!(!y||!E)&&(this._columnSelectMode?y[0]<=E[0]?b>=y[0]&&k>=y[1]&&b<E[0]&&k<=E[1]:b<y[0]&&k>=y[1]&&b>=E[0]&&k<=E[1]:k>y[1]&&k<E[1]||y[1]===E[1]&&k===y[1]&&b>=y[0]&&b<E[0]||y[1]<E[1]&&k===E[1]&&b<E[0]||y[1]<E[1]&&k===y[1]&&b>=y[0])}};function g(b,k,y){for(;b.length<y;)b=k+b;return b}n.DomRendererRowFactory=m=p([x(1,u.ICharacterJoinerService),x(2,C.IOptionsService),x(3,u.ICoreBrowserService),x(4,C.ICoreService),x(5,C.IDecorationService),x(6,u.IThemeService)],m)},2550:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WidthCache=void 0,n.WidthCache=class{constructor(h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=h.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const p=h.createElement("span"),x=h.createElement("span");x.style.fontWeight="bold";const f=h.createElement("span");f.style.fontStyle="italic";const v=h.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[p,x,f,v],this._container.appendChild(p),this._container.appendChild(x),this._container.appendChild(f),this._container.appendChild(v),h.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(h,p,x,f){h===this._font&&p===this._fontSize&&x===this._weight&&f===this._weightBold||(this._font=h,this._fontSize=p,this._weight=x,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${x}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${x}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(h,p,x){let f=0;if(!p&&!x&&h.length===1&&(f=h.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(h,0);let v=h;p&&(v+="B"),x&&(v+="I");let w=this._holey.get(v);if(w===void 0){let C=0;p&&(C|=1),x&&(C|=2),w=this._measure(h,C),this._holey.set(v,w)}return w}_measure(h,p){const x=this._measureElements[p];return x.textContent=h.repeat(32),x.offsetWidth/32}}},2223:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const p=h(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(_,n)=>{function h(p){return 57508<=p&&p<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},n.isPowerlineGlyph=h,n.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},n.excludeFromContrastRatioDemands=function(p){return h(p)||function(x){return 9472<=x&&x<=9631}(p)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const h=this.selectionStart,p=this.selectionEnd;return!(!h||!p)&&(h[1]>p[1]||h[1]===p[1]&&h[0]>p[0])}handleTrim(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,n,h){var p=this&&this.__decorate||function(u,c,i,a){var m,g=arguments.length,b=g<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(u,c,i,a);else for(var k=u.length-1;k>=0;k--)(m=u[k])&&(b=(g<3?m(b):g>3?m(c,i,b):m(c,i))||b);return g>3&&b&&Object.defineProperty(c,i,b),b},x=this&&this.__param||function(u,c){return function(i,a){c(i,a,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const f=h(2585),v=h(8460),w=h(844);let C=n.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(u,c,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(u,c,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())}};n.CharSizeService=C=p([x(2,f.IOptionsService)],C);class S{constructor(c,i,a){this._document=c,this._parentElement=i,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const c={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return c.width!==0&&c.height!==0&&(this._result.width=c.width/32,this._result.height=Math.ceil(c.height)),this._result}}},4269:function(_,n,h){var p=this&&this.__decorate||function(c,i,a,m){var g,b=arguments.length,k=b<3?i:m===null?m=Object.getOwnPropertyDescriptor(i,a):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,i,a,m);else for(var y=c.length-1;y>=0;y--)(g=c[y])&&(k=(b<3?g(k):b>3?g(i,a,k):g(i,a))||k);return b>3&&k&&Object.defineProperty(i,a,k),k},x=this&&this.__param||function(c,i){return function(a,m){i(a,m,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const f=h(3734),v=h(643),w=h(511),C=h(2585);class S extends f.AttributeData{constructor(i,a,m){super(),this.content=0,this.combinedData="",this.fg=i.fg,this.bg=i.bg,this.combinedData=a,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(i){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=S;let u=n.CharacterJoinerService=class Kh{constructor(i){this._bufferService=i,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(i){const a={id:this._nextCharacterJoinerId++,handler:i};return this._characterJoiners.push(a),a.id}deregister(i){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===i)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(i){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(i);if(!a||a.length===0)return[];const m=[],g=a.translateToString(!0);let b=0,k=0,y=0,E=a.getFg(0),D=a.getBg(0);for(let M=0;M<a.getTrimmedLength();M++)if(a.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==D){if(M-b>1){const T=this._getJoinedRanges(g,y,k,a,b);for(let A=0;A<T.length;A++)m.push(T[A])}b=M,y=k,E=this._workCell.fg,D=this._workCell.bg}k+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const M=this._getJoinedRanges(g,y,k,a,b);for(let T=0;T<M.length;T++)m.push(M[T])}return m}_getJoinedRanges(i,a,m,g,b){const k=i.substring(a,m);let y=[];try{y=this._characterJoiners[0].handler(k)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const D=this._characterJoiners[E].handler(k);for(let M=0;M<D.length;M++)Kh._mergeRanges(y,D[M])}catch(D){console.error(D)}return this._stringRangesToCellRanges(y,g,b),y}_stringRangesToCellRanges(i,a,m){let g=0,b=!1,k=0,y=i[g];if(y){for(let E=m;E<this._bufferService.cols;E++){const D=a.getWidth(E),M=a.getString(E).length||v.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!b&&y[0]<=k&&(y[0]=E,b=!0),y[1]<=k){if(y[1]=E,y=i[++g],!y)break;y[0]<=k?(y[0]=E,b=!0):b=!1}k+=M}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(i,a){let m=!1;for(let g=0;g<i.length;g++){const b=i[g];if(m){if(a[1]<=b[0])return i[g-1][1]=a[1],i;if(a[1]<=b[1])return i[g-1][1]=Math.max(a[1],b[1]),i.splice(g,1),i;i.splice(g,1),g--}else{if(a[1]<=b[0])return i.splice(g,0,a),i;if(a[1]<=b[1])return b[0]=Math.min(a[0],b[0]),i;a[0]<b[1]&&(b[0]=Math.min(a[0],b[0]),m=!0)}}return m?i[i.length-1][1]=a[1]:i.push(a),i}};n.CharacterJoinerService=u=p([x(0,C.IBufferService)],u)},5114:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(h,p){this._textarea=h,this.window=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(_,n,h){var p=this&&this.__decorate||function(C,S,u,c){var i,a=arguments.length,m=a<3?S:c===null?c=Object.getOwnPropertyDescriptor(S,u):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(C,S,u,c);else for(var g=C.length-1;g>=0;g--)(i=C[g])&&(m=(a<3?i(m):a>3?i(S,u,m):i(S,u))||m);return a>3&&m&&Object.defineProperty(S,u,m),m},x=this&&this.__param||function(C,S){return function(u,c){S(u,c,C)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const f=h(4725),v=h(9806);let w=n.MouseService=class{constructor(C,S){this._renderService=C,this._charSizeService=S}getCoords(C,S,u,c,i){return(0,v.getCoords)(window,C,S,u,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(C,S){const u=(0,v.getCoordsRelativeToElement)(window,C,S);if(this._charSizeService.hasValidSize)return u[0]=Math.min(Math.max(u[0],0),this._renderService.dimensions.css.canvas.width-1),u[1]=Math.min(Math.max(u[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};n.MouseService=w=p([x(0,f.IRenderService),x(1,f.ICharSizeService)],w)},3230:function(_,n,h){var p=this&&this.__decorate||function(m,g,b,k){var y,E=arguments.length,D=E<3?g:k===null?k=Object.getOwnPropertyDescriptor(g,b):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(m,g,b,k);else for(var M=m.length-1;M>=0;M--)(y=m[M])&&(D=(E<3?y(D):E>3?y(g,b,D):y(g,b))||D);return E>3&&D&&Object.defineProperty(g,b,D),D},x=this&&this.__param||function(m,g){return function(b,k){g(b,k,m)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const f=h(3656),v=h(6193),w=h(5596),C=h(4725),S=h(8460),u=h(844),c=h(7226),i=h(2585);let a=n.RenderService=class extends u.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,g,b,k,y,E,D,M){if(super(),this._rowCount=m,this._charSizeService=k,this._renderer=this.register(new u.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(D.window,(T,A)=>this._renderRows(T,A)),this.register(this._renderDebouncer),this._screenDprMonitor=new w.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(y.onDecorationRegistered(()=>this._fullRefresh())),this.register(y.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(D.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(M.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in D.window){const T=new D.window.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});T.observe(g),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,g,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,g,this._rowCount))}_renderRows(m,g){this._renderer.value&&(m=Math.min(m,this._rowCount-1),g=Math.min(g,this._rowCount-1),this._renderer.value.renderRows(m,g),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:g}),this._onRender.fire({start:m,end:g}),this._isNextRenderRedrawOnly=!0)}resize(m,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw(g=>this.refreshRows(g.start,g.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,g;this._renderer.value&&((g=(m=this._renderer.value).clearTextureAtlas)===null||g===void 0||g.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,g){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,g)):this._renderer.value.handleResize(m,g),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,g,b){var k;this._selectionState.start=m,this._selectionState.end=g,this._selectionState.columnSelectMode=b,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(m,g,b)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};n.RenderService=a=p([x(2,i.IOptionsService),x(3,C.ICharSizeService),x(4,i.IDecorationService),x(5,i.IBufferService),x(6,C.ICoreBrowserService),x(7,C.IThemeService)],a)},9312:function(_,n,h){var p=this&&this.__decorate||function(y,E,D,M){var T,A=arguments.length,B=A<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,D):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,E,D,M);else for(var H=y.length-1;H>=0;H--)(T=y[H])&&(B=(A<3?T(B):A>3?T(E,D,B):T(E,D))||B);return A>3&&B&&Object.defineProperty(E,D,B),B},x=this&&this.__param||function(y,E){return function(D,M){E(D,M,y)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const f=h(9806),v=h(9504),w=h(456),C=h(4725),S=h(8460),u=h(844),c=h(6114),i=h(4841),a=h(511),m=h(2585),g="",b=new RegExp(g,"g");let k=n.SelectionService=class extends u.Disposable{constructor(y,E,D,M,T,A,B,H,$){super(),this._element=y,this._screenElement=E,this._linkifier=D,this._bufferService=M,this._coreService=T,this._mouseService=A,this._optionsService=B,this._renderService=H,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!y||!E||y[0]===E[0]&&y[1]===E[1])}get selectionText(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!y||!E)return"";const D=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(y[0]===E[0])return"";const T=y[0]<E[0]?y[0]:E[0],A=y[0]<E[0]?E[0]:y[0];for(let B=y[1];B<=E[1];B++){const H=D.translateBufferLineToString(B,!0,T,A);M.push(H)}}else{const T=y[1]===E[1]?E[0]:void 0;M.push(D.translateBufferLineToString(y[1],!0,y[0],T));for(let A=y[1]+1;A<=E[1]-1;A++){const B=D.lines.get(A),H=D.translateBufferLineToString(A,!0);B!=null&&B.isWrapped?M[M.length-1]+=H:M.push(H)}if(y[1]!==E[1]){const A=D.lines.get(E[1]),B=D.translateBufferLineToString(E[1],!0,0,E[0]);A&&A.isWrapped?M[M.length-1]+=B:M.push(B)}}return M.map(T=>T.replace(b," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const E=this._getMouseBufferCoords(y),D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(D&&M&&E)&&this._areCoordsInSelection(E,D,M)}isCellInSelection(y,E){const D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!D||!M)&&this._areCoordsInSelection([y,E],D,M)}_areCoordsInSelection(y,E,D){return y[1]>E[1]&&y[1]<D[1]||E[1]===D[1]&&y[1]===E[1]&&y[0]>=E[0]&&y[0]<D[0]||E[1]<D[1]&&y[1]===D[1]&&y[0]<D[0]||E[1]<D[1]&&y[1]===E[1]&&y[0]>=E[0]}_selectWordAtCursor(y,E){var D,M;const T=(M=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||M===void 0?void 0:M.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const A=this._getMouseBufferCoords(y);return!!A&&(this._selectWordAt(A,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,E){this._model.clearSelection(),y=Math.max(y,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const E=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(y){let E=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=D?0:(E>D&&(E-=D),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(y){return c.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const E=this._getMouseBufferCoords(y);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(y){return y.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const M=D.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const E=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const M=(0,v.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,D=!(!y||!E||y[0]===E[0]&&y[1]===E[1]);D?y&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,E,D)):this._oldHasSelection&&this._fireOnSelectionChange(y,E,D)}_fireOnSelectionChange(y,E,D){this._oldSelectionStart=y,this._oldSelectionEnd=E,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(y,E){let D=E;for(let M=0;E>=M;M++){const T=y.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&E!==M&&(D+=T-1)}return D}setSelection(y,E,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,E],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,E,D=!0,M=!0){if(y[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,A=T.lines.get(y[1]);if(!A)return;const B=T.translateBufferLineToString(y[1],!1);let H=this._convertViewportColToCharacterIndex(A,y[0]),$=H;const W=y[0]-H;let j=0,N=0,R=0,P=0;if(B.charAt(H)===" "){for(;H>0&&B.charAt(H-1)===" ";)H--;for(;$<B.length&&B.charAt($+1)===" ";)$++}else{let q=y[0],Q=y[0];A.getWidth(q)===0&&(j++,q--),A.getWidth(Q)===2&&(N++,Q++);const se=A.getString(Q).length;for(se>1&&(P+=se-1,$+=se-1);q>0&&H>0&&!this._isCharWordSeparator(A.loadCell(q-1,this._workCell));){A.loadCell(q-1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===0?(j++,q--):L>1&&(R+=L-1,H-=L-1),H--,q--}for(;Q<A.length&&$+1<B.length&&!this._isCharWordSeparator(A.loadCell(Q+1,this._workCell));){A.loadCell(Q+1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,Q++):L>1&&(P+=L-1,$+=L-1),$++,Q++}}$++;let I=H+W-j+R,K=Math.min(this._bufferService.cols,$-H+j+N-R-P);if(E||B.slice(H,$).trim()!==""){if(D&&I===0&&A.getCodePoint(0)!==32){const q=T.lines.get(y[1]-1);if(q&&A.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(Q){const se=this._bufferService.cols-Q.start;I-=se,K+=se}}}if(M&&I+K===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const q=T.lines.get(y[1]+1);if(q!=null&&q.isWrapped&&q.getCodePoint(0)!==32){const Q=this._getWordAt([0,y[1]+1],!1,!1,!0);Q&&(K+=Q.length)}}return{start:I,length:K}}}_selectWordAt(y,E){const D=this._getWordAt(y,E);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[D.start,y[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(y){const E=this._getWordAt(y,!0);if(E){let D=y[1];for(;E.start<0;)E.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,D]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const E=this._bufferService.buffer.getWrappedRangeForLine(y),D={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(D,this._bufferService.cols)}};n.SelectionService=k=p([x(3,m.IBufferService),x(4,m.ICoreService),x(5,C.IMouseService),x(6,m.IOptionsService),x(7,C.IRenderService),x(8,C.ICoreBrowserService)],k)},4725:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const p=h(8343);n.ICharSizeService=(0,p.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),n.IMouseService=(0,p.createDecorator)("MouseService"),n.IRenderService=(0,p.createDecorator)("RenderService"),n.ISelectionService=(0,p.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,p.createDecorator)("ThemeService")},6731:function(_,n,h){var p=this&&this.__decorate||function(k,y,E,D){var M,T=arguments.length,A=T<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(k,y,E,D);else for(var B=k.length-1;B>=0;B--)(M=k[B])&&(A=(T<3?M(A):T>3?M(y,E,A):M(y,E))||A);return T>3&&A&&Object.defineProperty(y,E,A),A},x=this&&this.__param||function(k,y){return function(E,D){y(E,D,k)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const f=h(7239),v=h(8055),w=h(8460),C=h(844),S=h(2585),u=v.css.toColor("#ffffff"),c=v.css.toColor("#000000"),i=v.css.toColor("#ffffff"),a=v.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let E=0;E<216;E++){const D=y[E/36%6|0],M=y[E/6%6|0],T=y[E%6];k.push({css:v.channels.toCss(D,M,T),rgba:v.channels.toRgba(D,M,T)})}for(let E=0;E<24;E++){const D=8+10*E;k.push({css:v.channels.toCss(D,D,D),rgba:v.channels.toRgba(D,D,D)})}return k})());let g=n.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:c,cursor:i,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:v.color.blend(c,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:v.color.blend(c,m),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const y=this._colors;if(y.foreground=b(k.foreground,u),y.background=b(k.background,c),y.cursor=b(k.cursor,i),y.cursorAccent=b(k.cursorAccent,a),y.selectionBackgroundTransparent=b(k.selectionBackground,m),y.selectionBackgroundOpaque=v.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=b(k.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=v.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=k.selectionForeground?b(k.selectionForeground,v.NULL_COLOR):void 0,y.selectionForeground===v.NULL_COLOR&&(y.selectionForeground=void 0),v.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=v.color.opacity(y.selectionBackgroundTransparent,.3)),v.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=v.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=n.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=b(k.black,n.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=b(k.red,n.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=b(k.green,n.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=b(k.yellow,n.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=b(k.blue,n.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=b(k.magenta,n.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=b(k.cyan,n.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=b(k.white,n.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=b(k.brightBlack,n.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=b(k.brightRed,n.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=b(k.brightGreen,n.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=b(k.brightYellow,n.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=b(k.brightBlue,n.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=b(k.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=b(k.brightCyan,n.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=b(k.brightWhite,n.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const E=Math.min(y.ansi.length-16,k.extendedAnsi.length);for(let D=0;D<E;D++)y.ansi[D+16]=b(k.extendedAnsi[D],n.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(k,y){if(k!==void 0)try{return v.css.toColor(k)}catch{}return y}n.ThemeService=g=p([x(0,S.IOptionsService)],g)},6349:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const p=h(8460),x=h(844);class f extends x.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const C=new Array(w);for(let S=0;S<Math.min(w,this.length);S++)C[S]=this._array[this._getCyclicIndex(S)];this._array=C,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let C=this._length;C<w;C++)this._array[C]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,C){this._array[this._getCyclicIndex(w)]=C}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,C,...S){if(C){for(let u=w;u<this._length-C;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+C)];this._length-=C,this.onDeleteEmitter.fire({index:w,amount:C})}for(let u=this._length-1;u>=w;u--)this._array[this._getCyclicIndex(u+S.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<S.length;u++)this._array[this._getCyclicIndex(w+u)]=S[u];if(S.length&&this.onInsertEmitter.fire({index:w,amount:S.length}),this._length+S.length>this._maxLength){const u=this._length+S.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=S.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,C,S){if(!(C<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let c=C-1;c>=0;c--)this.set(w+c+S,this.get(w+c));const u=w+C+S-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<C;u++)this.set(w+u+S,this.get(w+u))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}n.CircularList=f},1439:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function h(p,x=5){if(typeof p!="object")return p;const f=Array.isArray(p)?[]:{};for(const v in p)f[v]=x<=1?p[v]:p[v]&&h(p[v],x-1);return f}},8055:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const p=h(6114);let x=0,f=0,v=0,w=0;var C,S,u,c,i;function a(g){const b=g.toString(16);return b.length<2?"0"+b:b}function m(g,b){return g<b?(b+.05)/(g+.05):(g+.05)/(b+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(g){g.toCss=function(b,k,y,E){return E!==void 0?`#${a(b)}${a(k)}${a(y)}${a(E)}`:`#${a(b)}${a(k)}${a(y)}`},g.toRgba=function(b,k,y,E=255){return(b<<24|k<<16|y<<8|E)>>>0}}(C||(n.channels=C={})),function(g){function b(k,y){return w=Math.round(255*y),[x,f,v]=i.toChannels(k.rgba),{css:C.toCss(x,f,v,w),rgba:C.toRgba(x,f,v,w)}}g.blend=function(k,y){if(w=(255&y.rgba)/255,w===1)return{css:y.css,rgba:y.rgba};const E=y.rgba>>24&255,D=y.rgba>>16&255,M=y.rgba>>8&255,T=k.rgba>>24&255,A=k.rgba>>16&255,B=k.rgba>>8&255;return x=T+Math.round((E-T)*w),f=A+Math.round((D-A)*w),v=B+Math.round((M-B)*w),{css:C.toCss(x,f,v),rgba:C.toRgba(x,f,v)}},g.isOpaque=function(k){return(255&k.rgba)==255},g.ensureContrastRatio=function(k,y,E){const D=i.ensureContrastRatio(k.rgba,y.rgba,E);if(D)return i.toColor(D>>24&255,D>>16&255,D>>8&255)},g.opaque=function(k){const y=(255|k.rgba)>>>0;return[x,f,v]=i.toChannels(y),{css:C.toCss(x,f,v),rgba:y}},g.opacity=b,g.multiplyOpacity=function(k,y){return w=255&k.rgba,b(k,w*y/255)},g.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(S||(n.color=S={})),function(g){let b,k;if(!p.isNode){const y=document.createElement("canvas");y.width=1,y.height=1;const E=y.getContext("2d",{willReadFrequently:!0});E&&(b=E,b.globalCompositeOperation="copy",k=b.createLinearGradient(0,0,1,1))}g.toColor=function(y){if(y.match(/#[\da-f]{3,8}/i))switch(y.length){case 4:return x=parseInt(y.slice(1,2).repeat(2),16),f=parseInt(y.slice(2,3).repeat(2),16),v=parseInt(y.slice(3,4).repeat(2),16),i.toColor(x,f,v);case 5:return x=parseInt(y.slice(1,2).repeat(2),16),f=parseInt(y.slice(2,3).repeat(2),16),v=parseInt(y.slice(3,4).repeat(2),16),w=parseInt(y.slice(4,5).repeat(2),16),i.toColor(x,f,v,w);case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}const E=y.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return x=parseInt(E[1]),f=parseInt(E[2]),v=parseInt(E[3]),w=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),i.toColor(x,f,v,w);if(!b||!k)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=k,b.fillStyle=y,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[x,f,v,w]=b.getImageData(0,0,1,1).data,w!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(x,f,v,w),css:y}}}(u||(n.css=u={})),function(g){function b(k,y,E){const D=k/255,M=y/255,T=E/255;return .2126*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}g.relativeLuminance=function(k){return b(k>>16&255,k>>8&255,255&k)},g.relativeLuminance2=b}(c||(n.rgb=c={})),function(g){function b(y,E,D){const M=y>>24&255,T=y>>16&255,A=y>>8&255;let B=E>>24&255,H=E>>16&255,$=E>>8&255,W=m(c.relativeLuminance2(B,H,$),c.relativeLuminance2(M,T,A));for(;W<D&&(B>0||H>0||$>0);)B-=Math.max(0,Math.ceil(.1*B)),H-=Math.max(0,Math.ceil(.1*H)),$-=Math.max(0,Math.ceil(.1*$)),W=m(c.relativeLuminance2(B,H,$),c.relativeLuminance2(M,T,A));return(B<<24|H<<16|$<<8|255)>>>0}function k(y,E,D){const M=y>>24&255,T=y>>16&255,A=y>>8&255;let B=E>>24&255,H=E>>16&255,$=E>>8&255,W=m(c.relativeLuminance2(B,H,$),c.relativeLuminance2(M,T,A));for(;W<D&&(B<255||H<255||$<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),H=Math.min(255,H+Math.ceil(.1*(255-H))),$=Math.min(255,$+Math.ceil(.1*(255-$))),W=m(c.relativeLuminance2(B,H,$),c.relativeLuminance2(M,T,A));return(B<<24|H<<16|$<<8|255)>>>0}g.ensureContrastRatio=function(y,E,D){const M=c.relativeLuminance(y>>8),T=c.relativeLuminance(E>>8);if(m(M,T)<D){if(T<M){const H=b(y,E,D),$=m(M,c.relativeLuminance(H>>8));if($<D){const W=k(y,E,D);return $>m(M,c.relativeLuminance(W>>8))?H:W}return H}const A=k(y,E,D),B=m(M,c.relativeLuminance(A>>8));if(B<D){const H=b(y,E,D);return B>m(M,c.relativeLuminance(H>>8))?A:H}return A}},g.reduceLuminance=b,g.increaseLuminance=k,g.toChannels=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},g.toColor=function(y,E,D,M){return{css:C.toCss(y,E,D,M),rgba:C.toRgba(y,E,D,M)}}}(i||(n.rgba=i={})),n.toPaddedHex=a,n.contrastRatio=m},8969:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const p=h(844),x=h(2585),f=h(4348),v=h(7866),w=h(744),C=h(7302),S=h(6975),u=h(8460),c=h(1753),i=h(1480),a=h(7994),m=h(9282),g=h(5435),b=h(5981),k=h(2660);let y=!1;class E extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(M=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const T in M)this.optionsService.options[T]=M[T]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new C.OptionsService(M)),this._instantiationService.setService(x.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(x.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(x.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(x.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(x.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(i.UnicodeService)),this._instantiationService.setService(x.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(x.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(x.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((T,A)=>this._inputHandler.parse(T,A))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,T){this._writeBuffer.write(M,T)}writeSync(M,T){this._logService.logLevel<=x.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(M,T)}resize(M,T){isNaN(M)||isNaN(T)||(M=Math.max(M,w.MINIMUM_COLS),T=Math.max(T,w.MINIMUM_ROWS),this._bufferService.resize(M,T))}scroll(M,T=!1){this._bufferService.scroll(M,T)}scrollLines(M,T,A){this._bufferService.scrollLines(M,T,A)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const T=M-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(M,T){return this._inputHandler.registerEscHandler(M,T)}registerDcsHandler(M,T){return this._inputHandler.registerDcsHandler(M,T)}registerCsiHandler(M,T){return this._inputHandler.registerCsiHandler(M,T)}registerOscHandler(M,T){return this._inputHandler.registerOscHandler(M,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?M=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)(()=>{for(const T of M)T.dispose()})}}}n.CoreTerminal=E},8460:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===h)return void this._listeners.splice(p,1)}}})),this._event}fire(h,p){const x=[];for(let f=0;f<this._listeners.length;f++)x.push(this._listeners[f]);for(let f=0;f<x.length;f++)x[f].call(void 0,h,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(h,p){return h(x=>p.fire(x))}},5435:function(_,n,h){var p=this&&this.__decorate||function(W,j,N,R){var P,I=arguments.length,K=I<3?j:R===null?R=Object.getOwnPropertyDescriptor(j,N):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(W,j,N,R);else for(var q=W.length-1;q>=0;q--)(P=W[q])&&(K=(I<3?P(K):I>3?P(j,N,K):P(j,N))||K);return I>3&&K&&Object.defineProperty(j,N,K),K},x=this&&this.__param||function(W,j){return function(N,R){j(N,R,W)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const f=h(2584),v=h(7116),w=h(2015),C=h(844),S=h(482),u=h(8437),c=h(8460),i=h(643),a=h(511),m=h(3734),g=h(2585),b=h(6242),k=h(6351),y=h(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function M(W,j){if(W>24)return j.setWinLines||!1;switch(W){case 1:return!!j.restoreWin;case 2:return!!j.minimizeWin;case 3:return!!j.setWinPosition;case 4:return!!j.setWinSizePixels;case 5:return!!j.raiseWin;case 6:return!!j.lowerWin;case 7:return!!j.refreshWin;case 8:return!!j.setWinSizeChars;case 9:return!!j.maximizeWin;case 10:return!!j.fullscreenWin;case 11:return!!j.getWinState;case 13:return!!j.getWinPosition;case 14:return!!j.getWinSizePixels;case 15:return!!j.getScreenSizePixels;case 16:return!!j.getCellSizePixels;case 18:return!!j.getWinSizeChars;case 19:return!!j.getScreenSizeChars;case 20:return!!j.getIconTitle;case 21:return!!j.getWinTitle;case 22:return!!j.pushTitle;case 23:return!!j.popTitle;case 24:return!!j.setWinLines}return!1}var T;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(n.WindowsOptionsReportType=T={}));let A=0;class B extends C.Disposable{getAttrData(){return this._curAttrData}constructor(j,N,R,P,I,K,q,Q,se=new w.EscapeSequenceParser){super(),this._bufferService=j,this._charsetService=N,this._coreService=R,this._logService=P,this._optionsService=I,this._oscLinkService=K,this._coreMouseService=q,this._unicodeService=Q,this._parser=se,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:z.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,z,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:z,data:F})}),this._parser.setDcsHandlerFallback((L,z,F)=>{z==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:z,payload:F})}),this._parser.setPrintHandler((L,z,F)=>this.print(L,z,F)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new b.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new b.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new b.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new b.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new b.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new b.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new b.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new b.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new b.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new b.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new b.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((L,z)=>this.requestStatusString(L,z)))}_preserveStack(j,N,R,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=j,this._parseStack.cursorStartY=N,this._parseStack.decodedLength=R,this._parseStack.position=P}_logSlowResolvingAsync(j){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([j,new Promise((N,R)=>setTimeout(()=>R("#SLOW_TIMEOUT"),5e3))]).catch(N=>{if(N!=="#SLOW_TIMEOUT")throw N;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(j,N){let R,P=this._activeBuffer.x,I=this._activeBuffer.y,K=0;const q=this._parseStack.paused;if(q){if(R=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,N))return this._logSlowResolvingAsync(R),R;P=this._parseStack.cursorStartX,I=this._parseStack.cursorStartY,this._parseStack.paused=!1,j.length>D&&(K=this._parseStack.position+D)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof j=="string"?` "${j}"`:` "${Array.prototype.map.call(j,Q=>String.fromCharCode(Q)).join("")}"`),typeof j=="string"?j.split("").map(Q=>Q.charCodeAt(0)):j),this._parseBuffer.length<j.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(j.length,D))),q||this._dirtyRowTracker.clearRange(),j.length>D)for(let Q=K;Q<j.length;Q+=D){const se=Q+D<j.length?Q+D:j.length,L=typeof j=="string"?this._stringDecoder.decode(j.substring(Q,se),this._parseBuffer):this._utf8Decoder.decode(j.subarray(Q,se),this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,L))return this._preserveStack(P,I,L,Q),this._logSlowResolvingAsync(R),R}else if(!q){const Q=typeof j=="string"?this._stringDecoder.decode(j,this._parseBuffer):this._utf8Decoder.decode(j,this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,Q))return this._preserveStack(P,I,Q,0),this._logSlowResolvingAsync(R),R}this._activeBuffer.x===P&&this._activeBuffer.y===I||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(j,N,R){let P,I;const K=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,Q=this._bufferService.cols,se=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,z=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&R-N>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(let O=N;O<R;++O){if(P=j[O],I=this._unicodeService.wcwidth(P),P<127&&K){const J=K[String.fromCharCode(P)];J&&(P=J.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,S.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),I||!this._activeBuffer.x){if(this._activeBuffer.x+I-1>=Q){if(se){for(;this._activeBuffer.x<Q;)F.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Q-1,I===2)continue}if(L&&(F.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(z),z),F.getWidth(Q-1)===2&&F.setCellFromCodePoint(Q-1,i.NULL_CELL_CODE,i.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),F.setCellFromCodePoint(this._activeBuffer.x++,P,I,z.fg,z.bg,z.extended),I>0)for(;--I;)F.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else F.getWidth(this._activeBuffer.x-1)?F.addCodepointToCell(this._activeBuffer.x-1,P):F.addCodepointToCell(this._activeBuffer.x-2,P)}R-N>0&&(F.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Q&&R-N>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(j,N){return j.final!=="t"||j.prefix||j.intermediates?this._parser.registerCsiHandler(j,N):this._parser.registerCsiHandler(j,R=>!M(R.params[0],this._optionsService.rawOptions.windowOptions)||N(R))}registerDcsHandler(j,N){return this._parser.registerDcsHandler(j,new k.DcsHandler(N))}registerEscHandler(j,N){return this._parser.registerEscHandler(j,N)}registerOscHandler(j,N){return this._parser.registerOscHandler(j,new b.OscHandler(N))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var j;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||j===void 0)&&j.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);N.hasWidth(this._activeBuffer.x)&&!N.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const j=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-j),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(j=this._bufferService.cols-1){this._activeBuffer.x=Math.min(j,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(j,N){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=j,this._activeBuffer.y=this._activeBuffer.scrollTop+N):(this._activeBuffer.x=j,this._activeBuffer.y=N),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(j,N){this._restrictCursor(),this._setCursor(this._activeBuffer.x+j,this._activeBuffer.y+N)}cursorUp(j){const N=this._activeBuffer.y-this._activeBuffer.scrollTop;return N>=0?this._moveCursor(0,-Math.min(N,j.params[0]||1)):this._moveCursor(0,-(j.params[0]||1)),!0}cursorDown(j){const N=this._activeBuffer.scrollBottom-this._activeBuffer.y;return N>=0?this._moveCursor(0,Math.min(N,j.params[0]||1)):this._moveCursor(0,j.params[0]||1),!0}cursorForward(j){return this._moveCursor(j.params[0]||1,0),!0}cursorBackward(j){return this._moveCursor(-(j.params[0]||1),0),!0}cursorNextLine(j){return this.cursorDown(j),this._activeBuffer.x=0,!0}cursorPrecedingLine(j){return this.cursorUp(j),this._activeBuffer.x=0,!0}cursorCharAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(j){return this._setCursor(j.length>=2?(j.params[1]||1)-1:0,(j.params[0]||1)-1),!0}charPosAbsolute(j){return this._setCursor((j.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(j){return this._moveCursor(j.params[0]||1,0),!0}linePosAbsolute(j){return this._setCursor(this._activeBuffer.x,(j.params[0]||1)-1),!0}vPositionRelative(j){return this._moveCursor(0,j.params[0]||1),!0}hVPosition(j){return this.cursorPosition(j),!0}tabClear(j){const N=j.params[0];return N===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:N===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let N=j.params[0]||1;for(;N--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(j){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let N=j.params[0]||1;for(;N--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(j){const N=j.params[0];return N===1&&(this._curAttrData.bg|=536870912),N!==2&&N!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(j,N,R,P=!1,I=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);K.replaceCells(N,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),I),P&&(K.isWrapped=!1)}_resetBufferLine(j,N=!1){const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);R&&(R.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),N),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+j),R.isWrapped=!1)}eraseInDisplay(j,N=!1){let R;switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:for(R=this._activeBuffer.y,this._dirtyRowTracker.markDirty(R),this._eraseInBufferLine(R++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,N);R<this._bufferService.rows;R++)this._resetBufferLine(R,N);this._dirtyRowTracker.markDirty(R);break;case 1:for(R=this._activeBuffer.y,this._dirtyRowTracker.markDirty(R),this._eraseInBufferLine(R,0,this._activeBuffer.x+1,!0,N),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(R+1).isWrapped=!1);R--;)this._resetBufferLine(R,N);this._dirtyRowTracker.markDirty(0);break;case 2:for(R=this._bufferService.rows,this._dirtyRowTracker.markDirty(R-1);R--;)this._resetBufferLine(R,N);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(j,N=!1){switch(this._restrictCursor(this._bufferService.cols),j.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,N);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,N);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,N)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(j){this._restrictCursor();let N=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;N--;)this._activeBuffer.lines.splice(I-1,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(j){this._restrictCursor();let N=j.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;N--;)this._activeBuffer.lines.splice(R,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(j){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.insertCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(j){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.deleteCells(this._activeBuffer.x,j.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(j){let N=j.params[0]||1;for(;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(j){let N=j.params[0]||1;for(;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=j.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P.deleteCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=j.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P.insertCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=j.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(j){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=j.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P.deleteCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(j){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(j.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(j){if(!this._parser.precedingCodepoint)return!0;const N=j.params[0]||1,R=new Uint32Array(N);for(let P=0;P<N;++P)R[P]=this._parser.precedingCodepoint;return this.print(R,0,R.length),!0}sendDeviceAttributesPrimary(j){return j.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(j){return j.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(j.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(j){return(this._optionsService.rawOptions.termName+"").indexOf(j)===0}setMode(j){for(let N=0;N<j.length;N++)switch(j.params[N]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(j){for(let N=0;N<j.length;N++)switch(j.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(j){for(let N=0;N<j.length;N++)switch(j.params[N]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(j){for(let N=0;N<j.length;N++)switch(j.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),j.params[N]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(j,N){const R=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:I}=this._coreMouseService,K=this._coreService,{buffers:q,cols:Q}=this._bufferService,{active:se,alt:L}=q,z=this._optionsService.rawOptions,F=ie=>ie?1:2,O=j.params[0];return J=O,G=N?O===2?4:O===4?F(K.modes.insertMode):O===12?3:O===20?F(z.convertEol):0:O===1?F(R.applicationCursorKeys):O===3?z.windowOptions.setWinLines?Q===80?2:Q===132?1:0:0:O===6?F(R.origin):O===7?F(R.wraparound):O===8?3:O===9?F(P==="X10"):O===12?F(z.cursorBlink):O===25?F(!K.isCursorHidden):O===45?F(R.reverseWraparound):O===66?F(R.applicationKeypad):O===67?4:O===1e3?F(P==="VT200"):O===1002?F(P==="DRAG"):O===1003?F(P==="ANY"):O===1004?F(R.sendFocus):O===1005?4:O===1006?F(I==="SGR"):O===1015?4:O===1016?F(I==="SGR_PIXELS"):O===1048?1:O===47||O===1047||O===1049?F(se===L):O===2004?F(R.bracketedPasteMode):0,K.triggerDataEvent(`${f.C0.ESC}[${N?"":"?"}${J};${G}$y`),!0;var J,G}_updateAttrColor(j,N,R,P,I){return N===2?(j|=50331648,j&=-16777216,j|=m.AttributeData.fromColorRGB([R,P,I])):N===5&&(j&=-50331904,j|=33554432|255&R),j}_extractColor(j,N,R){const P=[0,0,-1,0,0,0];let I=0,K=0;do{if(P[K+I]=j.params[N+K],j.hasSubParams(N+K)){const q=j.getSubParams(N+K);let Q=0;do P[1]===5&&(I=1),P[K+Q+1+I]=q[Q];while(++Q<q.length&&Q+K+1+I<P.length);break}if(P[1]===5&&K+I>=2||P[1]===2&&K+I>=5)break;P[1]&&(I=1)}while(++K+N<j.length&&K+I<P.length);for(let q=2;q<P.length;++q)P[q]===-1&&(P[q]=0);switch(P[0]){case 38:R.fg=this._updateAttrColor(R.fg,P[1],P[3],P[4],P[5]);break;case 48:R.bg=this._updateAttrColor(R.bg,P[1],P[3],P[4],P[5]);break;case 58:R.extended=R.extended.clone(),R.extended.underlineColor=this._updateAttrColor(R.extended.underlineColor,P[1],P[3],P[4],P[5])}return K}_processUnderline(j,N){N.extended=N.extended.clone(),(!~j||j>5)&&(j=1),N.extended.underlineStyle=j,N.fg|=268435456,j===0&&(N.fg&=-268435457),N.updateExtended()}_processSGR0(j){j.fg=u.DEFAULT_ATTR_DATA.fg,j.bg=u.DEFAULT_ATTR_DATA.bg,j.extended=j.extended.clone(),j.extended.underlineStyle=0,j.extended.underlineColor&=-67108864,j.updateExtended()}charAttributes(j){if(j.length===1&&j.params[0]===0)return this._processSGR0(this._curAttrData),!0;const N=j.length;let R;const P=this._curAttrData;for(let I=0;I<N;I++)R=j.params[I],R>=30&&R<=37?(P.fg&=-50331904,P.fg|=16777216|R-30):R>=40&&R<=47?(P.bg&=-50331904,P.bg|=16777216|R-40):R>=90&&R<=97?(P.fg&=-50331904,P.fg|=16777224|R-90):R>=100&&R<=107?(P.bg&=-50331904,P.bg|=16777224|R-100):R===0?this._processSGR0(P):R===1?P.fg|=134217728:R===3?P.bg|=67108864:R===4?(P.fg|=268435456,this._processUnderline(j.hasSubParams(I)?j.getSubParams(I)[0]:1,P)):R===5?P.fg|=536870912:R===7?P.fg|=67108864:R===8?P.fg|=1073741824:R===9?P.fg|=2147483648:R===2?P.bg|=134217728:R===21?this._processUnderline(2,P):R===22?(P.fg&=-134217729,P.bg&=-134217729):R===23?P.bg&=-67108865:R===24?(P.fg&=-268435457,this._processUnderline(0,P)):R===25?P.fg&=-536870913:R===27?P.fg&=-67108865:R===28?P.fg&=-1073741825:R===29?P.fg&=2147483647:R===39?(P.fg&=-67108864,P.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):R===49?(P.bg&=-67108864,P.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):R===38||R===48||R===58?I+=this._extractColor(j,I,P):R===53?P.bg|=1073741824:R===55?P.bg&=-1073741825:R===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):R===100?(P.fg&=-67108864,P.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",R);return!0}deviceStatus(j){switch(j.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const N=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${N};${R}R`)}return!0}deviceStatusPrivate(j){if(j.params[0]===6){const N=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${N};${R}R`)}return!0}softReset(j){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(j){const N=j.params[0]||1;switch(N){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const R=N%2==1;return this._optionsService.options.cursorBlink=R,!0}setScrollRegion(j){const N=j.params[0]||1;let R;return(j.length<2||(R=j.params[1])>this._bufferService.rows||R===0)&&(R=this._bufferService.rows),R>N&&(this._activeBuffer.scrollTop=N-1,this._activeBuffer.scrollBottom=R-1,this._setCursor(0,0)),!0}windowOptions(j){if(!M(j.params[0],this._optionsService.rawOptions.windowOptions))return!0;const N=j.length>1?j.params[1]:0;switch(j.params[0]){case 14:N!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:N!==0&&N!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),N!==0&&N!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:N!==0&&N!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),N!==0&&N!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(j){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(j){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(j){return this._windowTitle=j,this._onTitleChange.fire(j),!0}setIconName(j){return this._iconName=j,!0}setOrReportIndexedColor(j){const N=[],R=j.split(";");for(;R.length>1;){const P=R.shift(),I=R.shift();if(/^\d+$/.exec(P)){const K=parseInt(P);if($(K))if(I==="?")N.push({type:0,index:K});else{const q=(0,y.parseColor)(I);q&&N.push({type:1,index:K,color:q})}}}return N.length&&this._onColor.fire(N),!0}setHyperlink(j){const N=j.split(";");return!(N.length<2)&&(N[1]?this._createHyperlink(N[0],N[1]):!N[0]&&this._finishHyperlink())}_createHyperlink(j,N){this._getCurrentLinkId()&&this._finishHyperlink();const R=j.split(":");let P;const I=R.findIndex(K=>K.startsWith("id="));return I!==-1&&(P=R[I].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:N}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(j,N){const R=j.split(";");for(let P=0;P<R.length&&!(N>=this._specialColors.length);++P,++N)if(R[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[N]}]);else{const I=(0,y.parseColor)(R[P]);I&&this._onColor.fire([{type:1,index:this._specialColors[N],color:I}])}return!0}setOrReportFgColor(j){return this._setOrReportSpecialColor(j,0)}setOrReportBgColor(j){return this._setOrReportSpecialColor(j,1)}setOrReportCursorColor(j){return this._setOrReportSpecialColor(j,2)}restoreIndexedColor(j){if(!j)return this._onColor.fire([{type:2}]),!0;const N=[],R=j.split(";");for(let P=0;P<R.length;++P)if(/^\d+$/.exec(R[P])){const I=parseInt(R[P]);$(I)&&N.push({type:2,index:I})}return N.length&&this._onColor.fire(N),!0}restoreFgColor(j){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(j){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(j){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(j){return j.length!==2?(this.selectDefaultCharset(),!0):(j[0]==="/"||this._charsetService.setgCharset(E[j[0]],v.CHARSETS[j[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const j=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,j,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(j){return this._charsetService.setgLevel(j),!0}screenAlignmentPattern(){const j=new a.CellData;j.content=4194373,j.fg=this._curAttrData.fg,j.bg=this._curAttrData.bg,this._setCursor(0,0);for(let N=0;N<this._bufferService.rows;++N){const R=this._activeBuffer.ybase+this._activeBuffer.y+N,P=this._activeBuffer.lines.get(R);P&&(P.fill(j),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(j,N){const R=this._bufferService.buffer,P=this._optionsService.rawOptions;return(I=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${I}${f.C0.ESC}\\`),!0))(j==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:j==='"p'?'P1$r61;1"p':j==="r"?`P1$r${R.scrollTop+1};${R.scrollBottom+1}r`:j==="m"?"P1$r0m":j===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(j,N){this._dirtyRowTracker.markRangeDirty(j,N)}}n.InputHandler=B;let H=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,j){W>j&&(A=W,W=j,j=A),W<this.start&&(this.start=W),j>this.end&&(this.end=j)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(W){return 0<=W&&W<256}H=p([x(0,g.IBufferService)],H)},844:(_,n)=>{function h(p){for(const x of p)x.dispose();p.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const x=this._disposables.indexOf(p);x!==-1&&this._disposables.splice(x,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var x;this._isDisposed||p===this._value||((x=this._value)===null||x===void 0||x.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},n.toDisposable=function(p){return{dispose:p}},n.disposeArray=h,n.getDisposeArrayDisposable=function(p){return{dispose:()=>h(p)}}},1505:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(x,f,v){this._data[x]||(this._data[x]={}),this._data[x][f]=v}get(x,f){return this._data[x]?this._data[x][f]:void 0}clear(){this._data={}}}n.TwoKeyMap=h,n.FourKeyMap=class{constructor(){this._data=new h}set(p,x,f,v,w){this._data.get(p,x)||this._data.set(p,x,new h),this._data.get(p,x).set(f,v,w)}get(p,x,f,v){var w;return(w=this._data.get(p,x))===null||w===void 0?void 0:w.get(f,v)}clear(){this._data.clear()}}},6114:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const h=n.isNode?"node":navigator.userAgent,p=n.isNode?"node":navigator.platform;n.isFirefox=h.includes("Firefox"),n.isLegacyEdge=h.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(h),n.getSafariVersion=function(){if(!n.isSafari)return 0;const x=h.match(/Version\/(\d+)/);return x===null||x.length<2?0:parseInt(x[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),n.isIpad=p==="iPad",n.isIphone=p==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),n.isLinux=p.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(h)},6106:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let h=0;n.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(h=this._search(this._getKey(p)),this._array.splice(h,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;const x=this._getKey(p);if(x===void 0||(h=this._search(x),h===-1)||this._getKey(this._array[h])!==x)return!1;do if(this._array[h]===p)return this._array.splice(h,1),!0;while(++h<this._array.length&&this._getKey(this._array[h])===x);return!1}*getKeyIterator(p){if(this._array.length!==0&&(h=this._search(p),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===p))do yield this._array[h];while(++h<this._array.length&&this._getKey(this._array[h])===p)}forEachByKey(p,x){if(this._array.length!==0&&(h=this._search(p),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===p))do x(this._array[h]);while(++h<this._array.length&&this._getKey(this._array[h])===p)}values(){return[...this._array].values()}_search(p){let x=0,f=this._array.length-1;for(;f>=x;){let v=x+f>>1;const w=this._getKey(this._array[v]);if(w>p)f=v-1;else{if(!(w<p)){for(;v>0&&this._getKey(this._array[v-1])===p;)v--;return v}x=v+1}}return x}}},7226:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const p=h(6114);class x{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let C=0,S=0,u=w.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),S=Math.max(C,S),c=w.timeRemaining(),1.5*S>c)return u-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-C))}ms`),void this._start();u=c}this.clear()}}class f extends x{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const C=Date.now()+w;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}n.PriorityTaskQueue=f,n.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends x{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:f,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const p=h(643);n.updateWindowsModeWrappedState=function(x){const f=x.buffer.lines.get(x.buffer.ybase+x.buffer.y-1),v=f==null?void 0:f.get(x.cols-1),w=x.buffer.lines.get(x.buffer.ybase+x.buffer.y);w&&v&&(w.isWrapped=v[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&v[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new h;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=h;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,v=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=v}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=p},9092:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const p=h(6349),x=h(7226),f=h(3734),v=h(8437),w=h(4634),C=h(511),S=h(643),u=h(4863),c=h(7116);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(i,a,m){this._hasScrollback=i,this._optionsService=a,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new x.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(i,a){return new v.BufferLine(this._bufferService.cols,this.getNullCell(i),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows}_getCorrectBufferLength(i){if(!this._hasScrollback)return i;const a=i+this._optionsService.rawOptions.scrollback;return a>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:a}fillViewportRows(i){if(this.lines.length===0){i===void 0&&(i=v.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(i))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(i,a){const m=this.getNullCell(v.DEFAULT_ATTR_DATA);let g=0;const b=this._getCorrectBufferLength(a);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<i)for(let y=0;y<this.lines.length;y++)g+=+this.lines.get(y).resize(i,m);let k=0;if(this._rows<a)for(let y=this._rows;y<a;y++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(i,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(i,m)));else for(let y=this._rows;y>a;y--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const y=this.lines.length-b;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=b}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,a-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(i,a),this._cols>i))for(let k=0;k<this.lines.length;k++)g+=+this.lines.get(k).resize(i,m);this._cols=i,this._rows=a,this._memoryCleanupQueue.clear(),g>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let i=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,i=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return i}get _isReflowEnabled(){const i=this._optionsService.rawOptions.windowsPty;return i&&i.buildNumber?this._hasScrollback&&i.backend==="conpty"&&i.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(i,a){this._cols!==i&&(i>this._cols?this._reflowLarger(i,a):this._reflowSmaller(i,a))}_reflowLarger(i,a){const m=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(m.length>0){const g=(0,w.reflowLargerCreateNewLayout)(this.lines,m);(0,w.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(i,a,g.countRemoved)}}_reflowLargerAdjustViewport(i,a,m){const g=this.getNullCell(v.DEFAULT_ATTR_DATA);let b=m;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new v.BufferLine(i,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(i,a){const m=this.getNullCell(v.DEFAULT_ATTR_DATA),g=[];let b=0;for(let k=this.lines.length-1;k>=0;k--){let y=this.lines.get(k);if(!y||!y.isWrapped&&y.getTrimmedLength()<=i)continue;const E=[y];for(;y.isWrapped&&k>0;)y=this.lines.get(--k),E.unshift(y);const D=this.ybase+this.y;if(D>=k&&D<k+E.length)continue;const M=E[E.length-1].getTrimmedLength(),T=(0,w.reflowSmallerGetNewLineLengths)(E,this._cols,i),A=T.length-E.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const H=[];for(let P=0;P<A;P++){const I=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);H.push(I)}H.length>0&&(g.push({start:k+E.length+b,newLines:H}),b+=H.length),E.push(...H);let $=T.length-1,W=T[$];W===0&&($--,W=T[$]);let j=E.length-A-1,N=M;for(;j>=0;){const P=Math.min(N,W);if(E[$]===void 0)break;if(E[$].copyCellsFrom(E[j],N-P,W-P,P,!0),W-=P,W===0&&($--,W=T[$]),N-=P,N===0){j--;const I=Math.max(j,0);N=(0,w.getWrappedLineTrimmedLength)(E,I,this._cols)}}for(let P=0;P<E.length;P++)T[P]<i&&E[P].setCell(T[P],m);let R=A-B;for(;R-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+a-1)}if(g.length>0){const k=[],y=[];for(let $=0;$<this.lines.length;$++)y.push(this.lines.get($));const E=this.lines.length;let D=E-1,M=0,T=g[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let $=Math.min(this.lines.maxLength-1,E+b-1);$>=0;$--)if(T&&T.start>D+A){for(let W=T.newLines.length-1;W>=0;W--)this.lines.set($--,T.newLines[W]);$++,k.push({index:D+1,amount:T.newLines.length}),A+=T.newLines.length,T=g[++M]}else this.lines.set($,y[D--]);let B=0;for(let $=k.length-1;$>=0;$--)k[$].index+=B,this.lines.onInsertEmitter.fire(k[$]),B+=k[$].amount;const H=Math.max(0,E+b-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(i,a,m=0,g){const b=this.lines.get(i);return b?b.translateToString(a,m,g):""}getWrappedRangeForLine(i){let a=i,m=i;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:a,last:m}}setupTabStops(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0}prevStop(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i}nextStop(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i}clearMarkers(i){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===i&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1}addMarker(i){const a=new u.Marker(i);return this.markers.push(a),a.register(this.lines.onTrim(m=>{a.line-=m,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(m=>{a.line>=m.index&&(a.line+=m.amount)})),a.register(this.lines.onDelete(m=>{a.line>=m.index&&a.line<m.index+m.amount&&a.dispose(),a.line>m.index&&(a.line-=m.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)}}},8437:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const p=h(3734),x=h(511),f=h(643),v=h(482);n.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let w=0;class C{constructor(u,c,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);const a=c||x.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let m=0;m<u;++m)this.setCell(m,a);this.length=u}get(u){const c=this._data[3*u+0],i=2097151&c;return[this._data[3*u+1],2097152&c?this._combined[u]:i?(0,v.stringFromCodePoint)(i):"",c>>22,2097152&c?this._combined[u].charCodeAt(this._combined[u].length-1):i]}set(u,c){this._data[3*u+1]=c[f.CHAR_DATA_ATTR_INDEX],c[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=c[1],this._data[3*u+0]=2097152|u|c[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=c[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){const c=this._data[3*u+0];return 2097152&c?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&c}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){const c=this._data[3*u+0];return 2097152&c?this._combined[u]:2097151&c?(0,v.stringFromCodePoint)(2097151&c):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,c){return w=3*u,c.content=this._data[w+0],c.fg=this._data[w+1],c.bg=this._data[w+2],2097152&c.content&&(c.combinedData=this._combined[u]),268435456&c.bg&&(c.extended=this._extendedAttrs[u]),c}setCell(u,c){2097152&c.content&&(this._combined[u]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[u]=c.extended),this._data[3*u+0]=c.content,this._data[3*u+1]=c.fg,this._data[3*u+2]=c.bg}setCellFromCodePoint(u,c,i,a,m,g){268435456&m&&(this._extendedAttrs[u]=g),this._data[3*u+0]=c|i<<22,this._data[3*u+1]=a,this._data[3*u+2]=m}addCodepointToCell(u,c){let i=this._data[3*u+0];2097152&i?this._combined[u]+=(0,v.stringFromCodePoint)(c):(2097151&i?(this._combined[u]=(0,v.stringFromCodePoint)(2097151&i)+(0,v.stringFromCodePoint)(c),i&=-2097152,i|=2097152):i=c|4194304,this._data[3*u+0]=i)}insertCells(u,c,i,a){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs),c<this.length-u){const m=new x.CellData;for(let g=this.length-u-c-1;g>=0;--g)this.setCell(u+c+g,this.loadCell(u+g,m));for(let g=0;g<c;++g)this.setCell(u+g,i)}else for(let m=u;m<this.length;++m)this.setCell(m,i);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs)}deleteCells(u,c,i,a){if(u%=this.length,c<this.length-u){const m=new x.CellData;for(let g=0;g<this.length-u-c;++g)this.setCell(u+g,this.loadCell(u+c+g,m));for(let g=this.length-c;g<this.length;++g)this.setCell(g,i)}else for(let m=u;m<this.length;++m)this.setCell(m,i);u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs)}replaceCells(u,c,i,a,m=!1){if(m)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodePoint(c,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs);u<c&&u<this.length;)this.isProtected(u)||this.setCell(u,i),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new p.ExtendedAttrs);u<c&&u<this.length;)this.setCell(u++,i)}resize(u,c){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const a=new Uint32Array(i);a.set(this._data),this._data=a}for(let a=this.length;a<u;++a)this.setCell(a,c)}else{this._data=this._data.subarray(0,i);const a=Object.keys(this._combined);for(let g=0;g<a.length;g++){const b=parseInt(a[g],10);b>=u&&delete this._combined[b]}const m=Object.keys(this._extendedAttrs);for(let g=0;g<m.length;g++){const b=parseInt(m[g],10);b>=u&&delete this._extendedAttrs[b]}}return this.length=u,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,c=!1){if(c)for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,u);else{this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(const c in u._combined)this._combined[c]=u._combined[c];this._extendedAttrs={};for(const c in u._extendedAttrs)this._extendedAttrs[c]=u._extendedAttrs[c];this.isWrapped=u.isWrapped}clone(){const u=new C(0);u._data=new Uint32Array(this._data),u.length=this.length;for(const c in this._combined)u._combined[c]=this._combined[c];for(const c in this._extendedAttrs)u._extendedAttrs[c]=this._extendedAttrs[c];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}getNoBgTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0]||50331648&this._data[3*u+2])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,c,i,a,m){const g=u._data;if(m)for(let k=a-1;k>=0;k--){for(let y=0;y<3;y++)this._data[3*(i+k)+y]=g[3*(c+k)+y];268435456&g[3*(c+k)+2]&&(this._extendedAttrs[i+k]=u._extendedAttrs[c+k])}else for(let k=0;k<a;k++){for(let y=0;y<3;y++)this._data[3*(i+k)+y]=g[3*(c+k)+y];268435456&g[3*(c+k)+2]&&(this._extendedAttrs[i+k]=u._extendedAttrs[c+k])}const b=Object.keys(u._combined);for(let k=0;k<b.length;k++){const y=parseInt(b[k],10);y>=c&&(this._combined[y-c+i]=u._combined[y])}}translateToString(u=!1,c=0,i=this.length){u&&(i=Math.min(i,this.getTrimmedLength()));let a="";for(;c<i;){const m=this._data[3*c+0],g=2097151&m;a+=2097152&m?this._combined[c]:g?(0,v.stringFromCodePoint)(g):f.WHITESPACE_CELL_CHAR,c+=m>>22||1}return a}}n.BufferLine=C},4841:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(h,p){if(h.start.y>h.end.y)throw new Error(`Buffer range end (${h.end.x}, ${h.end.y}) cannot be before start (${h.start.x}, ${h.start.y})`);return p*(h.end.y-h.start.y)+(h.end.x-h.start.x+1)}},4634:(_,n)=>{function h(p,x,f){if(x===p.length-1)return p[x].getTrimmedLength();const v=!p[x].hasContent(f-1)&&p[x].getWidth(f-1)===1,w=p[x+1].getWidth(0)===2;return v&&w?f-1:f}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(p,x,f,v,w){const C=[];for(let S=0;S<p.length-1;S++){let u=S,c=p.get(++u);if(!c.isWrapped)continue;const i=[p.get(S)];for(;u<p.length&&c.isWrapped;)i.push(c),c=p.get(++u);if(v>=S&&v<u){S+=i.length-1;continue}let a=0,m=h(i,a,x),g=1,b=0;for(;g<i.length;){const y=h(i,g,x),E=y-b,D=f-m,M=Math.min(E,D);i[a].copyCellsFrom(i[g],b,m,M,!1),m+=M,m===f&&(a++,m=0),b+=M,b===y&&(g++,b=0),m===0&&a!==0&&i[a-1].getWidth(f-1)===2&&(i[a].copyCellsFrom(i[a-1],f-1,m++,1,!1),i[a-1].setCell(f-1,w))}i[a].replaceCells(m,f,w);let k=0;for(let y=i.length-1;y>0&&(y>a||i[y].getTrimmedLength()===0);y--)k++;k>0&&(C.push(S+i.length-k),C.push(k)),S+=i.length-1}return C},n.reflowLargerCreateNewLayout=function(p,x){const f=[];let v=0,w=x[v],C=0;for(let S=0;S<p.length;S++)if(w===S){const u=x[++v];p.onDeleteEmitter.fire({index:S-C,amount:u}),S+=u-1,C+=u,w=x[++v]}else f.push(S);return{layout:f,countRemoved:C}},n.reflowLargerApplyNewLayout=function(p,x){const f=[];for(let v=0;v<x.length;v++)f.push(p.get(x[v]));for(let v=0;v<f.length;v++)p.set(v,f[v]);p.length=x.length},n.reflowSmallerGetNewLineLengths=function(p,x,f){const v=[],w=p.map((c,i)=>h(p,i,x)).reduce((c,i)=>c+i);let C=0,S=0,u=0;for(;u<w;){if(w-u<f){v.push(w-u);break}C+=f;const c=h(p,S,x);C>c&&(C-=c,S++);const i=p[S].getWidth(C-1)===2;i&&C--;const a=i?f-1:f;v.push(a),u+=a}return v},n.getWrappedLineTrimmedLength=h},5295:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const p=h(8460),x=h(844),f=h(9092);class v extends x.Disposable{constructor(C,S){super(),this._optionsService=C,this._bufferService=S,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,S){this._normal.resize(C,S),this._alt.resize(C,S),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}n.BufferSet=v},511:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const p=h(482),x=h(643),f=h(3734);class v extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const S=new v;return S.setFromCharData(C),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[x.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(C[x.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(C[x.CHAR_DATA_CHAR_INDEX].length===2){const u=C[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){const c=C[x.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(u-55296)+c-56320+65536|C[x.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=C[x.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[x.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=C[x.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[x.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=v},643:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const p=h(8460),x=h(844);class f{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,x.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}n.Marker=f,f._nextId=1},7116:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},n.CHARSETS.A={"#":""},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},n.CHARSETS.C=n.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.E=n.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},n.CHARSETS.H=n.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(_,n)=>{var h,p,x;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(h||(n.C0=h={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(p||(n.C1=p={})),function(f){f.ST=`${h.ESC}\\`}(x||(n.C1_ESCAPED=x={}))},7399:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const p=h(2584),x={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(f,v,w,C){const S={type:0,cancel:!1,key:void 0},u=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?S.key=v?p.C0.ESC+"OA":p.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?S.key=v?p.C0.ESC+"OD":p.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?S.key=v?p.C0.ESC+"OC":p.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(S.key=v?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(f.altKey){S.key=p.C0.ESC+p.C0.DEL;break}S.key=p.C0.DEL;break;case 9:if(f.shiftKey){S.key=p.C0.ESC+"[Z";break}S.key=p.C0.HT,S.cancel=!0;break;case 13:S.key=f.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,S.cancel=!0;break;case 27:S.key=p.C0.ESC,f.altKey&&(S.key=p.C0.ESC+p.C0.ESC),S.cancel=!0;break;case 37:if(f.metaKey)break;u?(S.key=p.C0.ESC+"[1;"+(u+1)+"D",S.key===p.C0.ESC+"[1;3D"&&(S.key=p.C0.ESC+(w?"b":"[1;5D"))):S.key=v?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(f.metaKey)break;u?(S.key=p.C0.ESC+"[1;"+(u+1)+"C",S.key===p.C0.ESC+"[1;3C"&&(S.key=p.C0.ESC+(w?"f":"[1;5C"))):S.key=v?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(f.metaKey)break;u?(S.key=p.C0.ESC+"[1;"+(u+1)+"A",w||S.key!==p.C0.ESC+"[1;3A"||(S.key=p.C0.ESC+"[1;5A")):S.key=v?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(f.metaKey)break;u?(S.key=p.C0.ESC+"[1;"+(u+1)+"B",w||S.key!==p.C0.ESC+"[1;3B"||(S.key=p.C0.ESC+"[1;5B")):S.key=v?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(S.key=p.C0.ESC+"[2~");break;case 46:S.key=u?p.C0.ESC+"[3;"+(u+1)+"~":p.C0.ESC+"[3~";break;case 36:S.key=u?p.C0.ESC+"[1;"+(u+1)+"H":v?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:S.key=u?p.C0.ESC+"[1;"+(u+1)+"F":v?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:f.shiftKey?S.type=2:f.ctrlKey?S.key=p.C0.ESC+"[5;"+(u+1)+"~":S.key=p.C0.ESC+"[5~";break;case 34:f.shiftKey?S.type=3:f.ctrlKey?S.key=p.C0.ESC+"[6;"+(u+1)+"~":S.key=p.C0.ESC+"[6~";break;case 112:S.key=u?p.C0.ESC+"[1;"+(u+1)+"P":p.C0.ESC+"OP";break;case 113:S.key=u?p.C0.ESC+"[1;"+(u+1)+"Q":p.C0.ESC+"OQ";break;case 114:S.key=u?p.C0.ESC+"[1;"+(u+1)+"R":p.C0.ESC+"OR";break;case 115:S.key=u?p.C0.ESC+"[1;"+(u+1)+"S":p.C0.ESC+"OS";break;case 116:S.key=u?p.C0.ESC+"[15;"+(u+1)+"~":p.C0.ESC+"[15~";break;case 117:S.key=u?p.C0.ESC+"[17;"+(u+1)+"~":p.C0.ESC+"[17~";break;case 118:S.key=u?p.C0.ESC+"[18;"+(u+1)+"~":p.C0.ESC+"[18~";break;case 119:S.key=u?p.C0.ESC+"[19;"+(u+1)+"~":p.C0.ESC+"[19~";break;case 120:S.key=u?p.C0.ESC+"[20;"+(u+1)+"~":p.C0.ESC+"[20~";break;case 121:S.key=u?p.C0.ESC+"[21;"+(u+1)+"~":p.C0.ESC+"[21~";break;case 122:S.key=u?p.C0.ESC+"[23;"+(u+1)+"~":p.C0.ESC+"[23~";break;case 123:S.key=u?p.C0.ESC+"[24;"+(u+1)+"~":p.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(w&&!C||!f.altKey||f.metaKey)!w||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?S.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(S.key=p.C0.US),f.key==="@"&&(S.key=p.C0.NUL)):f.keyCode===65&&(S.type=1);else{const c=x[f.keyCode],i=c==null?void 0:c[f.shiftKey?1:0];if(i)S.key=p.C0.ESC+i;else if(f.keyCode>=65&&f.keyCode<=90){const a=f.ctrlKey?f.keyCode-64:f.keyCode+32;let m=String.fromCharCode(a);f.shiftKey&&(m=m.toUpperCase()),S.key=p.C0.ESC+m}else if(f.keyCode===32)S.key=p.C0.ESC+(f.ctrlKey?p.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let a=f.code.slice(3,4);f.shiftKey||(a=a.toLowerCase()),S.key=p.C0.ESC+a,S.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?S.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?S.key=p.C0.NUL:f.keyCode>=51&&f.keyCode<=55?S.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?S.key=p.C0.DEL:f.keyCode===219?S.key=p.C0.ESC:f.keyCode===220?S.key=p.C0.FS:f.keyCode===221&&(S.key=p.C0.GS)}return S}},482:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},n.utf32ToString=function(h,p=0,x=h.length){let f="";for(let v=p;v<x;++v){let w=h[v];w>65535?(w-=65536,f+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):f+=String.fromCharCode(w)}return f},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,p){const x=h.length;if(!x)return 0;let f=0,v=0;if(this._interim){const w=h.charCodeAt(v++);56320<=w&&w<=57343?p[f++]=1024*(this._interim-55296)+w-56320+65536:(p[f++]=this._interim,p[f++]=w),this._interim=0}for(let w=v;w<x;++w){const C=h.charCodeAt(w);if(55296<=C&&C<=56319){if(++w>=x)return this._interim=C,f;const S=h.charCodeAt(w);56320<=S&&S<=57343?p[f++]=1024*(C-55296)+S-56320+65536:(p[f++]=C,p[f++]=S)}else C!==65279&&(p[f++]=C)}return f}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,p){const x=h.length;if(!x)return 0;let f,v,w,C,S=0,u=0,c=0;if(this.interim[0]){let m=!1,g=this.interim[0];g&=(224&g)==192?31:(240&g)==224?15:7;let b,k=0;for(;(b=63&this.interim[++k])&&k<4;)g<<=6,g|=b;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=y-k;for(;c<E;){if(c>=x)return 0;if(b=h[c++],(192&b)!=128){c--,m=!0;break}this.interim[k++]=b,g<<=6,g|=63&b}m||(y===2?g<128?c--:p[S++]=g:y===3?g<2048||g>=55296&&g<=57343||g===65279||(p[S++]=g):g<65536||g>1114111||(p[S++]=g)),this.interim.fill(0)}const i=x-4;let a=c;for(;a<x;){for(;!(!(a<i)||128&(f=h[a])||128&(v=h[a+1])||128&(w=h[a+2])||128&(C=h[a+3]));)p[S++]=f,p[S++]=v,p[S++]=w,p[S++]=C,a+=4;if(f=h[a++],f<128)p[S++]=f;else if((224&f)==192){if(a>=x)return this.interim[0]=f,S;if(v=h[a++],(192&v)!=128){a--;continue}if(u=(31&f)<<6|63&v,u<128){a--;continue}p[S++]=u}else if((240&f)==224){if(a>=x)return this.interim[0]=f,S;if(v=h[a++],(192&v)!=128){a--;continue}if(a>=x)return this.interim[0]=f,this.interim[1]=v,S;if(w=h[a++],(192&w)!=128){a--;continue}if(u=(15&f)<<12|(63&v)<<6|63&w,u<2048||u>=55296&&u<=57343||u===65279)continue;p[S++]=u}else if((248&f)==240){if(a>=x)return this.interim[0]=f,S;if(v=h[a++],(192&v)!=128){a--;continue}if(a>=x)return this.interim[0]=f,this.interim[1]=v,S;if(w=h[a++],(192&w)!=128){a--;continue}if(a>=x)return this.interim[0]=f,this.interim[1]=v,this.interim[2]=w,S;if(C=h[a++],(192&C)!=128){a--;continue}if(u=(7&f)<<18|(63&v)<<12|(63&w)<<6|63&C,u<65536||u>1114111)continue;p[S++]=u}}return S}}},225:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const h=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],p=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let x;n.UnicodeV6=class{constructor(){if(this.version="6",!x){x=new Uint8Array(65536),x.fill(1),x[0]=0,x.fill(0,1,32),x.fill(0,127,160),x.fill(2,4352,4448),x[9001]=2,x[9002]=2,x.fill(2,11904,42192),x[12351]=1,x.fill(2,44032,55204),x.fill(2,63744,64256),x.fill(2,65040,65050),x.fill(2,65072,65136),x.fill(2,65280,65377),x.fill(2,65504,65511);for(let f=0;f<h.length;++f)x.fill(0,h[f][0],h[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?x[f]:function(v,w){let C,S=0,u=w.length-1;if(v<w[0][0]||v>w[u][1])return!1;for(;u>=S;)if(C=S+u>>1,v>w[C][1])S=C+1;else{if(!(v<w[C][0]))return!0;u=C-1}return!1}(f,p)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const p=h(8460),x=h(844);class f extends x.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(C)}_innerWrite(w=0,C=!0){const S=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const u=this._writeBuffer[this._bufferOffset],c=this._action(u,C);if(c){const a=m=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(S,m);return void c.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(a)}const i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=f},5941:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const h=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function x(f,v){const w=f.toString(16),C=w.length<2?"0"+w:w;switch(v){case 4:return w[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}n.parseColor=function(f){if(!f)return;let v=f.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const w=h.exec(v);if(w){const C=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/C*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/C*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/C*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),p.exec(v)&&[3,6,9,12].includes(v.length))){const w=v.length/3,C=[0,0,0];for(let S=0;S<3;++S){const u=parseInt(v.slice(w*S,w*S+w),16);C[S]=w===1?u<<4:w===2?u:w===3?u>>4:u>>8}return C}},n.toRgbString=function(f,v=16){const[w,C,S]=f;return`rgb:${x(w,v)}/${x(C,v)}/${x(S,v)}`}},5770:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const p=h(482),x=h(8742),f=h(5770),v=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(C,S){this._handlers[C]===void 0&&(this._handlers[C]=[]);const u=this._handlers[C];return u.push(S),{dispose:()=>{const c=u.indexOf(S);c!==-1&&u.splice(c,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(C,S){if(this.reset(),this._ident=C,this._active=this._handlers[C]||v,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(C,S,u){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(C,S,u);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(C,S,u))}unhook(C,S=!0){if(this._active.length){let u=!1,c=this._active.length-1,i=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,u=S,i=this._stack.fallThrough,this._stack.paused=!1),!i&&u===!1){for(;c>=0&&(u=this._active[c].unhook(C),u!==!0);c--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,u;c--}for(;c>=0;c--)if(u=this._active[c].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",C);this._active=v,this._ident=0}};const w=new x.Params;w.addParam(0),n.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=w,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():w,this._data="",this._hitLimit=!1}put(C,S,u){this._hitLimit||(this._data+=(0,p.utf32ToString)(C,S,u),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let S=!1;if(this._hitLimit)S=!1;else if(C&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(u=>(this._params=w,this._data="",this._hitLimit=!1,u));return this._params=w,this._data="",this._hitLimit=!1,S}}},2015:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const p=h(844),x=h(8742),f=h(6242),v=h(6351);class w{constructor(c){this.table=new Uint8Array(c)}setDefault(c,i){this.table.fill(c<<4|i)}add(c,i,a,m){this.table[i<<8|c]=a<<4|m}addMany(c,i,a,m){for(let g=0;g<c.length;g++)this.table[i<<8|c[g]]=a<<4|m}}n.TransitionTable=w;const C=160;n.VT500_TRANSITION_TABLE=function(){const u=new w(4095),c=Array.apply(null,Array(256)).map((k,y)=>y),i=(k,y)=>c.slice(k,y),a=i(32,127),m=i(0,24);m.push(25),m.push.apply(m,i(28,32));const g=i(0,14);let b;for(b in u.setDefault(1,0),u.addMany(a,0,2,0),g)u.addMany([24,26,153,154],b,3,0),u.addMany(i(128,144),b,3,0),u.addMany(i(144,152),b,3,0),u.add(156,b,0,0),u.add(27,b,11,1),u.add(157,b,4,8),u.addMany([152,158,159],b,0,7),u.add(155,b,11,3),u.add(144,b,11,9);return u.addMany(m,0,3,0),u.addMany(m,1,3,1),u.add(127,1,0,1),u.addMany(m,8,0,8),u.addMany(m,3,3,3),u.add(127,3,0,3),u.addMany(m,4,3,4),u.add(127,4,0,4),u.addMany(m,6,3,6),u.addMany(m,5,3,5),u.add(127,5,0,5),u.addMany(m,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(a,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(i(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(a,7,0,7),u.addMany(m,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(i(64,127),3,7,0),u.addMany(i(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(i(48,60),4,8,4),u.addMany(i(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(i(32,64),6,0,6),u.add(127,6,0,6),u.addMany(i(64,127),6,0,0),u.addMany(i(32,48),3,9,5),u.addMany(i(32,48),5,9,5),u.addMany(i(48,64),5,0,6),u.addMany(i(64,127),5,7,0),u.addMany(i(32,48),4,9,5),u.addMany(i(32,48),1,9,2),u.addMany(i(32,48),2,9,2),u.addMany(i(48,127),2,10,0),u.addMany(i(48,80),1,10,0),u.addMany(i(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(i(96,127),1,10,0),u.add(80,1,11,9),u.addMany(m,9,0,9),u.add(127,9,0,9),u.addMany(i(28,32),9,0,9),u.addMany(i(32,48),9,9,12),u.addMany(i(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(m,11,0,11),u.addMany(i(32,128),11,0,11),u.addMany(i(28,32),11,0,11),u.addMany(m,10,0,10),u.add(127,10,0,10),u.addMany(i(28,32),10,0,10),u.addMany(i(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(i(32,48),10,9,12),u.addMany(m,12,0,12),u.add(127,12,0,12),u.addMany(i(28,32),12,0,12),u.addMany(i(32,48),12,9,12),u.addMany(i(48,64),12,0,11),u.addMany(i(64,127),12,12,13),u.addMany(i(64,127),10,12,13),u.addMany(i(64,127),9,12,13),u.addMany(m,13,13,13),u.addMany(a,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(C,0,2,0),u.add(C,8,5,8),u.add(C,6,0,6),u.add(C,11,0,11),u.add(C,13,13,13),u}();class S extends p.Disposable{constructor(c=n.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new x.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(i,a,m)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,a)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,i=[64,126]){let a=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=c.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let g=0;g<c.intermediates.length;++g){const b=c.intermediates.charCodeAt(g);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=b}}if(c.final.length!==1)throw new Error("final must be a single byte");const m=c.final.charCodeAt(0);if(i[0]>m||m>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return a<<=8,a|=m,a}identToString(c){const i=[];for(;c;)i.push(String.fromCharCode(255&c)),c>>=8;return i.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,i){const a=this._identifier(c,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const m=this._escHandlers[a];return m.push(i),{dispose:()=>{const g=m.indexOf(i);g!==-1&&m.splice(g,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,i){this._executeHandlers[c.charCodeAt(0)]=i}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,i){const a=this._identifier(c);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const m=this._csiHandlers[a];return m.push(i),{dispose:()=>{const g=m.indexOf(i);g!==-1&&m.splice(g,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,i){return this._dcsParser.registerHandler(this._identifier(c),i)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,i){return this._oscParser.registerHandler(c,i)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,i,a,m,g){this._parseStack.state=c,this._parseStack.handlers=i,this._parseStack.handlerPos=a,this._parseStack.transition=m,this._parseStack.chunkPos=g}parse(c,i,a){let m,g=0,b=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&E>-1){for(;E>=0&&(m=y[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._parseStack.handlerPos=E,m}this._parseStack.handlers=[];break;case 4:if(a===!1&&E>-1){for(;E>=0&&(m=y[E](),m!==!0);E--)if(m instanceof Promise)return this._parseStack.handlerPos=E,m}this._parseStack.handlers=[];break;case 6:if(g=c[this._parseStack.chunkPos],m=this._dcsParser.unhook(g!==24&&g!==26,a),m)return m;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=c[this._parseStack.chunkPos],m=this._oscParser.end(g!==24&&g!==26,a),m)return m;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let y=k;y<i;++y){switch(g=c[y],b=this._transitions.table[this.currentState<<8|(g<160?g:C)],b>>4){case 2:for(let A=y+1;;++A){if(A>=i||(g=c[A])<32||g>126&&g<C){this._printHandler(c,y,A),y=A-1;break}if(++A>=i||(g=c[A])<32||g>126&&g<C){this._printHandler(c,y,A),y=A-1;break}if(++A>=i||(g=c[A])<32||g>126&&g<C){this._printHandler(c,y,A),y=A-1;break}if(++A>=i||(g=c[A])<32||g>126&&g<C){this._printHandler(c,y,A),y=A-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|g];let D=E?E.length-1:-1;for(;D>=0&&(m=E[D](this._params),m!==!0);D--)if(m instanceof Promise)return this._preserveStack(3,E,D,b,y),m;D<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++y<i&&(g=c[y])>47&&g<60);y--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:const M=this._escHandlers[this._collect<<8|g];let T=M?M.length-1:-1;for(;T>=0&&(m=M[T](),m!==!0);T--)if(m instanceof Promise)return this._preserveStack(4,M,T,b,y),m;T<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(let A=y+1;;++A)if(A>=i||(g=c[A])===24||g===26||g===27||g>127&&g<C){this._dcsParser.put(c,y,A),y=A-1;break}break;case 14:if(m=this._dcsParser.unhook(g!==24&&g!==26),m)return this._preserveStack(6,[],0,b,y),m;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let A=y+1;;A++)if(A>=i||(g=c[A])<32||g>127&&g<C){this._oscParser.put(c,y,A),y=A-1;break}break;case 6:if(m=this._oscParser.end(g!==24&&g!==26),m)return this._preserveStack(5,[],0,b,y),m;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}n.EscapeSequenceParser=S},6242:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const p=h(5770),x=h(482),f=[];n.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,w){this._handlers[v]===void 0&&(this._handlers[v]=[]);const C=this._handlers[v];return C.push(w),{dispose:()=>{const S=C.indexOf(w);S!==-1&&C.splice(S,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,w,C){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(v,w,C);else this._handlerFb(this._id,"PUT",(0,x.utf32ToString)(v,w,C))}start(){this.reset(),this._state=1}put(v,w,C){if(this._state!==3){if(this._state===1)for(;w<C;){const S=v[w++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&C-w>0&&this._put(v,w,C)}}end(v,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,S=this._active.length-1,u=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,C=w,u=this._stack.fallThrough,this._stack.paused=!1),!u&&C===!1){for(;S>=0&&(C=this._active[S].end(v),C!==!0);S--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,C;S--}for(;S>=0;S--)if(C=this._active[S].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",v);this._active=f,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,w,C){this._hitLimit||(this._data+=(0,x.utf32ToString)(v,w,C),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let w=!1;if(this._hitLimit)w=!1;else if(v&&(w=this._handler(this._data),w instanceof Promise))return w.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,w}}},8742:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const h=2147483647;class p{static fromArray(f){const v=new p;if(!f.length)return v;for(let w=Array.isArray(f[0])?1:0;w<f.length;++w){const C=f[w];if(Array.isArray(C))for(let S=0;S<C.length;++S)v.addSubParam(C[S]);else v.addParam(C)}return v}constructor(f=32,v=32){if(this.maxLength=f,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new p(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let v=0;v<this.length;++v){f.push(this.params[v]);const w=this._subParamsIdx[v]>>8,C=255&this._subParamsIdx[v];C-w>0&&f.push(Array.prototype.slice.call(this._subParams,w,C))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>h?h:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>h?h:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const v=this._subParamsIdx[f]>>8,w=255&this._subParamsIdx[f];return w-v>0?this._subParams.subarray(v,w):null}getSubParamsAll(){const f={};for(let v=0;v<this.length;++v){const w=this._subParamsIdx[v]>>8,C=255&this._subParamsIdx[v];C-w>0&&(f[v]=this._subParams.slice(w,C))}return f}addDigit(f){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,C=w[v-1];w[v-1]=~C?Math.min(10*C+f,h):f}}n.Params=p},5741:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()}loadAddon(h,p){const x={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(x),p.dispose=()=>this._wrappedAddonDispose(x),p.activate(h)}_wrappedAddonDispose(h){if(h.isDisposed)return;let p=-1;for(let x=0;x<this._addons.length;x++)if(this._addons[x]===h){p=x;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(p,1)}}},8771:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const p=h(3785),x=h(511);n.BufferApiView=class{constructor(f,v){this._buffer=f,this.type=v}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const v=this._buffer.lines.get(f);if(v)return new p.BufferLineApiView(v)}getNullCell(){return new x.CellData}}},3785:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const p=h(511);n.BufferLineApiView=class{constructor(x){this._line=x}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(x,f){if(!(x<0||x>=this._line.length))return f?(this._line.loadCell(x,f),f):this._line.loadCell(x,new p.CellData)}translateToString(x,f,v){return this._line.translateToString(x,f,v)}}},8285:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const p=h(8771),x=h(8460),f=h(844);class v extends f.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new x.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}n.BufferNamespaceApi=v},7975:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(h){this._core=h}registerCsiHandler(h,p){return this._core.registerCsiHandler(h,x=>p(x.toArray()))}addCsiHandler(h,p){return this.registerCsiHandler(h,p)}registerDcsHandler(h,p){return this._core.registerDcsHandler(h,(x,f)=>p(x,f.toArray()))}addDcsHandler(h,p){return this.registerDcsHandler(h,p)}registerEscHandler(h,p){return this._core.registerEscHandler(h,p)}addEscHandler(h,p){return this.registerEscHandler(h,p)}registerOscHandler(h,p){return this._core.registerOscHandler(h,p)}addOscHandler(h,p){return this.registerOscHandler(h,p)}}},7090:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(h){this._core=h}register(h){this._core.unicodeService.register(h)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(h){this._core.unicodeService.activeVersion=h}}},744:function(_,n,h){var p=this&&this.__decorate||function(u,c,i,a){var m,g=arguments.length,b=g<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(u,c,i,a);else for(var k=u.length-1;k>=0;k--)(m=u[k])&&(b=(g<3?m(b):g>3?m(c,i,b):m(c,i))||b);return g>3&&b&&Object.defineProperty(c,i,b),b},x=this&&this.__param||function(u,c){return function(i,a){c(i,a,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const f=h(8460),v=h(844),w=h(5295),C=h(2585);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let S=n.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(u,this))}resize(u,c){this.cols=u,this.rows=c,this.buffers.resize(u,c),this._onResize.fire({cols:u,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,c=!1){const i=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===u.fg&&a.getBg(0)===u.bg||(a=i.getBlankLine(u,c),this._cachedBlankLine=a),a.isWrapped=c;const m=i.ybase+i.scrollTop,g=i.ybase+i.scrollBottom;if(i.scrollTop===0){const b=i.lines.isFull;g===i.lines.length-1?b?i.lines.recycle().copyFrom(a):i.lines.push(a.clone()):i.lines.splice(g+1,0,a.clone()),b?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const b=g-m+1;i.lines.shiftElements(m+1,b-1,-1),i.lines.set(g,a.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(u,c,i){const a=this.buffer;if(u<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else u+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const m=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+u,a.ybase),0),m!==a.ydisp&&(c||this._onScroll.fire(a.ydisp))}};n.BufferService=S=p([x(0,C.IOptionsService)],S)},7994:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(h){this.glevel=h,this.charset=this._charsets[h]}setgCharset(h,p){this._charsets[h]=p,this.glevel===h&&(this.charset=p)}}},1753:function(_,n,h){var p=this&&this.__decorate||function(a,m,g,b){var k,y=arguments.length,E=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,m,g,b);else for(var D=a.length-1;D>=0;D--)(k=a[D])&&(E=(y<3?k(E):y>3?k(m,g,E):k(m,g))||E);return y>3&&E&&Object.defineProperty(m,g,E),E},x=this&&this.__param||function(a,m){return function(g,b){m(g,b,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const f=h(2585),v=h(8460),w=h(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function S(a,m){let g=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(g|=64,g|=a.action):(g|=3&a.button,4&a.button&&(g|=64),8&a.button&&(g|=128),a.action===32?g|=32:a.action!==0||m||(g|=3)),g}const u=String.fromCharCode,c={DEFAULT:a=>{const m=[S(a,!1)+32,a.col+32,a.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${u(m[0])}${u(m[1])}${u(m[2])}`},SGR:a=>{const m=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${S(a,!0)};${a.col};${a.row}${m}`},SGR_PIXELS:a=>{const m=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${S(a,!0)};${a.x};${a.y}${m}`}};let i=n.CoreMouseService=class extends w.Disposable{constructor(a,m){super(),this._bufferService=a,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const g of Object.keys(C))this.addProtocol(g,C[g]);for(const g of Object.keys(c))this.addEncoding(g,c[g]);this.reset()}addProtocol(a,m){this._protocols[a]=m}addEncoding(a,m){this._encodings[a]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const m=this._encodings[this._activeEncoding](a);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,m,g){if(g){if(a.x!==m.x||a.y!==m.y)return!1}else if(a.col!==m.col||a.row!==m.row)return!1;return a.button===m.button&&a.action===m.action&&a.ctrl===m.ctrl&&a.alt===m.alt&&a.shift===m.shift}};n.CoreMouseService=i=p([x(0,f.IBufferService),x(1,f.ICoreService)],i)},6975:function(_,n,h){var p=this&&this.__decorate||function(i,a,m,g){var b,k=arguments.length,y=k<3?a:g===null?g=Object.getOwnPropertyDescriptor(a,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,a,m,g);else for(var E=i.length-1;E>=0;E--)(b=i[E])&&(y=(k<3?b(y):k>3?b(a,m,y):b(a,m))||y);return k>3&&y&&Object.defineProperty(a,m,y),y},x=this&&this.__param||function(i,a){return function(m,g){a(m,g,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const f=h(1439),v=h(8460),w=h(844),C=h(2585),S=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=n.CoreService=class extends w.Disposable{constructor(i,a,m){super(),this._bufferService=i,this._logService=a,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(u)}reset(){this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(u)}triggerDataEvent(i,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${i}"`,()=>i.split("").map(g=>g.charCodeAt(0))),this._onData.fire(i)}triggerBinaryEvent(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${i}"`,()=>i.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(i))}};n.CoreService=c=p([x(0,C.IBufferService),x(1,C.ILogService),x(2,C.IOptionsService)],c)},9074:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const p=h(8055),x=h(8460),f=h(844),v=h(6106);let w=0,C=0;class S extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(i=>i==null?void 0:i.marker.line),this._onDecorationRegistered=this.register(new x.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new x.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(i){if(i.marker.isDisposed)return;const a=new u(i);if(a){const m=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),m.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const i of this._decorations.values())i.dispose();this._decorations.clear()}*getDecorationsAtCell(i,a,m){var g,b,k;let y=0,E=0;for(const D of this._decorations.getKeyIterator(a))y=(g=D.options.x)!==null&&g!==void 0?g:0,E=y+((b=D.options.width)!==null&&b!==void 0?b:1),i>=y&&i<E&&(!m||((k=D.options.layer)!==null&&k!==void 0?k:"bottom")===m)&&(yield D)}forEachDecorationAtCell(i,a,m,g){this._decorations.forEachByKey(a,b=>{var k,y,E;w=(k=b.options.x)!==null&&k!==void 0?k:0,C=w+((y=b.options.width)!==null&&y!==void 0?y:1),i>=w&&i<C&&(!m||((E=b.options.layer)!==null&&E!==void 0?E:"bottom")===m)&&g(b)})}}n.DecorationService=S;class u extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(i){super(),this.options=i,this.onRenderEmitter=this.register(new x.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new x.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=i.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const p=h(2585),x=h(8343);class f{constructor(...w){this._entries=new Map;for(const[C,S]of w)this.set(C,S)}set(w,C){const S=this._entries.get(w);return this._entries.set(w,C),S}forEach(w){for(const[C,S]of this._entries.entries())w(C,S)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}n.ServiceCollection=f,n.InstantiationService=class{constructor(){this._services=new f,this._services.set(p.IInstantiationService,this)}setService(v,w){this._services.set(v,w)}getService(v){return this._services.get(v)}createInstance(v,...w){const C=(0,x.getServiceDependencies)(v).sort((c,i)=>c.index-i.index),S=[];for(const c of C){const i=this._services.get(c.id);if(!i)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${c.id}.`);S.push(i)}const u=C.length>0?C[0].index:w.length;if(w.length!==u)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${u+1} conflicts with ${w.length} static arguments`);return new v(...w,...S)}}},7866:function(_,n,h){var p=this&&this.__decorate||function(u,c,i,a){var m,g=arguments.length,b=g<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(u,c,i,a);else for(var k=u.length-1;k>=0;k--)(m=u[k])&&(b=(g<3?m(b):g>3?m(c,i,b):m(c,i))||b);return g>3&&b&&Object.defineProperty(c,i,b),b},x=this&&this.__param||function(u,c){return function(i,a){c(i,a,u)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const f=h(844),v=h(2585),w={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let C,S=n.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let c=0;c<u.length;c++)typeof u[c]=="function"&&(u[c]=u[c]())}_log(u,c,i){this._evalLazyOptionalParams(i),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...i)}trace(u,...c){var i,a;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((a=(i=this._optionsService.options.logger)===null||i===void 0?void 0:i.trace.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,u,c)}debug(u,...c){var i,a;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((a=(i=this._optionsService.options.logger)===null||i===void 0?void 0:i.debug.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,u,c)}info(u,...c){var i,a;this._logLevel<=v.LogLevelEnum.INFO&&this._log((a=(i=this._optionsService.options.logger)===null||i===void 0?void 0:i.info.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.info,u,c)}warn(u,...c){var i,a;this._logLevel<=v.LogLevelEnum.WARN&&this._log((a=(i=this._optionsService.options.logger)===null||i===void 0?void 0:i.warn.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.warn,u,c)}error(u,...c){var i,a;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((a=(i=this._optionsService.options.logger)===null||i===void 0?void 0:i.error.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.error,u,c)}};n.LogService=S=p([x(0,v.IOptionsService)],S),n.setTraceLogger=function(u){C=u},n.traceCall=function(u,c,i){if(typeof i.value!="function")throw new Error("not supported");const a=i.value;i.value=function(...m){if(C.logLevel!==v.LogLevelEnum.TRACE)return a.apply(this,m);C.trace(`GlyphRenderer#${a.name}(${m.map(b=>JSON.stringify(b)).join(", ")})`);const g=a.apply(this,m);return C.trace(`GlyphRenderer#${a.name} return`,g),g}}},7302:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const p=h(8460),x=h(844),f=h(6114);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends x.Disposable{constructor(S){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;const u=Object.assign({},n.DEFAULT_OPTIONS);for(const c in S)if(c in u)try{const i=S[c];u[c]=this._sanitizeAndValidateOption(c,i)}catch(i){console.error(i)}this.rawOptions=u,this.options=Object.assign({},u),this._setupOptions()}onSpecificOptionChange(S,u){return this.onOptionChange(c=>{c===S&&u(this.rawOptions[S])})}onMultipleOptionChange(S,u){return this.onOptionChange(c=>{S.indexOf(c)!==-1&&u()})}_setupOptions(){const S=c=>{if(!(c in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},u=(c,i)=>{if(!(c in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);i=this._sanitizeAndValidateOption(c,i),this.rawOptions[c]!==i&&(this.rawOptions[c]=i,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const i={get:S.bind(this,c),set:u.bind(this,c)};Object.defineProperty(this.options,c,i)}}_sanitizeAndValidateOption(S,u){switch(S){case"cursorStyle":if(u||(u=n.DEFAULT_OPTIONS[S]),!function(c){return c==="block"||c==="underline"||c==="bar"}(u))throw new Error(`"${u}" is not a valid value for ${S}`);break;case"wordSeparator":u||(u=n.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=v.includes(u)?u:n.DEFAULT_OPTIONS[S];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${S} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${S} must be numeric, value: ${u}`);break;case"windowsPty":u=u!=null?u:{}}return u}}n.OptionsService=w},2660:function(_,n,h){var p=this&&this.__decorate||function(w,C,S,u){var c,i=arguments.length,a=i<3?C:u===null?u=Object.getOwnPropertyDescriptor(C,S):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(w,C,S,u);else for(var m=w.length-1;m>=0;m--)(c=w[m])&&(a=(i<3?c(a):i>3?c(C,S,a):c(C,S))||a);return i>3&&a&&Object.defineProperty(C,S,a),a},x=this&&this.__param||function(w,C){return function(S,u){C(S,u,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const f=h(2585);let v=n.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const C=this._bufferService.buffer;if(w.id===void 0){const m=C.addMarker(C.ybase+C.y),g={data:w,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(g,m)),this._dataByLinkId.set(g.id,g),g.id}const S=w,u=this._getEntryIdKey(S),c=this._entriesWithId.get(u);if(c)return this.addLineToLink(c.id,C.ybase+C.y),c.id;const i=C.addMarker(C.ybase+C.y),a={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(a,i)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(w,C){const S=this._dataByLinkId.get(w);if(S&&S.lines.every(u=>u.line!==C)){const u=this._bufferService.buffer.addMarker(C);S.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(S,u))}}getLinkData(w){var C;return(C=this._dataByLinkId.get(w))===null||C===void 0?void 0:C.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,C){const S=w.lines.indexOf(C);S!==-1&&(w.lines.splice(S,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};n.OscLinkService=v=p([x(0,f.IBufferService)],v)},8343:(_,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const h="di$target",p="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(x){return x[p]||[]},n.createDecorator=function(x){if(n.serviceRegistry.has(x))return n.serviceRegistry.get(x);const f=function(v,w,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,u,c){u[h]===u?u[p].push({id:S,index:c}):(u[p]=[{id:S,index:c}],u[h]=u)})(f,v,C)};return f.toString=()=>x,n.serviceRegistry.set(x,f),f}},2585:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const p=h(8343);var x;n.IBufferService=(0,p.createDecorator)("BufferService"),n.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),n.ICoreService=(0,p.createDecorator)("CoreService"),n.ICharsetService=(0,p.createDecorator)("CharsetService"),n.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(x||(n.LogLevelEnum=x={})),n.ILogService=(0,p.createDecorator)("LogService"),n.IOptionsService=(0,p.createDecorator)("OptionsService"),n.IOscLinkService=(0,p.createDecorator)("OscLinkService"),n.IUnicodeService=(0,p.createDecorator)("UnicodeService"),n.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(_,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const p=h(8460),x=h(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;const f=new x.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let v=0;const w=f.length;for(let C=0;C<w;++C){let S=f.charCodeAt(C);if(55296<=S&&S<=56319){if(++C>=w)return v+this.wcwidth(S);const u=f.charCodeAt(C);56320<=u&&u<=57343?S=1024*(S-55296)+u-56320+65536:v+=this.wcwidth(u)}v+=this.wcwidth(S)}return v}}}},s={};function o(_){var n=s[_];if(n!==void 0)return n.exports;var h=s[_]={exports:{}};return r[_].call(h.exports,h,h.exports,o),h.exports}var d={};return(()=>{var _=d;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;const n=o(9042),h=o(3236),p=o(844),x=o(5741),f=o(8285),v=o(7975),w=o(7090),C=["cols","rows"];class S extends p.Disposable{constructor(c){super(),this._core=this.register(new h.Terminal(c)),this._addonManager=this.register(new x.AddonManager),this._publicOptions=Object.assign({},this._core.options);const i=m=>this._core.options[m],a=(m,g)=>{this._checkReadonlyOptions(m),this._core.options[m]=g};for(const m in this._core.options){const g={get:i.bind(this,m),set:a.bind(this,m)};Object.defineProperty(this._publicOptions,m,g)}}_checkReadonlyOptions(c){if(C.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const i in c)this._publicOptions[i]=c[i]}blur(){this._core.blur()}focus(){this._core.focus()}resize(c,i){this._verifyIntegers(c,i),this._core.resize(c,i)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){var i,a,m;return this._checkProposedApi(),this._verifyPositiveIntegers((i=c.x)!==null&&i!==void 0?i:0,(a=c.width)!==null&&a!==void 0?a:0,(m=c.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,i,a){this._verifyIntegers(c,i,a),this._core.select(c,i,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,i){this._verifyIntegers(c,i),this._core.selectLines(c,i)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,i){this._core.write(c,i)}writeln(c,i){this._core.write(c),this._core.write(`\r
`,i)}paste(c){this._core.paste(c)}refresh(c,i){this._verifyIntegers(c,i),this._core.refresh(c,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return n}_verifyIntegers(...c){for(const i of c)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const i of c)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}_.Terminal=S})(),d})())})($h);var V0=$h.exports,Vh={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const d=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(d._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,d=o._renderService.dimensions;if(d.css.cell.width===0||d.css.cell.height===0)return;const _=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(n.getPropertyValue("height")),p=Math.max(0,parseInt(n.getPropertyValue("width"))),x=window.getComputedStyle(this._terminal.element),f=h-(parseInt(x.getPropertyValue("padding-top"))+parseInt(x.getPropertyValue("padding-bottom"))),v=p-(parseInt(x.getPropertyValue("padding-right"))+parseInt(x.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(v/d.css.cell.width)),rows:Math.max(1,Math.floor(f/d.css.cell.height))}}}})(),r})())})(Vh);var q0=Vh.exports;const G0=({onClose:e})=>{const t=U.useRef(null),r=U.useRef(null),s=U.useRef(null),[o,d]=U.useState(!1),[_,n]=U.useState(!1),[h,p]=U.useState("terminal"),[x,f]=U.useState(""),[v,w]=U.useState(!1),C=U.useRef(""),S=U.useRef(!1),u=U.useRef(null),c=U.useRef(null),i=U.useRef(null),a=U.useRef([]),m=U.useRef(-1),g=T0(),{executeCommand:b,addTerminalOutput:k,currentProject:y}=oe(),E=$l();U.useEffect(()=>{C.current=x},[x]),U.useEffect(()=>{S.current=v},[v]),U.useEffect(()=>{u.current=b},[b]),U.useEffect(()=>{c.current=k},[k]),U.useEffect(()=>{i.current=y},[y]);const D=U.useCallback(N=>{var P,I;const R=((I=(P=i.current)==null?void 0:P.path)==null?void 0:I.split("/").pop())||"~";N.write(`\x1B[1;32mnexus\x1B[0m:\x1B[1;34m${R}\x1B[0m$ `)},[]),M=U.useCallback(N=>{N.writeln("\x1B[1;34m\x1B[0m"),N.writeln("\x1B[1;34m\x1B[0m           \x1B[1;36mNexus Desktop Terminal\x1B[0m                       \x1B[1;34m\x1B[0m"),N.writeln("\x1B[1;34m\x1B[0m"),N.writeln(""),N.writeln('\x1B[90mType commands to execute. Use "nexus <command>" for Nexus CLI.\x1B[0m'),N.writeln("\x1B[90mPress Ctrl+C to cancel, Ctrl+L to clear.\x1B[0m"),N.writeln(""),D(N)},[D]),T=U.useCallback(N=>{N.write("\r"),N.write("\x1B[K"),D(N)},[D]),A=U.useCallback(async(N,R)=>{var I;const P=a.current;P.push(R),P.length>100&&P.shift(),m.current=-1,f(""),C.current="",w(!0),S.current=!0,N.writeln(""),N.writeln(`\x1B[1;36mExecuting: ${R}\x1B[0m`),N.writeln("");try{const K=await u.current(R,(I=i.current)==null?void 0:I.path);K.split(`
`).forEach(Q=>{N.writeln(Q||" ")}),c.current({id:crypto.randomUUID(),command:R,output:K,status:"completed",startTime:new Date().toISOString(),endTime:new Date().toISOString()})}catch(K){const q=String(K);N.writeln(`\x1B[1;31mError: ${q}\x1B[0m`),c.current({id:crypto.randomUUID(),command:R,output:q,status:"error",startTime:new Date().toISOString(),endTime:new Date().toISOString()})}finally{w(!1),S.current=!1,N.writeln(""),D(N)}},[D]);U.useEffect(()=>{if(!t.current||r.current)return;const N=new V0.Terminal({cursorBlink:!0,fontSize:13,fontFamily:"JetBrains Mono, Menlo, Monaco, Consolas, monospace",theme:{background:"#18181b",foreground:"#a1a1aa",cursor:"#3b82f6",selectionBackground:"#3b82f6",selectionForeground:"#ffffff",black:"#18181b",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#a1a1aa",brightBlack:"#52525b",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#f4f4f5"},scrollback:1e4,rows:15,cols:80}),R=new q0.FitAddon;N.loadAddon(R),N.open(t.current),R.fit(),r.current=N,s.current=R,M(N),N.onData(I=>{if(!S.current)if(I==="\r"){const K=C.current.trim();K?A(N,K):(N.writeln(""),D(N))}else if(I==="")C.current.length>0&&(C.current=C.current.slice(0,-1),f(C.current),N.write("\b \b"));else if(I==="")N.write(`^C
`),D(N),C.current="",f(""),m.current=-1;else if(I==="\f"){const K=C.current;N.clear(),T(N),N.write(K)}else if(I==="\x1B[A"){const K=a.current;if(K.length===0)return;m.current===-1?m.current=K.length-1:m.current>0&&m.current--;const q=K[m.current];T(N),C.current=q,f(q),N.write(q)}else if(I==="\x1B[B"){const K=a.current;if(m.current===-1)return;if(m.current<K.length-1){m.current++;const q=K[m.current];T(N),C.current=q,f(q),N.write(q)}else m.current=-1,T(N),C.current="",f("")}else I>=" "&&I<="~"&&(C.current+=I,f(C.current),N.write(I))});const P=()=>{R.fit()};return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),N.dispose(),r.current=null}},[]);const B=()=>{const N=g.map(R=>`$ ${R.command}
${R.output}`).join(`

`);navigator.clipboard.writeText(N),n(!0),setTimeout(()=>n(!1),2e3)},H=()=>{var N;(N=r.current)==null||N.clear(),f(""),C.current="",r.current&&M(r.current)},$=(N,R)=>{if(!R)return"running";const P=new Date(R).getTime()-new Date(N).getTime();return P<1e3?`${P}ms`:`${(P/1e3).toFixed(1)}s`},W=["nexus --version","nexus scan","nexus status","nexus memory-stats","git status","git log --oneline -10"],j=async N=>{!r.current||v||(C.current=N,f(N),r.current.write(N),setTimeout(()=>{r.current&&A(r.current,N)},100))};return l.jsxs("div",{className:"h-full flex flex-col bg-zinc-950",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-zinc-800 bg-zinc-900/30",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-zinc-800 rounded-lg",children:l.jsx(hn,{className:"w-4 h-4 text-zinc-400"})}),l.jsx("div",{className:"flex items-center gap-2",children:[{id:"terminal",icon:Rp,label:"Terminal"},{id:"history",icon:Ms,label:`History (${g.length})`}].map(({id:N,icon:R,label:P})=>l.jsxs("button",{onClick:()=>p(N),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${h===N?"bg-zinc-800 text-zinc-200":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[l.jsx(R,{className:"w-3.5 h-3.5"}),P]},N))})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:B,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors",title:"Copy terminal content",children:_?l.jsx(Kt,{className:"w-3.5 h-3.5 text-green-400"}):l.jsx(jh,{className:"w-3.5 h-3.5 text-zinc-500"})}),l.jsx("button",{onClick:H,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors",title:"Clear terminal",children:l.jsx(Fp,{className:"w-3.5 h-3.5 text-zinc-500"})}),l.jsx("button",{onClick:()=>d(!o),className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors",title:o?"Minimize":"Maximize",children:o?l.jsx(Bp,{className:"w-3.5 h-3.5 text-zinc-500"}):l.jsx(zp,{className:"w-3.5 h-3.5 text-zinc-500"})}),e&&l.jsx("button",{onClick:e,className:"p-1.5 hover:bg-zinc-800 rounded-md transition-colors",title:"Close terminal",children:l.jsx(Ps,{className:"w-3.5 h-3.5 text-zinc-500"})})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:h==="terminal"?l.jsx("div",{ref:t,className:"h-full w-full p-2"}):l.jsx("div",{className:"h-full overflow-y-auto",children:l.jsx("div",{className:"p-4 space-y-2",children:g.length===0?l.jsxs("div",{className:"text-center py-8 text-zinc-600",children:[l.jsx(Ms,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No commands executed yet"}),l.jsx("p",{className:"text-xs mt-1 opacity-70",children:"Use the terminal to run commands"})]}):g.map((N,R)=>l.jsxs("div",{className:"p-3 bg-zinc-900/50 border border-zinc-800 rounded-lg hover:border-zinc-700 transition-colors",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs text-zinc-600",children:["#",R+1]}),l.jsx("code",{className:"text-xs font-mono text-zinc-300 bg-zinc-800 px-2 py-0.5 rounded",children:N.command})]}),l.jsx("div",{className:"flex items-center gap-2",children:N.status==="running"?l.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-yellow-400",children:[l.jsx(Hp,{className:"w-3 h-3 fill-current"}),"Running"]}):N.status==="error"?l.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-red-400",children:[l.jsx(Ps,{className:"w-3 h-3"}),"Error"]}):l.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] text-green-400",children:[l.jsx(Kt,{className:"w-3 h-3"}),"Done"]})})]}),l.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] text-zinc-600",children:[l.jsx("span",{children:new Date(N.startTime).toLocaleTimeString()}),l.jsx("span",{children:""}),l.jsx("span",{children:$(N.startTime,N.endTime)})]}),N.output&&l.jsx("div",{className:"mt-2 p-2 bg-zinc-950 rounded text-xs font-mono text-zinc-400 max-h-32 overflow-auto",children:l.jsxs("pre",{className:"whitespace-pre-wrap",children:[N.output.substring(0,500),N.output.length>500?"...":""]})})]},N.id))})})}),l.jsxs("div",{className:"px-4 py-2 border-t border-zinc-800 bg-zinc-900/30 flex items-center gap-2 overflow-x-auto",children:[l.jsx("span",{className:"text-[10px] text-zinc-600 uppercase tracking-wider whitespace-nowrap",children:"Quick:"}),W.map(N=>l.jsx("button",{onClick:()=>j(N),disabled:v||!E,className:"px-2 py-1 bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed rounded text-[10px] text-zinc-400 hover:text-zinc-300 transition-colors whitespace-nowrap",children:N},N))]}),v&&l.jsxs("div",{className:"absolute bottom-16 left-4 flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:[l.jsx(Or,{className:"w-3.5 h-3.5 text-blue-400 animate-spin"}),l.jsx("span",{className:"text-xs text-blue-400",children:"Executing..."})]})]})},X0=({color:e})=>l.jsxs("span",{className:"relative flex h-2 w-2",children:[l.jsx("span",{className:`animate-ping absolute inline-flex h-full w-full rounded-full ${e} opacity-75`}),l.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${e.replace("/75","")}`})]}),ac=({status:e,nexusStatus:t})=>{const s=(()=>{if(!t)return null;const o=t.connectionMode||"unknown",d=t.sshLatency,_=t.remoteNexusInstalled;let n="",h="";o==="ssh"?(n="SSH",h="text-blue-400",_===!1&&(n="SSHLocal",h="text-yellow-400")):o==="local"&&(n="Local",h="text-emerald-400");const p=d!==void 0?`, ${d}ms`:"",x=d>500?"text-orange-400":d>200?"text-yellow-400":"";return{modeLabel:n,modeColor:h,latencyText:p,latencyColor:x}})();switch(e){case"connected":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(X0,{color:"bg-green-500"}),l.jsx($p,{className:"w-3.5 h-3.5 text-green-400"}),l.jsxs("span",{className:"text-xs text-green-400",children:["Connected",s&&s.modeLabel&&l.jsxs("span",{className:`ml-1 ${s.modeColor}`,children:["(",s.modeLabel,l.jsx("span",{className:s.latencyColor,children:s.latencyText}),")"]})]})]});case"connecting":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ar,{className:"w-3.5 h-3.5 text-yellow-400 animate-spin"}),l.jsx("span",{className:"text-xs text-yellow-400",children:"Connecting..."})]});case"error":return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vo,{className:"w-3.5 h-3.5 text-red-400"}),l.jsx("span",{className:"text-xs text-red-400",children:"Error"})]});default:return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vo,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-500",children:"Disconnected"})]})}},Q0=({value:e,max:t=100,color:r="bg-blue-500"})=>{const s=Math.min(e/t*100,100);return l.jsx("div",{className:"w-16 h-1 bg-zinc-800 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${r}`,style:{width:`${s}%`}})})},Y0=({onOpenSettings:e})=>{const[t,r]=U.useState(!1),[s,o]=U.useState(new Date),d=oe(i=>i.backend),_=k0(),n=E0(),h=j0(),{agents:p,swarmTasks:x,checkNexusStatus:f,memoryStats:v}=oe();U.useEffect(()=>{const i=setInterval(()=>o(new Date),1e3);return()=>clearInterval(i)},[]);const w=i=>i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),C=i=>i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`,S=p.filter(i=>i.status==="working"),u=x.filter(i=>i.status==="in_progress"),c=p.filter(i=>i.lastCompletedTask).length;return l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:[t&&l.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-sm border-t border-zinc-800 px-4 py-3",children:l.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[10px] font-medium text-zinc-500 uppercase tracking-wider",children:"Connection"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Status"}),l.jsx(ac,{status:d.status,nexusStatus:_})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"CLI"}),l.jsx("span",{className:_!=null&&_.nexusInstalled?"text-green-400":"text-red-400",children:_!=null&&_.nexusInstalled?"Installed":"Not Found"})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Version"}),l.jsx("span",{className:"text-zinc-300",children:(_==null?void 0:_.version)||"Unknown"})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Provider"}),l.jsx("span",{className:"text-zinc-300",children:(_==null?void 0:_.provider)||"None"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[10px] font-medium text-zinc-500 uppercase tracking-wider",children:"Project"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(tc,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-zinc-400 truncate max-w-[150px]",children:(h==null?void 0:h.path)||"No project selected"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(Ki,{className:"w-3.5 h-3.5 text-purple-400"}),l.jsx("span",{className:"text-zinc-300",children:(h==null?void 0:h.name)||"-"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(Vt,{className:"w-3.5 h-3.5 text-green-400"}),l.jsxs("span",{className:"text-zinc-400",children:[p.length," agents available"]})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[10px] font-medium text-zinc-500 uppercase tracking-wider",children:"Swarm"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Active Agents"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ms,{className:"w-3 h-3 text-blue-400"}),l.jsx("span",{className:"text-zinc-300",children:S.length})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Running Tasks"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ir,{className:"w-3 h-3 text-yellow-400"}),l.jsx("span",{className:"text-zinc-300",children:u.length})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Completed Today"}),l.jsx("span",{className:"text-green-400",children:c})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[10px] font-medium text-zinc-500 uppercase tracking-wider",children:"Resources"}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Memory"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-zinc-500",children:v?C(v.sizeBytes):"-"}),l.jsx(Q0,{value:(v==null?void 0:v.totalMemories)||0,max:1e3,color:"bg-purple-500"})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Watcher"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:n!=null&&n.isRunning?"text-green-400":"text-zinc-500",children:n!=null&&n.isRunning?"Active":"Stopped"})})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-400",children:"Errors Fixed"}),l.jsx("span",{className:"text-green-500",children:(n==null?void 0:n.errorsFixed)||0})]})]})]})]})}),l.jsxs("div",{className:"bg-zinc-950/95 backdrop-blur-sm border-t border-zinc-800 px-4 py-2 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(ac,{status:d.status}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(un,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-400",children:(_==null?void 0:_.model)||"Nexus"})]}),h&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(tc,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-400 truncate max-w-[150px]",children:h.name})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(dn,{className:"w-3.5 h-3.5 text-blue-400"}),l.jsxs("span",{className:"text-xs text-zinc-400",children:[S.length," active"]})]}),u.length>0&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Ir,{className:"w-3.5 h-3.5 text-yellow-400"}),l.jsxs("span",{className:"text-xs text-yellow-400",children:[u.length," swarm"]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Uo,{className:"w-3 h-3 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-500",children:v?C(v.sizeBytes):"-"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Ws,{className:"w-3 h-3 text-zinc-500"}),l.jsx("span",{className:"text-xs text-zinc-500",children:w(s)})]})]}),l.jsxs("div",{className:"flex items-center gap-2 border-l border-zinc-800 pl-4",children:[l.jsx("button",{onClick:()=>f(),className:"p-1 hover:bg-zinc-800 rounded transition-colors",title:"Refresh connection",children:l.jsx(ar,{className:"w-3.5 h-3.5 text-zinc-500"})}),l.jsx("button",{onClick:()=>r(!t),className:"flex items-center gap-1 p-1 hover:bg-zinc-800 rounded transition-colors",title:t?"Collapse":"Expand",children:t?l.jsx(kh,{className:"w-3.5 h-3.5 text-zinc-500"}):l.jsx(Np,{className:"w-3.5 h-3.5 text-zinc-500"})}),l.jsx("button",{onClick:e,className:"p-1 hover:bg-zinc-800 rounded transition-colors",title:"Settings",children:l.jsx(Mh,{className:"w-3.5 h-3.5 text-zinc-500"})})]})]})]})]})},J0=[{id:"connection",label:"Connection",icon:Ah},{id:"provider",label:"Provider & Model",icon:un},{id:"appearance",label:"Appearance",icon:Rh},{id:"editor",label:"Editor",icon:cn},{id:"hierarchy",label:"Model Hierarchy",icon:Dh},{id:"advanced",label:"Advanced",icon:Us},{id:"logs",label:"Logs",icon:Nh}],Ye="w-full bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-blue-500",be="text-[11px] font-medium text-zinc-400 ml-1",Ue="flex items-center gap-2 text-xs font-bold text-zinc-500 uppercase tracking-widest",ft=({enabled:e,onChange:t,label:r,description:s})=>l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-zinc-300",children:r}),s&&l.jsx("p",{className:"text-[11px] text-zinc-600 mt-0.5",children:s})]}),l.jsx("button",{onClick:()=>t(!e),className:`relative w-10 h-5 rounded-full transition-colors ${e?"bg-blue-600":"bg-zinc-700"}`,children:l.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${e?"left-5":"left-0.5"}`})})]}),Z0=()=>{var k,y,E,D,M,T;const{settings:e,updateSetting:t,setBackendStatus:r,addToast:s}=oe(),[o,d]=U.useState(((k=e.sshSettings)==null?void 0:k.host)||"89.167.14.222"),[_,n]=U.useState(((y=e.sshSettings)==null?void 0:y.port)||22),[h,p]=U.useState(((E=e.sshSettings)==null?void 0:E.username)||"root"),[x,f]=U.useState(((D=e.sshSettings)==null?void 0:D.password)||""),[v,w]=U.useState(((M=e.sshSettings)==null?void 0:M.privateKey)||""),[C,S]=U.useState(((T=e.sshSettings)==null?void 0:T.publicKey)||""),[u,c]=U.useState(v?"key":"password"),[i,a]=U.useState("idle"),[m,g]=U.useState(null),b=async()=>{a("connecting"),g(null);try{await re("connect_remote",{host:o,port:_,username:h,password:u==="password"&&x||null,privateKey:u==="key"&&v||null,publicKey:u==="key"&&C||null}),t("sshSettings",{host:o,port:_,username:h,password:u==="password"?x:"",privateKey:u==="key"?v:"",publicKey:u==="key"?C:""}),r("connected"),a("success"),s({type:"success",title:"Connected",message:`SSH to ${o}:${_}`})}catch(A){a("error"),r("error",A.toString()),g(A.toString())}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:Ue,children:[l.jsx(Ko,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Remote SSH"}),l.jsxs("div",{className:"flex bg-zinc-950 rounded-lg p-0.5 border border-zinc-800 ml-auto",children:[l.jsx("button",{onClick:()=>c("password"),className:`px-2 py-1 rounded-md text-[10px] transition-all ${u==="password"?"bg-zinc-800 text-zinc-200":"text-zinc-500 hover:text-zinc-400"}`,children:"Password"}),l.jsx("button",{onClick:()=>c("key"),className:`px-2 py-1 rounded-md text-[10px] transition-all ${u==="key"?"bg-zinc-800 text-zinc-200":"text-zinc-500 hover:text-zinc-400"}`,children:"Key"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Host Address"}),l.jsx("input",{value:o,onChange:A=>d(A.target.value),className:Ye})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"SSH Port"}),l.jsx("input",{type:"number",value:_,onChange:A=>n(parseInt(A.target.value)),className:Ye})]})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Username"}),l.jsx("input",{value:h,onChange:A=>p(A.target.value),className:Ye})]}),u==="password"?l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"password",value:x,onChange:A=>f(A.target.value),className:`${Ye} pr-10`}),l.jsx(Lh,{className:"absolute right-3 top-2.5 w-4 h-4 text-zinc-600"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Private Key Content"}),l.jsx("textarea",{value:v,onChange:A=>w(A.target.value),rows:4,className:`${Ye} text-[10px] font-mono resize-none`,placeholder:"-----BEGIN OPENSSH PRIVATE KEY-----"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Public Key Content (Optional for RSA, Required for ED25519)"}),l.jsx("textarea",{value:C,onChange:A=>S(A.target.value),rows:2,className:`${Ye} text-[10px] font-mono resize-none`,placeholder:"ssh-ed25519 AAAA..."})]})]}),m&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 flex items-start gap-3",children:[l.jsx(_s,{className:"w-4 h-4 text-red-500 shrink-0 mt-0.5"}),l.jsx("p",{className:"text-xs text-red-400 leading-relaxed",children:m})]}),i==="success"&&l.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-lg p-3 flex items-center gap-3",children:[l.jsx(Kt,{className:"w-4 h-4 text-emerald-500 shrink-0"}),l.jsx("p",{className:"text-xs text-emerald-400 font-medium",children:"Connected to Nexus brain"})]}),l.jsx("button",{onClick:b,disabled:i==="connecting",className:`flex items-center gap-2 px-5 py-2 rounded-lg text-xs font-bold transition-all w-full justify-center ${i==="connecting"?"bg-blue-600/50 text-white cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-600/20"}`,children:i==="connecting"?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-white/30 border-t-white rounded-full"}),l.jsx("span",{children:"Connecting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(hn,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Establish Connection"})]})})]})},em=()=>{const{availableProviders:e,availableModels:t,activeProvider:r,activeModel:s,setProvider:o,setModel:d,setApiKey:_,loadAvailableModels:n,testProviderConnection:h,loadProviders:p}=oe(),[x,f]=U.useState(""),[v,w]=U.useState(""),[C,S]=U.useState(!1),[u,c]=U.useState("idle"),[i,a]=U.useState(!1),[m,g]=U.useState(!1),[b,k]=U.useState(null),y=["opencode","openrouter","google","claude","custom"],E=e.length>0?[...new Set([...e,...y])]:y;U.useEffect(()=>{p()},[p]),U.useEffect(()=>{r&&n(r)},[r,n]);const D=async()=>{if(!(!x.trim()||!r)){a(!0);try{await _(r,x.trim()),f("")}finally{a(!1)}}},M=async()=>{if(r){c("testing");try{await h(r),c("success"),setTimeout(()=>c("idle"),3e3)}catch{c("error"),setTimeout(()=>c("idle"),3e3)}}};U.useEffect(()=>{(async()=>{if(["google","claude","openai"].includes(r))try{const B=await re("oauth_check_status",{provider:r});k({authorized:B.authorized,expiresAt:B.expiresAt})}catch{k({authorized:!1})}else k(null)})()},[r]);const T=async()=>{g(!0);try{await re("oauth_authorize",{provider:r}),await new Promise(B=>setTimeout(B,2e3));const A=await re("oauth_check_status",{provider:r});k(A),A.authorized&&(await n(r),oe.getState().addToast({type:"success",title:"OAuth Authorized!",message:`Successfully authorized ${r}`}))}catch(A){oe.getState().addToast({type:"error",title:"OAuth Failed",message:String(A)})}finally{g(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:Ue,children:[l.jsx(un,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"AI Provider"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Provider"}),l.jsxs("select",{value:r,onChange:A=>o(A.target.value),className:Ye,children:[l.jsx("option",{value:"",children:"Select provider..."}),E.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Model"}),l.jsxs("select",{value:s,onChange:A=>d(A.target.value),className:Ye,disabled:!r,children:[l.jsx("option",{value:"",children:"Select model..."}),t.map(A=>l.jsx("option",{value:A,children:A},A))]}),t.length===0&&r&&l.jsx("p",{className:"text-[10px] text-zinc-600 mt-1",children:"No models loaded. Save an API key and test connection first."})]}),!r&&l.jsx("div",{className:"bg-yellow-600/10 border border-yellow-500/30 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(_s,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-xs text-yellow-300 space-y-2",children:[l.jsx("p",{className:"font-medium",children:" No Provider Configured"}),l.jsx("p",{className:"text-yellow-400/80",children:"Select a provider above to get started. You'll need to configure authentication (API key or OAuth) for the provider to work."}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:()=>{o("google")},className:"px-2 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 rounded text-[10px] font-medium text-yellow-300 transition-colors",children:"Configure Google (Free)"}),l.jsx("button",{onClick:()=>{o("openrouter")},className:"px-2 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 rounded text-[10px] font-medium text-yellow-300 transition-colors",children:"Configure OpenRouter"})]})]})]})}),r&&t.length===0&&!(b!=null&&b.authorized)&&l.jsx("div",{className:"bg-blue-600/10 border border-blue-500/30 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(_s,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-xs text-blue-300 space-y-2",children:[l.jsx("p",{className:"font-medium",children:" Authentication Required"}),l.jsxs("p",{className:"text-blue-400/80",children:["Provider ",l.jsx("span",{className:"font-mono text-blue-300",children:r})," is selected but not authenticated.",["google","claude","openai"].includes(r)?" Use OAuth (recommended) or add an API key below.":" Add an API key below to continue."]})]})]})}),l.jsxs("div",{className:Ue,children:[l.jsx(Lh,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Authentication"})]}),["google","claude","openai"].includes(r)&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/20 rounded-lg p-3 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-blue-300",children:[l.jsx(Ko,{className:"w-4 h-4"}),l.jsx("span",{children:"OAuth Authentication (Recommended)"})]}),b!=null&&b.authorized?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-400",children:[l.jsx(Kt,{className:"w-4 h-4"}),l.jsx("span",{children:"Authorized"}),b.expiresAt&&l.jsxs("span",{className:"text-zinc-500",children:[" Expires: ",new Date(b.expiresAt).toLocaleDateString()]})]}),l.jsx("button",{onClick:T,disabled:m,className:"px-3 py-1 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 text-[10px] font-medium rounded transition-colors",children:"Re-authenticate"})]}),l.jsxs("p",{className:"text-[10px] text-zinc-400",children:["You're authenticated and ready to use ",r==="google"?"Google Gemini":r==="claude"?"Anthropic Claude":"OpenAI"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-[10px] text-blue-300",children:"Click below to securely authenticate. Your browser will open for login."}),l.jsx("button",{onClick:T,disabled:m,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-zinc-800 disabled:text-zinc-600 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:m?l.jsxs(l.Fragment,{children:[l.jsx($o,{className:"w-4 h-4 animate-spin"}),"Authorizing..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ko,{className:"w-4 h-4"}),"Login with ",r==="google"?"Google":r==="claude"?"Anthropic":"OpenAI"]})})]})]}),l.jsx("div",{className:"text-center text-xs text-zinc-500",children:" or "})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("label",{className:be,children:["API Key ",r?`(${r})`:""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:C?"text":"password",value:x,onChange:A=>f(A.target.value),className:`${Ye} pr-10`,placeholder:"sk-...",disabled:!r}),l.jsx("button",{onClick:()=>S(!C),className:"absolute right-3 top-2.5 text-zinc-600 hover:text-zinc-400",children:C?l.jsx(Ap,{className:"w-4 h-4"}):l.jsx(Mp,{className:"w-4 h-4"})})]}),l.jsx("button",{onClick:D,disabled:!x.trim()||!r||i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-zinc-800 disabled:text-zinc-600 text-white text-xs font-bold rounded-lg transition-colors",children:i?"...":"Save"})]})]}),r==="custom"&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Base URL"}),l.jsx("input",{value:v,onChange:A=>w(A.target.value),className:Ye,placeholder:"https://api.example.com/v1"})]}),l.jsx("button",{onClick:M,disabled:!r||u==="testing",className:`flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-bold transition-all w-full justify-center ${u==="testing"?"bg-zinc-800 text-zinc-400 cursor-not-allowed":u==="success"?"bg-emerald-600/20 border border-emerald-500/30 text-emerald-400":u==="error"?"bg-red-600/20 border border-red-500/30 text-red-400":"bg-zinc-800 hover:bg-zinc-700 text-zinc-300 border border-zinc-700"}`,children:u==="testing"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-zinc-500/30 border-t-zinc-300 rounded-full"}),l.jsx("span",{children:"Testing..."})]}):u==="success"?l.jsxs(l.Fragment,{children:[l.jsx(Kt,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Connection Verified"})]}):u==="error"?l.jsxs(l.Fragment,{children:[l.jsx(_s,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Connection Failed"})]}):l.jsxs(l.Fragment,{children:[l.jsx(dn,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Test Connection"})]})})]})},tm=()=>{const{settings:e,updateSetting:t}=oe();return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:Ue,children:[l.jsx(Rh,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Theme & Display"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Theme"}),l.jsx("div",{className:"flex gap-2",children:["dark","light","system"].map(r=>l.jsx("button",{onClick:()=>t("theme",r),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all border ${e.theme===r?"bg-blue-600/20 border-blue-500/30 text-blue-400":"bg-zinc-950 border-zinc-800 text-zinc-500 hover:text-zinc-300 hover:border-zinc-700"}`,children:r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("label",{className:be,children:["Font Size (",e.fontSize,"px)"]}),l.jsx("input",{type:"range",min:10,max:20,step:1,value:e.fontSize,onChange:r=>t("fontSize",parseInt(r.target.value)),className:"w-full accent-blue-500"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-600",children:[l.jsx("span",{children:"10px"}),l.jsx("span",{children:"20px"})]})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Font Family"}),l.jsx("select",{value:e.fontFamily,onChange:r=>t("fontFamily",r.target.value),className:Ye,children:["JetBrains Mono","Fira Code","Source Code Pro","IBM Plex Mono","Cascadia Code","Menlo","Monaco","Consolas"].map(r=>l.jsx("option",{value:r,children:r},r))})]}),l.jsxs("div",{className:Ue,children:[l.jsx(Us,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Panels"})]}),l.jsx(ft,{label:"Sidebar Visible",description:"Show the left sidebar on startup",enabled:e.sidebarVisible,onChange:r=>t("sidebarVisible",r)}),l.jsx(ft,{label:"Terminal Visible",description:"Show the terminal panel on startup",enabled:e.terminalVisible,onChange:r=>t("terminalVisible",r)})]})},rm=()=>{const{settings:e,updateSetting:t}=oe(),r=e.editorSettings||{tabSize:2,useSpaces:!0,wordWrap:!0,minimap:!1,lineNumbers:!0},s=(o,d)=>{t("editorSettings",{...r,[o]:d})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:Ue,children:[l.jsx(cn,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Code Editor"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:be,children:"Tab Size"}),l.jsx("div",{className:"flex gap-2",children:[2,4,8].map(o=>l.jsxs("button",{onClick:()=>s("tabSize",o),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all border ${r.tabSize===o?"bg-blue-600/20 border-blue-500/30 text-blue-400":"bg-zinc-950 border-zinc-800 text-zinc-500 hover:text-zinc-300 hover:border-zinc-700"}`,children:[o," spaces"]},o))})]}),l.jsx(ft,{label:"Use Spaces",description:"Insert spaces instead of tab characters",enabled:r.useSpaces,onChange:o=>s("useSpaces",o)}),l.jsx(ft,{label:"Word Wrap",description:"Wrap long lines to fit the editor width",enabled:r.wordWrap,onChange:o=>s("wordWrap",o)}),l.jsx(ft,{label:"Minimap",description:"Show code minimap on the right side",enabled:r.minimap,onChange:o=>s("minimap",o)}),l.jsx(ft,{label:"Line Numbers",description:"Show line numbers in the gutter",enabled:r.lineNumbers,onChange:o=>s("lineNumbers",o)})]})},sm=()=>{const{addToast:e}=oe(),[t,r]=U.useState(null),[s,o]=U.useState(24),[d,_]=U.useState(!1),n=async()=>{try{const f=await re("daemon_status");r(f),f.interval_hours&&o(f.interval_hours)}catch(f){console.error("Failed to fetch daemon status:",f)}};U.useEffect(()=>{n();const f=setInterval(n,1e4);return()=>clearInterval(f)},[]);const h=async()=>{_(!0);try{await re("daemon_start",{interval:s}),e({type:"success",title:"Heartbeat daemon started",message:`Running every ${s} hours`}),await n()}catch(f){e({type:"error",title:"Failed to start daemon",message:String(f)})}finally{_(!1)}},p=async()=>{_(!0);try{await re("daemon_stop"),e({type:"success",title:"Heartbeat daemon stopped"}),await n()}catch(f){e({type:"error",title:"Failed to stop daemon",message:String(f)})}finally{_(!1)}},x=async()=>{_(!0);try{await re("daemon_run_tasks"),e({type:"success",title:"Proactive tasks completed"}),await n()}catch(f){e({type:"error",title:"Tasks failed",message:String(f)})}finally{_(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:Ue,children:[l.jsx(Ws,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Proactive Heartbeat"})]}),l.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-3 space-y-3",children:[l.jsx("p",{className:"text-[11px] text-zinc-500",children:"Run proactive tasks in the background at regular intervals: memory consolidation, TODO scanning, dependency checks, and build error detection."}),t&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-500",children:"Status:"}),l.jsxs("span",{className:t.running?"text-emerald-400":"text-zinc-600",children:[t.running?"Running":"Stopped",t.pid&&` (PID ${t.pid})`]})]}),t.last_run&&l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-500",children:"Last Run:"}),l.jsx("span",{className:"text-zinc-400",children:t.last_run})]}),t.next_run&&l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-zinc-500",children:"Next Run:"}),l.jsx("span",{className:"text-zinc-400",children:t.next_run})]})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("label",{className:be,children:["Heartbeat Interval (",s," hours)"]}),l.jsx("input",{type:"range",min:1,max:24,step:1,value:s,onChange:f=>o(parseInt(f.target.value)),disabled:(t==null?void 0:t.running)||d,className:"w-full accent-blue-500 disabled:opacity-50"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-600",children:[l.jsx("span",{children:"1h"}),l.jsx("span",{children:"12h"}),l.jsx("span",{children:"24h"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[t!=null&&t.running?l.jsxs("button",{onClick:p,disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600/20 hover:bg-red-600/30 disabled:opacity-50 border border-red-500/30 rounded-lg text-xs font-medium text-red-400 transition-colors",children:[d?l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-red-500/30 border-t-red-300 rounded-full"}):l.jsx(Lp,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Stop Heartbeat"})]}):l.jsxs("button",{onClick:h,disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600/20 hover:bg-emerald-600/30 disabled:opacity-50 border border-emerald-500/30 rounded-lg text-xs font-medium text-emerald-400 transition-colors",children:[d?l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-emerald-500/30 border-t-emerald-300 rounded-full"}):l.jsx(Ms,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Start Heartbeat"})]}),l.jsxs("button",{onClick:x,disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600/20 hover:bg-blue-600/30 disabled:opacity-50 border border-blue-500/30 rounded-lg text-xs font-medium text-blue-400 transition-colors",children:[d?l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-blue-500/30 border-t-blue-300 rounded-full"}):l.jsx(dn,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Run Now"})]})]})]})]})},im=()=>{const{addToast:e}=oe(),[t,r]=U.useState(null),[s,o]=U.useState([]),[d,_]=U.useState("balanced"),[n,h]=U.useState(!1),[p,x]=U.useState(!1),f=[{id:"balanced",label:"Balanced",description:"Good mix of speed, cost, and quality"},{id:"budget",label:"Budget",description:"Minimize costs with free/cheap models"},{id:"premium",label:"Premium",description:"Best models, ignore cost"},{id:"speed",label:"Speed",description:"Prioritize fast responses"},{id:"claude-only",label:"Claude Only",description:"Use only Claude models"}],v=[{id:"heartbeat",label:"Heartbeat",description:"Proactive checks, simple automation",icon:Ws},{id:"daily",label:"Daily",description:"Simple queries, file reads, status",icon:ms},{id:"planning",label:"Planning",description:"Architecture, design, reasoning",icon:dn},{id:"coding",label:"Coding",description:"Code generation, refactoring",icon:cn},{id:"review",label:"Review",description:"Code review, testing, validation",icon:Kt}];U.useEffect(()=>{w(),C()},[]);const w=async()=>{try{const a=await re("hierarchy_get");r(a)}catch(a){console.error("Failed to load hierarchy:",a),e({type:"error",title:"Failed to load hierarchy",message:String(a)})}},C=async()=>{try{const a=await re("get_model_capabilities");o(a)}catch(a){console.error("Failed to load models:",a)}},S=async a=>{h(!0);try{await re("hierarchy_set_preset",{preset:a}),_(a),await w(),e({type:"success",title:"Preset applied",message:`Switched to ${a} preset`}),x(!1)}catch(m){e({type:"error",title:"Failed to set preset",message:String(m)})}finally{h(!1)}},u=async(a,m,g)=>{h(!0);try{await re("hierarchy_set_model",{category:a,tier:m,modelId:g}),await w(),e({type:"success",title:"Model updated",message:`Set ${a} tier ${m+1} to ${g}`})}catch(b){e({type:"error",title:"Failed to update model",message:String(b)})}finally{h(!1)}},c=a=>{const m=s.find(b=>b.id===a);if(!m)return a;const g=m.cost_per_1m_tokens===0?" Free":`$${m.cost_per_1m_tokens.toFixed(2)}/1M`;return`${m.display_name} - ${g}`},i=({label:a,score:m,max:g=10})=>{const b=m/g*100,k=b>=80?"emerald":b>=60?"blue":b>=40?"yellow":"red";return l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[10px] text-zinc-600 uppercase",children:a}),l.jsx("div",{className:"flex gap-0.5",children:Array.from({length:g}).map((y,E)=>l.jsx("div",{className:`w-1 h-3 rounded-sm ${E<m?`bg-${k}-500`:"bg-zinc-800"}`},E))}),l.jsx("span",{className:"text-[10px] text-zinc-500 ml-0.5",children:m})]})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:Ue,children:[l.jsx(Dh,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Quick Presets"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3",children:f.map(a=>l.jsxs("button",{onClick:()=>S(a.id),disabled:n,className:`p-3 rounded-lg border text-left transition-all ${d===a.id?"bg-blue-600/20 border-blue-500/50 text-blue-300":"bg-zinc-900/50 border-zinc-800 text-zinc-400 hover:border-zinc-700"} ${n?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("div",{className:"text-xs font-medium",children:a.label}),l.jsx("div",{className:"text-[10px] text-zinc-600 mt-0.5",children:a.description})]},a.id))}),l.jsx("div",{className:"flex items-center gap-2 mt-3",children:l.jsx("button",{onClick:()=>x(!p),className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:p?" Back to presets":" Customize tiers"})})]}),p&&t&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:Ue,children:[l.jsx(Us,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Custom Hierarchy"})]}),v.map(a=>{const m=a.icon,g=t[a.id]||[];return l.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-3 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(m,{className:"w-3.5 h-3.5 text-zinc-500"}),l.jsx("span",{className:"text-sm font-medium text-zinc-300",children:a.label}),l.jsx("span",{className:"text-[10px] text-zinc-600 ml-auto",children:a.description})]}),g.map((b,k)=>l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("label",{className:be,children:["Tier ",k+1," ",k===0&&"(Primary)"]}),l.jsxs("select",{value:b.model_id,onChange:y=>u(a.id,k,y.target.value),disabled:n,className:Ye,children:[l.jsx("option",{value:"",children:"Select model..."}),s.map(y=>l.jsx("option",{value:y.id,children:c(y.id)},y.id))]}),b.model_id&&s.find(y=>y.id===b.model_id)&&l.jsxs("div",{className:"flex gap-3 px-2",children:[l.jsx(i,{label:"Speed",score:s.find(y=>y.id===b.model_id).speed_score}),l.jsx(i,{label:"Reason",score:s.find(y=>y.id===b.model_id).reasoning_score}),l.jsx(i,{label:"Code",score:s.find(y=>y.id===b.model_id).coding_score})]})]},k)),g.length===0&&l.jsx("p",{className:"text-xs text-zinc-600 italic",children:"No tiers configured"})]},a.id)})]}),!p&&l.jsx("div",{className:"bg-blue-600/10 border border-blue-500/20 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(_s,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-xs text-blue-300 space-y-1",children:[l.jsx("p",{className:"font-medium",children:"How Model Hierarchy Works:"}),l.jsxs("ul",{className:"list-disc list-inside text-[11px] text-blue-400/80 space-y-0.5",children:[l.jsx("li",{children:"Tasks are categorized automatically (heartbeat, daily, planning, coding, review)"}),l.jsx("li",{children:"Each category has 1-3 tiers (Tier 1 = cheapest/fastest, Tier 2+ = escalation)"}),l.jsx("li",{children:"If a model fails or refuses, the system auto-escalates to the next tier"}),l.jsx("li",{children:"Presets configure all categories at once, or customize per-category"})]})]})]})})]})},nm=()=>{const{settings:e,updateSetting:t,consolidateMemory:r,addToast:s}=oe(),[o,d]=U.useState(!1),_=async()=>{d(!0);try{await r(),s({type:"success",title:"Memory consolidated"})}catch{s({type:"error",title:"Consolidation failed"})}finally{d(!1)}},n=async h=>{try{await re(h==="start"?"watch_start":"watch_stop"),s({type:"success",title:`Watcher ${h}ed`})}catch(p){s({type:"error",title:`Failed to ${h} watcher`,message:String(p)})}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:Ue,children:[l.jsx(Us,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Auto-Save"})]}),l.jsx(ft,{label:"Auto-Save",description:"Automatically save changes",enabled:e.autoSave,onChange:h=>t("autoSave",h)}),e.autoSave&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("label",{className:be,children:["Save Interval (",e.autoSaveInterval,"s)"]}),l.jsx("input",{type:"range",min:5,max:120,step:5,value:e.autoSaveInterval,onChange:h=>t("autoSaveInterval",parseInt(h.target.value)),className:"w-full accent-blue-500"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-600",children:[l.jsx("span",{children:"5s"}),l.jsx("span",{children:"120s"})]})]}),l.jsxs("div",{className:Ue,children:[l.jsx(ms,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Notifications & Privacy"})]}),l.jsx(ft,{label:"Notifications",description:"Show desktop notifications for events",enabled:e.enableNotifications,onChange:h=>t("enableNotifications",h)}),l.jsx(ft,{label:"Sound Effects",description:"Play sounds for certain events",enabled:e.soundEffects,onChange:h=>t("soundEffects",h)}),l.jsx(ft,{label:"Telemetry",description:"Send anonymous usage data to improve Nexus",enabled:e.telemetryEnabled,onChange:h=>t("telemetryEnabled",h)}),l.jsxs("div",{className:Ue,children:[l.jsx(Wo,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Memory & Watcher"})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:_,disabled:o,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 border border-zinc-700 rounded-lg text-xs font-medium text-zinc-300 transition-colors",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-2 border-zinc-500/30 border-t-zinc-300 rounded-full"}),l.jsx("span",{children:"Consolidating..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Wo,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Consolidate Memory"})]})})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>n("start"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600/20 hover:bg-emerald-600/30 border border-emerald-500/30 rounded-lg text-xs font-medium text-emerald-400 transition-colors",children:[l.jsx(ms,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Start Watcher"})]}),l.jsxs("button",{onClick:()=>n("stop"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600/20 hover:bg-red-600/30 border border-red-500/30 rounded-lg text-xs font-medium text-red-400 transition-colors",children:[l.jsx(ms,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Stop Watcher"})]})]}),l.jsx(sm,{}),l.jsxs("div",{className:Ue,children:[l.jsx($o,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Reset"})]}),l.jsxs("button",{onClick:()=>{oe.getState().resetSettings(),s({type:"info",title:"Settings reset to defaults"})},className:"flex items-center justify-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded-lg text-xs font-medium text-zinc-400 hover:text-zinc-300 transition-colors w-full",children:[l.jsx($o,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:"Reset All Settings"})]})]})},om=()=>{const{logs:e,clearLogs:t}=oe(),[r,s]=U.useState("all"),[o,d]=U.useState(!0),_=U.useRef(null);U.useEffect(()=>{o&&_.current&&_.current.scrollIntoView({behavior:"smooth"})},[e,o]);const n=e.filter(f=>r==="all"||f.level===r),h=f=>{switch(f){case"error":return"text-red-400 bg-red-500/10";case"warn":return"text-yellow-400 bg-yellow-500/10";case"info":return"text-blue-400 bg-blue-500/10";case"debug":return"text-zinc-400 bg-zinc-500/10";default:return"text-zinc-300"}},p=f=>{switch(f){case"frontend":return"";case"backend":return"";case"cli":return"";default:return""}},x=()=>{const f=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),v=URL.createObjectURL(f),w=document.createElement("a");w.href=v,w.download=`nexus-logs-${new Date().toISOString()}.json`,w.click(),URL.revokeObjectURL(v)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:r,onChange:f=>s(f.target.value),className:"px-3 py-1.5 bg-zinc-800 rounded text-xs",children:[l.jsx("option",{value:"all",children:"All Levels"}),l.jsx("option",{value:"error",children:"Errors Only"}),l.jsx("option",{value:"warn",children:"Warnings Only"}),l.jsx("option",{value:"info",children:"Info Only"}),l.jsx("option",{value:"debug",children:"Debug Only"})]}),l.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[l.jsx("input",{type:"checkbox",checked:o,onChange:f=>d(f.target.checked)}),"Auto-scroll"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:x,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 rounded text-xs",children:" Export"}),l.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded text-xs",children:" Clear"})]})]}),l.jsx("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 h-96 overflow-y-auto font-mono text-xs",children:n.length===0?l.jsx("div",{className:"flex items-center justify-center h-full text-zinc-600",children:"No logs to display"}):l.jsxs("div",{className:"p-2 space-y-1",children:[n.map((f,v)=>l.jsxs("div",{className:`p-2 rounded ${h(f.level)}`,children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"opacity-60",children:new Date(f.timestamp).toLocaleTimeString()}),l.jsx("span",{children:p(f.source)}),l.jsx("span",{className:"uppercase font-bold",children:f.level}),l.jsx("span",{className:"flex-1",children:f.message})]}),f.details&&l.jsx("div",{className:"mt-1 pl-20 text-zinc-500 text-[10px]",children:f.details})]},v)),l.jsx("div",{ref:_})]})}),l.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[l.jsxs("div",{className:"bg-zinc-800 rounded p-2 text-center",children:[l.jsx("div",{className:"text-zinc-500",children:"Total"}),l.jsx("div",{className:"text-lg font-bold",children:e.length})]}),l.jsxs("div",{className:"bg-red-500/10 rounded p-2 text-center",children:[l.jsx("div",{className:"text-red-400",children:"Errors"}),l.jsx("div",{className:"text-lg font-bold text-red-400",children:e.filter(f=>f.level==="error").length})]}),l.jsxs("div",{className:"bg-yellow-500/10 rounded p-2 text-center",children:[l.jsx("div",{className:"text-yellow-400",children:"Warnings"}),l.jsx("div",{className:"text-lg font-bold text-yellow-400",children:e.filter(f=>f.level==="warn").length})]}),l.jsxs("div",{className:"bg-blue-500/10 rounded p-2 text-center",children:[l.jsx("div",{className:"text-blue-400",children:"Info"}),l.jsx("div",{className:"text-lg font-bold text-blue-400",children:e.filter(f=>f.level==="info").length})]})]})]})},lm=({onClose:e})=>{const[t,r]=U.useState("connection"),[s,o]=U.useState(""),d=J0.filter(_=>{if(!s)return!0;const n=s.toLowerCase();return _.label.toLowerCase().includes(n)||_.id.toLowerCase().includes(n)});return U.useEffect(()=>{s&&d.length>0&&!d.find(_=>_.id===t)&&r(d[0].id)},[s,d,t]),l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"w-[680px] max-h-[85vh] bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 bg-zinc-900/50 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Us,{className:"w-5 h-5 text-blue-500"}),l.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Settings"})]}),l.jsx("button",{onClick:e,className:"p-1 text-zinc-500 hover:text-white transition-colors",children:l.jsx(Ps,{size:20})})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Wl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-zinc-500"}),l.jsx("input",{type:"text",placeholder:"Search settings...",value:s,onChange:_=>o(_.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg pl-9 pr-3 py-1.5 text-xs text-zinc-200 placeholder:text-zinc-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}),s&&l.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-zinc-300 text-xs",children:l.jsx(Ps,{className:"w-3 h-3"})})]})]}),l.jsxs("div",{className:"flex flex-1 min-h-0",children:[l.jsx("div",{className:"w-48 border-r border-zinc-800 bg-zinc-950/50 py-2 flex-shrink-0",children:d.length===0?l.jsx("div",{className:"px-4 py-8 text-center",children:l.jsx("p",{className:"text-xs text-zinc-600",children:"No matching settings"})}):d.map(({id:_,label:n,icon:h})=>l.jsxs("button",{onClick:()=>r(_),className:`w-full flex items-center gap-2.5 px-4 py-2.5 text-xs font-medium transition-colors ${t===_?"bg-zinc-800/80 text-zinc-100 border-r-2 border-blue-500":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/40"}`,children:[l.jsx(h,{className:"w-4 h-4"}),n]},_))}),l.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[t==="connection"&&l.jsx(Z0,{}),t==="provider"&&l.jsx(em,{}),t==="appearance"&&l.jsx(tm,{}),t==="editor"&&l.jsx(rm,{}),t==="hierarchy"&&l.jsx(im,{}),t==="advanced"&&l.jsx(nm,{}),t==="logs"&&l.jsx(om,{})]})]})]})})};class cc extends U.Component{constructor(r){super(r);Kl(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error(`[ErrorBoundary${this.props.fallbackTitle?` - ${this.props.fallbackTitle}`:""}]`,r,s.componentStack)}render(){var r,s,o;if(this.state.hasError){const d=(r=this.props.fallbackTitle)!=null?r:"Component";return l.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full bg-zinc-950 p-6",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 max-w-sm text-center",children:[l.jsx("div",{className:"p-3 rounded-full bg-red-500/10 border border-red-500/20",children:l.jsx(Wp,{className:"w-6 h-6 text-red-400"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-semibold text-zinc-200 mb-1",children:[d," crashed"]}),l.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:(o=(s=this.state.error)==null?void 0:s.message)!=null?o:"An unexpected error occurred"})]}),l.jsxs("button",{onClick:this.handleRetry,className:`flex items-center gap-2 px-3 py-1.5 text-xs font-medium rounded-md
                         bg-zinc-800 border border-zinc-700 text-zinc-300
                         hover:bg-zinc-700 hover:text-zinc-100 transition-colors`,children:[l.jsx(ar,{className:"w-3.5 h-3.5"}),"Retry"]})]})})}return this.props.children}}const am=()=>{const[e,t]=U.useState(300),[r,s]=U.useState(400),[o,d]=U.useState(250),[_,n]=U.useState(!1),[h,p]=U.useState(!1),[x,f]=U.useState(!1),[v,w]=U.useState(!0),[C,S]=U.useState(!0),[u,c]=U.useState(!0),[i,a]=U.useState(!1);return U.useEffect(()=>{const m=b=>{if(_){b.preventDefault();const k=Math.max(250,Math.min(500,b.clientX));t(k)}if(h){b.preventDefault();const k=Math.max(300,Math.min(600,window.innerWidth-b.clientX));s(k)}if(x){b.preventDefault();const k=Math.max(150,Math.min(500,window.innerHeight-b.clientY));d(k)}},g=()=>{n(!1),p(!1),f(!1)};return(_||h||x)&&(window.addEventListener("mousemove",m,{passive:!1}),window.addEventListener("mouseup",g),document.body.style.cursor=x?"ns-resize":"ew-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g),document.body.style.cursor="",document.body.style.userSelect=""}},[_,h,x]),U.useEffect(()=>{const{loadChatHistory:m,loadSwarmTasks:g,loadMemoryStats:b,loadWatcherStatus:k}=oe.getState();m(),g(),b(),k()},[]),l.jsxs("div",{className:"flex h-screen w-full overflow-hidden relative",children:[C&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{width:e},className:"flex-shrink-0 h-full",children:l.jsx(cc,{fallbackTitle:"Swarm",children:l.jsx(B0,{onToggle:()=>S(!1)})})}),l.jsx("div",{className:"w-1 bg-transparent hover:bg-blue-500/50 cursor-ew-resize transition-colors",onMouseDown:()=>n(!0)})]}),l.jsxs("div",{className:"flex-1 flex flex-col min-w-0 h-full",children:[l.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:l.jsx(cc,{fallbackTitle:"Chat",children:l.jsx(U0,{})})}),v&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-1 bg-transparent hover:bg-blue-500/50 cursor-ns-resize transition-colors",onMouseDown:()=>f(!0)}),l.jsx("div",{style:{height:o},className:"flex-shrink-0",children:l.jsx(G0,{onClose:()=>w(!1)})})]})]}),u&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-1 bg-transparent hover:bg-blue-500/50 cursor-ew-resize transition-colors",onMouseDown:()=>p(!0)}),l.jsx("div",{style:{width:r},className:"flex-shrink-0 h-full",children:l.jsx(K0,{onClose:()=>c(!1)})})]}),l.jsxs("div",{className:"fixed bottom-16 left-4 flex gap-2 z-50",children:[!C&&l.jsx("button",{onClick:()=>S(!0),className:"p-2 bg-zinc-800 border border-zinc-700 rounded-lg hover:bg-zinc-700 transition-colors",title:"Show Swarm Panel",children:l.jsx("span",{className:"text-xs font-medium",children:"Agents"})}),!u&&l.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-zinc-800 border border-zinc-700 rounded-lg hover:bg-zinc-700 transition-colors",title:"Show Context Panel",children:l.jsx("span",{className:"text-xs font-medium",children:"Context"})}),!v&&l.jsx("button",{onClick:()=>w(!0),className:"p-2 bg-zinc-800 border border-zinc-700 rounded-lg hover:bg-zinc-700 transition-colors",title:"Show Terminal",children:l.jsx("span",{className:"text-xs font-medium",children:"Terminal"})})]}),i&&l.jsx(lm,{onClose:()=>a(!1)}),l.jsx(Y0,{onOpenSettings:()=>a(!0)})]})};function cm(){console.log("[App] App component function called");const[e,t]=U.useState(!0);console.log("[App] useState initialized, isInitializing:",e);const{checkNexusStatus:r,initializeTauriListeners:s,backend:o}=oe();if(console.log("[App] useNexusStore hook complete"),U.useEffect(()=>{console.log("[App] useEffect triggered");const _=setTimeout(()=>{console.warn("[App] Force showing UI after 3 seconds"),t(!1)},3e3);(async()=>{try{if(console.log("[App] Starting initialization..."),typeof window<"u"&&!window.__TAURI__){console.error("[App] Tauri runtime not available!"),t(!1),clearTimeout(_);return}console.log("[App] Tauri runtime detected"),await s(),console.log("[App] Tauri listeners initialized");try{const p=r(),x=new Promise((f,v)=>setTimeout(()=>v(new Error("Status check timeout")),2e3));await Promise.race([p,x]),console.log("[App] Status check completed")}catch(p){console.warn("[App] Status check failed or timed out:",p)}}catch(p){console.error("[App] Failed to initialize:",p)}finally{console.log("[App] Initialization complete, showing UI"),clearTimeout(_),t(!1)}})();const h=setInterval(()=>{r().catch(p=>{console.error("[App] Status check failed:",p)})},1e4);return()=>clearInterval(h)},[r,s]),e)return l.jsx("div",{className:"flex items-center justify-center h-screen bg-zinc-950 text-zinc-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Initializing Nexus Desktop..."}),l.jsx("p",{className:"text-zinc-400",children:"Connecting to Nexus CLI backend"})]})});const d=o.status==="disconnected"||o.status==="error";return l.jsxs("div",{className:"h-screen w-full bg-zinc-950 text-zinc-100 overflow-hidden",children:[d&&l.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/30 px-4 py-2 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vo,{className:"w-4 h-4 text-yellow-500"}),l.jsx("span",{className:"text-sm text-yellow-500",children:"Nexus CLI not detected. Some features may be unavailable."})]}),l.jsxs("button",{onClick:()=>r(),className:"flex items-center gap-1 px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 rounded text-xs text-yellow-500 transition-colors",children:[l.jsx(ar,{className:"w-3 h-3"}),"Retry"]})]}),l.jsx(am,{})]})}console.log("[main.tsx] Loading main.tsx");console.log("[main.tsx] Imports complete");console.log("[main.tsx] Tauri available:",typeof window.__TAURI__<"u");const qo=document.getElementById("root");console.log("[main.tsx] Root element:",qo);qo?(qn.createRoot(qo).render(l.jsx(Sc.StrictMode,{children:l.jsx(cm,{})})),console.log("[main.tsx] React render initiated")):console.error("[main.tsx] Root element not found!");
